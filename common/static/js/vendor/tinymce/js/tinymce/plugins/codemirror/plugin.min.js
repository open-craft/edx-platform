tinymce.PluginManager.requireLangPack("codemirror");tinymce.PluginManager.add("codemirror",function(e,o){function t(){e.focus();e.selection.collapse(true);if(e.settings.codemirror.saveCursorPosition){e.selection.setContent('<span style="display: none;" class="CmCaReT">&#x0;</span>')}var t=800;if(e.settings.codemirror.width){t=e.settings.codemirror.width}var r=550;if(e.settings.codemirror.height){r=e.settings.codemirror.height}var i=tinymce.majorVersion<5?[{text:"Ok",subtype:"primary",onclick:function(){var e=document.querySelectorAll(".mce-container-body>iframe")[0];e.contentWindow.submit();c.close()}},{text:"Cancel",onclick:"close"}]:[{type:"custom",text:"Ok",name:"codemirrorOk",primary:true},{type:"cancel",text:"Cancel",name:"codemirrorCancel"}];var n={title:"HTML source code",url:o+"/source.html",width:t,height:r,resizable:true,maximizable:true,fullScreen:e.settings.codemirror.fullscreen,saveCursorPosition:false,buttons:i};if(tinymce.majorVersion>=5){n.onAction=function(o,t){if(t.name==="codemirrorOk"){var r=document.querySelectorAll(".tox-dialog__body-iframe iframe")[0];r.contentWindow.submit();e.undoManager.add();c.close()}}}var c=tinymce.majorVersion<5?e.windowManager.open(n):e.windowManager.openUrl(n);if(e.settings.codemirror.fullscreen){c.fullscreen(true)}}if(tinymce.majorVersion<5){e.addButton("code",{title:"Source code",icon:"code",onclick:t});e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})}else{e.ui.registry.addButton("code",{text:"HTML",tooltip:"Edit HTML",onAction:t});e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Edit HTML",onAction:t,context:"tools"})}});