var ssla=function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){}return t.get=function(e){if(!t.parsed){var i=window.location.search.substring(1),r=void 0,n=void 0;for(t.parsed={},r=i.split("&"),n=0;n<r.length;n++){var o=r[n].split("=");""!==o[0]&&(o.length>1?t.parsed[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):t.parsed[decodeURIComponent(o[0])]="")}}return e in t.parsed?t.parsed[e]:""},t.parsed=null,t}();e.UrlVarService=r},function(t,e,i){"use strict";function r(t,e){void 0===e&&(e="/");var i=0,r="",n=e||"/",o=new RegExp(n+"{1,}","g");for(i=0;i<t.length;i++)""!==t[i]&&(""!==r&&(r+=e),r+=t[i]);return r.replace(o,n)}e.__esModule=!0,e.join=r},function(t,e,i){"use strict";function r(t,e,i){var r;if(null==(r=window.open(t,e,i))||void 0===r);else{r.focus();var n=window.setInterval(function(){var t,e;!1!==r.closed&&(window.clearInterval(n),1==p.navigableScoInOrderTraversal.length?(t=l.closePopupSingleScoBehavior(),e=l.closePopupSingleScoCustomFunction()):(t=l.closePopupMultiScoBehavior(),e=l.closePopupMultiScoCustomFunction()),""==t||("exit"==t?window.ssla.ssla.exit():"message"==t?alert("TODO message();"):"custom"==t?e?e():console.log("No exit custom behavior function defined in config."):console.log("Unrecognized exit behavior:",t)))},200)}return r}function n(t,e){return r(t,"sco_win",e)}function o(){return n(h,l.popupWindowParams())}function s(){return c(),o()}function a(t){var e=setInterval(function(){try{jca_course_player.document.getElementById("content").innerHTML=t,clearInterval(e)}catch(t){}},10)}function c(){a(l.popupMainContentMessageAfterOpen())}function u(t,e,i){var r;l=e,p=i,h=t,"popup"==l.openContentIn()?(r=o(),r?c():a(l.popupMainContentMessageFailed())):jca_course_player.document.location.replace(h)}e.__esModule=!0;var l,p,h;e.popupManually=s,e.openSco=u},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){}return t.prototype.matchElement=function(t){if(this.validElements[t])return this.validElements[t];for(var e=Object.keys(this.validRegexElements),i=0;i<e.length;i++)if(t.match(new RegExp("^"+e[i]+"$")))return this.validRegexElements[e[i]];return null},t.prototype.validateDecimal=function(t,e,i){var r=parseInt(t,10);return!isNaN(r)&&(!(void 0!==typeof e&&r<e)&&!(void 0!==typeof i&&r>i))},t.prototype.validateFeedback=function(t){var e=t.match(/^.{0,255}/);return!(!e||!e.length)},t.prototype.validateIdentifier=function(t,e){if(void 0===e&&(e=!1),e){var i=t.match(/^.+$/);if(i&&i.length)return!0}else{var i=t.match(/^\w{1,255}$/);if(i&&i.length)return!0}return!1},t.prototype.validateIntegerSigned=function(t,e,i){var r=parseInt(t,10);return!isNaN(r)&&(!(r<=-32768||r>=32768)&&(!(void 0!==typeof e&&r<e)&&!(void 0!==typeof i&&r>i)))},t.prototype.validateIntegerUnsigned=function(t,e,i){var r=parseInt(t,10);return!isNaN(r)&&(!(r<=0||r>=65536)&&(!(void 0!==typeof e&&r<e)&&!(void 0!==typeof i&&r>i)))},t.prototype.validateOneOf=function(t,e){var i;for(i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},t.prototype.validateString=function(t,e){return t.length<=e},t}();e.ScormBaseDataModel=r},function(t,e,i){"use strict";e.__esModule=!0;var r=i(12),n=i(13),o=function(){function t(t){void 0===t&&(t=""),this._value="",this.dirty=!1,this.wasSet=!1,this._value=t}return t.prototype.get=function(){return this._value},t.prototype.set=function(t){void 0!==t&&null!==t||(t=""),"number"!=typeof t&&(t=String(t)),this._value!==t&&(this.dirty=!0),this._value=t,this.wasSet=!0},t.prototype.isDirty=function(){return this.dirty},t.prototype.isSet=function(){return this.wasSet},t}();e.ScoVar=o;var s=function(){function t(){this.start=!1,this.end=!1,this.dirty=!1,this.wasSet=!1,this.totalWallTimeAtStart=0,this.currentWallTimeStart=0,this.currentWallTimeEnd=0,this.start=!1,this.end=!1,this.data={},this.fillDefaults(),this.populateMaxes()}return t.prototype.fillDefaults=function(){},t.prototype.getMaxIndex=function(t){var e,i,r,n=t.length,o=-1,s=this.keys();for(e=0;e<s.length;e++)s[e].substring(0,n)===t&&(i=s[e].substring(n).split("."),r=Number(i[0]),isNaN(r)||(o=Math.max(r,o)));return o},t.prototype.exportData=function(){var t={},e={status:this.getStatus(),score:this.getScore(),sessionTime:this.getSessionTime(),totalTime:this.getTotalTime(),sessionWallTime:0,totalWallTime:0,lastOpenedAt:this.currentWallTimeStart,lastClosedAt:this.currentWallTimeEnd,data:t};this.currentWallTimeEnd?e.sessionWallTime=this.currentWallTimeEnd-this.currentWallTimeStart:this.currentWallTimeStart&&(e.sessionWallTime=(new Date).getTime()-this.currentWallTimeStart),e.totalWallTime=this.totalWallTimeAtStart+e.sessionWallTime;var i;for(i in this.data)this.data.hasOwnProperty(i)&&(t[i]=this.data[i].get());return e},t.prototype.importData=function(t){var e;for(e in t.data)t.data.hasOwnProperty(e)&&this.canImportKey(e)&&(this.data[e]=new o(t.data[e]));this.populateMaxes(),this.totalWallTimeAtStart=0,t.totalWallTime&&(this.totalWallTimeAtStart=t.totalWallTime)},t.prototype.get=function(t){return this.data[t]?this.data[t].get():""},t.prototype.set=function(t,e){this.data[t]||(this.data[t]=new o),this.data[t].set(e),this.dirty=this.dirty||this.data[t].isDirty(),this.wasSet=!0},t.prototype.isDirty=function(){return this.dirty},t.prototype.isSet=function(){return this.wasSet},t.prototype.keys=function(){return Object.keys(this.data)},t.prototype.startViewing=function(){this.currentWallTimeStart=(new Date).getTime(),this.currentWallTimeEnd=0},t.prototype.stopViewing=function(){this.currentWallTimeEnd=(new Date).getTime()},t}();e.ScoData=s;var a=function(){function t(){this.scos={},this.currentScoId=null,this.sessionTime="",this.totalTime="",this.currentWallTimeStart=0,this.currentWallTimeEnd=0,this.totalWallTimeAtStart=0}return t.prototype.exportData=function(t){var e,i={status:"",score:"",sessionTime:"",totalTime:"",sessionWallTime:0,totalWallTime:0,lastOpenedAt:this.currentWallTimeStart,lastClosedAt:this.currentWallTimeEnd,currentSco:this.currentScoId,scos:{}};this.currentWallTimeEnd?i.sessionWallTime=this.currentWallTimeEnd-this.currentWallTimeStart:i.sessionWallTime=(new Date).getTime()-this.currentWallTimeStart,i.totalWallTime=this.totalWallTimeAtStart+i.sessionWallTime;for(e in this.scos)this.scos.hasOwnProperty(e)&&(i.scos[e]=this.scos[e].exportData(),i.sessionTime=this.addTimes(this.scos[e].getSessionTime(),i.sessionTime),i.totalTime=this.addTimes(this.scos[e].getTotalTime(),i.totalTime));return i.status=n.rollupAllScoStatuses(this,t),i.score=r.rollupAllScoScores(this,t),i},t.prototype.importData=function(t){var e;this.currentScoId=t.currentSco;for(e in t.scos)t.scos.hasOwnProperty(e)&&(this.scos[e]=this.makeNewScoData(),this.scos[e].importData(t.scos[e]));this.totalWallTimeAtStart=0,t.totalWallTime&&(this.totalWallTimeAtStart=t.totalWallTime),this.sessionTime="",this.totalTime="",t.totalTime&&(this.totalTime=t.totalTime)},t.prototype.startViewing=function(){this.currentWallTimeStart=(new Date).getTime(),this.currentWallTimeEnd=0},t.prototype.updateSessionViewing=function(){this.currentWallTimeEnd=(new Date).getTime()},t}();e.AllScosData=a},function(t,e,i){"use strict";e.__esModule=!0;var r=i(18),n=function(){function t(){this.tree=null}return t.prototype.parse=function(t){try{this.tree=r.parse(t,{})}catch(t){return console.log("exception",t),!1}return!0},t.prototype.lookupContext=function(t,e){return t.scos[e]?t.scos[e].getStatus():(alert("Context unavailable for SCO: "+e),"")},t.prototype.evaluate=function(t,e){if(null==t&&(t=this.tree),"[object String]"==Object.prototype.toString.call(t)){var i=this.lookupContext(e,t);return"passed"==i||"completed"==i}if("&"==t.op)return this.evaluate(t.left,e)&&this.evaluate(t.right,e);if("|"==t.op)return this.evaluate(t.left,e)||this.evaluate(t.right,e);if("="==t.op)return this.lookupContext(e,t.left)==t.right;if("<>"==t.op)return this.lookupContext(e,t.left)!=t.right;if("~"==t.op)return!this.evaluate(t.left,e);if("set"==t.op){for(var r=0,n=0;n<t.set.length;n++)this.evaluate(t.set[n],e)&&(r+=1);return t.times?r>=t.times:r==t.set.length}return alert("Unrecognized operator: "+t.op),!1},t}();e.AiccScript=n},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){}return t.hasClass=function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},t.addClass=function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},t.removeClass=function(t,e){if(this.hasClass(t,e)){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}},t}();e.DomRender=r},function(t,e,i){"use strict";e.__esModule=!0,e.VERSION="3.5.1"},function(t,e,i){"use strict";function r(){e.ssla.start()}function n(t){"next"===t?l.loadScoByIndex(l.currentScoIndex+1):"previous"===t?l.loadScoByIndex(l.currentScoIndex-1):"repeat"===t?l.loadScoByIndex(l.currentScoIndex):"exit"===t&&e.ssla.exit()}function o(t){l.loadScoByIdentifier(t)}function s(){l.endPreviousSco()}e.__esModule=!0;var a=i(9),c=i(25),u=i(7);e.start=r,e.navigate=n,e.navigateByIdentifier=o,e.finish=s;var l=new a.Scorm2004Plugin;e.ssla=new c.SSLA,e.ssla.registerPlugin("scorm",l),e.version=u.VERSION},function(t,e,i){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();e.__esModule=!0;var n=i(10),o=i(14),s=i(0);e.UrlVarService=s.UrlVarService;var a=i(16),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.API=null,e.API_1484_11=null,e}return r(e,t),e.prototype.initializeApi=function(t){if("1.2"===this.manifest.schemaVersionMain){var e=this.scosData.scos[t.identifier];e.set("cmi.core.student_id",this.config.studentId()),e.set("cmi.core.student_name",this.config.studentName()),e.set("cmi.launch_data",t.dataFromLms),e.set("cmi.student_data.mastery_score",t.masteryScore),e.set("cmi.student_data.max_time_allowed",t.maxTimeAllowed),e.set("cmi.student_data.time_limit_action",t.timeLimitAction),e.set("cmi.core.credit",this.config.getCredit()),e.set("cmi.core.mode",this.config.getMode()),this.API=new n.Scorm12Api(t.identifier,this.scosData.scos[t.identifier],this.events,this.config),this.API.addSaveCallback(this.storage.save,this.storage),window.API=this.API}else if("2004"===this.manifest.schemaVersionMain){var e=this.scosData.scos[t.identifier];e.set("cmi.learner_id",this.config.studentId()),e.set("cmi.learner_name",this.config.studentName()),e.set("cmi.launch_data",t.dataFromLms),e.set("cmi.max_time_allowed",t.maxTimeAllowed),e.set("cmi.time_limit_action",t.timeLimitAction),e.set("cmi.credit",this.config.getCredit()),e.set("cmi.mode",this.config.getMode()),this.API_1484_11=new o.Scorm2004Api(t.identifier,this.scosData.scos[t.identifier],this.events,this.config),this.API_1484_11.addSaveCallback(this.storage.save,this.storage),window.API_1484_11=this.API_1484_11}else alert("Manifest schema version unrecognized: "+this.manifest.schemaVersionMain)},e.prototype.endPreviousSco=function(){this.currentSco&&(this.scosData.scos[this.currentSco.identifier].stopViewing(),"1.2"===this.manifest.schemaVersionMain?this.API.LMSFinish(""):"2004"===this.manifest.schemaVersionMain&&this.API_1484_11.Terminate(""))},e.prototype.initializeScosData=function(){var t;if("1.2"===this.manifest.schemaVersionMain)for(this.scosData=new n.AllScos12Data,t=0;t<this.manifest.scoInOrderTraversal.length;t++)this.scosData.scos[this.manifest.scoInOrderTraversal[t].identifier]=new n.Sco12Data;else if("2004"===this.manifest.schemaVersionMain)for(this.scosData=new o.AllScos2004Data,t=0;t<this.manifest.scoInOrderTraversal.length;t++)this.scosData.scos[this.manifest.scoInOrderTraversal[t].identifier]=new o.Sco2004Data},e}(a.ScormPlugin);e.Scorm2004Plugin=c},function(t,e,i){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();e.__esModule=!0;var n=i(11),o=i(4),s=o.ScoVar,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.interactionCount=0,e.objectiveCount=0,e.interactionObjectiveCount={},e.correctResponsesCount={},e}return r(e,t),e.prototype.fillDefaults=function(){this.data["cmi.core.lesson_status"]=new s("not attempted"),this.data["cmi.suspend_data"]=new s(""),this.data["cmi.core.lesson_location"]=new s(""),this.data["cmi.core.session_time"]=new s("0000:00:00"),this.data["cmi.core.total_time"]=new s("0000:00:00"),this.data["cmi.core.entry"]=new s("ab-initio"),this.data["cmi.core.score.raw"]=new s(""),this.data["cmi.core.score.min"]=new s(""),this.data["cmi.core.score.max"]=new s(""),this.data["cmi.comments"]=new s(""),this.data["cmi.comments_from_lms"]=new s("No comment"),this.data["cmi.student_preference.audio"]=new s(""),this.data["cmi.student_preference.language"]=new s(""),this.data["cmi.student_preference.speed"]=new s(""),this.data["cmi.student_preference.text"]=new s(""),this.data["cmi.core.student_name"]=new s(""),this.data["cmi.core.student_id"]=new s(""),this.data["cmi.launch_data"]=new s(""),this.data["cmi.student_data.mastery_score"]=new s(""),this.data["cmi.student_data.max_time_allowed"]=new s(""),this.data["cmi.student_data.time_limit_action"]=new s(""),this.data["cmi.core.credit"]=new s("credit"),this.data["cmi.core.lesson_mode"]=new s("normal")},e.prototype.canImportKey=function(t){return"cmi.core.session_time"!=t},e.prototype.getScore=function(){return this.data["cmi.core.score.raw"].get()},e.prototype.getSessionTime=function(){return this.data["cmi.core.session_time"].get()},e.prototype.getStatus=function(){return this.data["cmi.core.lesson_status"].get()},e.prototype.getTotalTime=function(){return this.data["cmi.core.total_time"].get()},e.prototype.populateMaxes=function(){var t,e;for(this.interactionCount=this.getMaxIndex("cmi.interactions.")+1,this.updateInteractionCountDme(),this.objectiveCount=this.getMaxIndex("cmi.objectives.")+1,this.updateObjectiveCountDme(),t=0;t<this.interactionCount;t++)e="cmi.interactions."+t+".objectives.",this.interactionObjectiveCount[t]=this.getMaxIndex(e)+1,this.updateInteractionObjectiveCountDme(t);for(t=0;t<this.interactionCount;t++)e="cmi.interactions."+t+".correct_responses.",this.correctResponsesCount[t]=this.getMaxIndex(e)+1,this.updateCorrectResponsesCountDme(t)},e.prototype.set=function(e,i){t.prototype.set.call(this,e,i);var r=e.split(".");"interactions"===r[1]?(this.interactionCount=Math.max(Number(r[2])+1,this.interactionCount),this.updateInteractionCountDme(),"objectives"===r[3]?(this.interactionObjectiveCount[r[2]]=Math.max(Number(r[4])+1,this.interactionObjectiveCount[r[2]]),this.updateInteractionObjectiveCountDme(Number(r[2]))):this.updateInteractionObjectiveCountDme(Number(r[2])),"correct_responses"===r[3]?(this.correctResponsesCount[r[2]]=Math.max(Number(r[4])+1,this.correctResponsesCount[r[2]]),this.updateCorrectResponsesCountDme(Number(r[2]))):this.updateCorrectResponsesCountDme(Number(r[2]))):"objectives"===r[1]&&(this.objectiveCount=Math.max(Number(r[2])+1,this.objectiveCount),this.updateObjectiveCountDme())},e.prototype.updateInteractionCountDme=function(){this.data["cmi.interactions._count"]=new s(this.interactionCount)},e.prototype.updateObjectiveCountDme=function(){this.data["cmi.objectives._count"]=new s(this.objectiveCount)},e.prototype.updateInteractionObjectiveCountDme=function(t){this.interactionObjectiveCount[t]||(this.interactionObjectiveCount[t]=0),this.data["cmi.interactions."+t+".objectives._count"]=new s(this.interactionObjectiveCount[t])},e.prototype.updateCorrectResponsesCountDme=function(t){this.correctResponsesCount[t]||(this.correctResponsesCount[t]=0),this.data["cmi.interactions."+t+".correct_responses._count"]=new s(this.correctResponsesCount[t])},e}(o.ScoData);e.Sco12Data=a;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.addTimes=function(t,e){return u.addTime(t,e)},e.prototype.makeNewScoData=function(){return new a},e}(o.AllScosData);e.AllScos12Data=c;var u=function(){function t(){}return t.addTime=function(t,e){if(!t)return"";e||(e="0000:00:00");var i=t.split(":"),r=e,n=r.split(":"),o=0,s=Number(n[2])+Number(i[2]);s>60&&(o=Math.floor(s/60),s-=60*o);var a=Number(n[1])+Number(i[1])+o;o=0,a>60&&(o=Math.floor(a/60),a-=60*o);var c=Number(n[0])+Number(i[0])+o;c>9999&&(c=9999);var u=2,l=this.padTime(c.toString(),u),p=this.padTime(a.toString(),u);return(n[2].indexOf(".")>-1||i[2].indexOf(".")>-1)&&(u=5),l+":"+p+":"+this.padTime(s.toString(),u)},t.padTime=function(t,e){var i="0000";if(""===t)return i.substr(0,e);if(t.length<e){var r=e-t.length;return t=i.substr(0,r)+t}return t},t}(),l=function(){function t(t,e,i,r){this.error="0",this.events=null,this.saveCallbacks=[],this.scoName=t,this.sco=e,this.dataModel=new n.Scorm12DataModel,this.events=i,this.config=r,this.sco.start=!1,this.sco.end=!1}return t.prototype.storeTime=function(t){if(t){var e=u.addTime(t,this.sco.get("cmi.core.total_time"));this.sco.set("cmi.core.total_time",e)}},t.prototype.addSaveCallback=function(t,e){this.saveCallbacks.push([t,e])},t.prototype.callSave=function(t,e){var i;for(i=0;i<this.saveCallbacks.length;i++)this.saveCallbacks[i][0].call(this.saveCallbacks[i][1],"",{eventType:t,scoName:this.scoName,sco:this.sco,forceSync:e})},t.prototype.initialize=function(t){return""!==t?(this.error="201","false"):this.sco.start?(this.error="101","false"):this.sco.end?(this.error="101","false"):(this.sco.start=!0,this.error="0","true")},t.prototype.finish=function(t){if(""!==t)return this.error="201","false";if(!this.sco.start)return this.error="301","false";if(this.sco.end)return this.error="301","false";"not attempted"==this.sco.get("cmi.core.lesson_status")&&this.config.statusAllowCompletionOnUnsetFinish()&&this.sco.set("cmi.core.lesson_status","completed");var e=this.sco.get("cmi.student_data.mastery_score");if(""!==e){var i=this.sco.get("cmi.core.score.raw");""!==i&&(parseInt(i,10)>=parseInt(e,10)?this.sco.set("cmi.core.lesson_status","passed"):this.sco.set("cmi.core.lesson_status","failed"))}var r=this.sco.get("cmi.core.session_time");return this.storeTime(r),"suspend"===this.sco.get("cmi.core.exit")?this.sco.set("cmi.core.entry","resume"):this.sco.set("cmi.core.entry",""),this.sco.end=!0,this.error="0",this.callSave("finish",!0),"true"},t.prototype.getValue=function(t){if(!this.sco.start)return this.error="301","";if(this.sco.end)return this.error="301","";if(void 0===t||null===t)return this.error="201","false";t=String(t);var e=this.dataModel.matchElement(t);return e?"W"===e.d?(this.error="404",""):(this.error="0","Fixed"===e.t?e.v:this.sco.get(t)):(this.error="201","")},t.prototype.setValue=function(t,e){var i=!0;if(!this.sco.start)return this.error="301","false";if(this.sco.end)return this.error="301","false";if(void 0===t||null===t)return this.error="201","false";t=String(t),void 0!==e&&null!==e||(e=""),e=String(e);var r=this.dataModel.matchElement(t);if(!r)return this.error="201","false";if("R"===r.d)return this.error="403","false";"cmi.comments"===t&&(e=this.sco.get("cmi.comments")+e);var n,o=""+e;if("CMIDecimal"===r.t)n=this.dataModel.validateDecimal(o,r.min,r.max);else if("CMIFeedback"===r.t)n=this.dataModel.validateFeedback(o);else if("CMIIdentifier"===r.t)n=this.dataModel.validateIdentifier(o,this.config.looseIdentifiers());else if("CMIInteger"===r.t)n=this.dataModel.validateIntegerUnsigned(o,r.min,r.max);else if("CMISInteger"===r.t)n=this.dataModel.validateIntegerSigned(o,r.min,r.max);else if("OneOf"===r.t)n=this.dataModel.validateOneOf(r.c,o);else if("CMIResult"===r.t)n=this.dataModel.validateResult(o);else if("CMIString"===r.t)n=this.dataModel.validateString(o,r.l);else if("CMITime"===r.t)n=this.dataModel.validateTime(o);else{if("CMITimespan"!==r.t)return console.log("Unrecognized data validation type.",r.t),this.error="101","false";n=this.dataModel.validateTimespan(o)}if(!n)return this.error="405","false";var s=t.split(".");if("interactions"===s[1]){if(Number(s[2])>this.sco.interactionCount)return this.error="201","false";if("objectives"===s[3]&&Number(s[4])>this.sco.interactionObjectiveCount[s[2]])return this.error="201","false";if("correct_responses"===s[3]&&Number(s[4])>this.sco.correctResponsesCount[s[2]])return this.error="201","false"}if("objectives"===s[1]&&Number(s[2])>this.sco.objectiveCount)return this.error="201","false";if("cmi.core.score.raw"==t){var a=this.sco.get("cmi.core.score.raw"),c=this.sco.get("cmi.core.lesson_status");""!==a&&("completed"==c&&!this.config.scoreAllowChangeAfterCompleted()||"passed"==c&&!this.config.scoreAllowChangeAfterPassed()||"failed"==c&&!this.config.scoreAllowChangeAfterFailed())?i=!1:this.config.scoreAllowReduce()||""!==a&&Number(a)>Number(e)&&(i=!1)}if("cmi.core.lesson_status"==t){var c=this.sco.get("cmi.core.lesson_status");("completed"==c&&!this.config.statusAllowChangeAfterCompleted()||"passed"==c&&!this.config.statusAllowChangeAfterPassed()||"failed"==c&&!this.config.statusAllowChangeAfterFailed())&&(i=!1)}return this.error="0",i&&(this.sco.set(t,o),"cmi.core.lesson_status"===t&&this.events.statusChange.dispatch(o),this.config.saveDataOnSetValue()&&this.callSave("setValue",!1)),"true"},t.prototype.commit=function(t){return""!==t?(this.error="201","false"):this.sco.start?this.sco.end?(this.error="301","false"):(this.error="0",this.config.saveDataOnCommit()&&this.callSave("commit",!1),"true"):(this.error="301","false")},t.prototype.getLastError=function(){return this.error},t.prototype.getErrorString=function(t){var e={0:"No error",101:"General Exception",201:"Invalid argument error",202:"Element cannot have children",203:"Element not an array.",301:"Not initialized",401:"Not implemented error",402:"Invalid set value, element is a keyword",403:"Element is read only",404:"Element is write only",405:"Incorrect Data Type"};return e[t]?e[t]:""},t.prototype.getDiagnostic=function(t){return this.error},t.prototype.LMSInitialize=function(t){var e;return this.events.preInitialize.dispatch("LMSInitialize",[t]),e=this.initialize(t),this.events.postInitialize.dispatch("LMSInitialize",[t],e,this.error),e},t.prototype.LMSFinish=function(t){var e;return this.events.preFinish.dispatch("LMSFinish",[t]),e=this.finish(t),this.events.postFinish.dispatch("LMSFinish",[t],e,this.error),e},t.prototype.LMSGetValue=function(t){var e;return this.events.preGetValue.dispatch("LMSGetValue",[t]),e=this.getValue(t),this.events.postGetValue.dispatch("LMSGetValue",[t],e,this.error),e},t.prototype.LMSSetValue=function(t,e){var i;return this.events.preSetValue.dispatch("LMSSetValue",[t,e]),i=this.setValue(t,e),this.events.postSetValue.dispatch("LMSSetValue",[t,e],i,this.error),i},t.prototype.LMSCommit=function(t){var e;return this.events.preCommit.dispatch("LMSCommit",[t]),e=this.commit(t),this.events.postCommit.dispatch("LMSCommit",[t],e,this.error),e},t.prototype.LMSGetLastError=function(){var t;return this.events.preGetLastError.dispatch("LMSGetLastError",[]),t=this.getLastError(),this.events.postGetLastError.dispatch("LMSGetLastError",[],t,this.error),t},t.prototype.LMSGetErrorString=function(t){var e;return this.events.preGetErrorString.dispatch("LMSGetErrorString",[t]),e=this.getErrorString(t),this.events.postGetLastError.dispatch("LMSGetErrorString",[t],e,this.error),e},t.prototype.LMSGetDiagnostic=function(t){var e;return this.events.preGetDiagnostic.dispatch("LMSGetDiagnostic",[t]),e=this.getDiagnostic(t),this.events.postGetDiagnostic.dispatch("LMSGetDiagnostic",[t],e,this.error),e},t}();e.Scorm12Api=l},function(t,e,i){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();e.__esModule=!0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.statusChoices=["passed","completed","failed","incomplete","browsed"],e.objStatusChoices=["not attempted","passed","completed","failed","incomplete","browsed"],e.validElements={"cmi.comments_from_lms":{d:"R",t:"CMIString",l:4096},"cmi.comments":{d:"RW",t:"CMIString",l:4096},"cmi.core._children":{d:"R",t:"Fixed",v:"student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time"},"cmi.core.credit":{d:"R",t:"OneOf",c:["credit","no-credit"]},"cmi.core.entry":{d:"R",t:"OneOf",c:["","ab-initio","resume"]},"cmi.core.exit":{d:"W",t:"OneOf",c:["","time-out","logout","suspend"]},"cmi.core.lesson_location":{d:"RW",t:"CMIString",l:255},"cmi.core.lesson_mode":{d:"R",t:"OneOf",c:["browse","normal","review"]},"cmi.core.lesson_status":{d:"RW",t:"OneOf",c:e.statusChoices},"cmi.core.score._children":{d:"R",t:"Fixed",v:"raw,min,max"},"cmi.core.score.max":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi.core.score.min":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi.core.score.raw":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi.core.session_time":{d:"W",t:"CMITimespan"},"cmi.core.student_id":{d:"R",t:"CMIString",l:255},"cmi.core.student_name":{d:"R",t:"CMIString",l:255},"cmi.core.total_time":{d:"R",t:"CMITimespan"},"cmi.launch_data":{d:"R",t:"CMIString",l:4096},"cmi.student_data._children":{d:"R",t:"Fixed",v:"mastery_score,max_time_allowed,time_limit_action"},"cmi.student_data.mastery_score":{d:"R",t:"Score"},"cmi.student_data.max_time_allowed":{d:"R",t:"CMITimespan"},"cmi.student_data.time_limit_action":{d:"R",t:"OneOf",c:["exit,message","exit,no message","continue,message","continue,no message"]},"cmi.student_preference._children":{d:"R",t:"Fixed",v:"audio,language,speed,text"},"cmi.student_preference.audio":{d:"RW",t:"CMISInteger",min:-1,max:100},"cmi.student_preference.language":{d:"RW",t:"CMIString",l:255},"cmi.student_preference.speed":{d:"RW",t:"CMISInteger",min:-100,max:100},"cmi.student_preference.text":{d:"RW",t:"CMISInteger",min:-1,max:1},"cmi.suspend_data":{d:"RW",t:"CMIString",l:4096},"cmi.interactions._children":{d:"R",t:"Fixed",v:"id,objectives,time,type,correct_responses,weighting,student_response,result,latency"},"cmi.interactions._count":{d:"R",t:"CMIInteger"},"cmi.objectives._children":{d:"R",t:"Fixed",v:"id,score,status"},"cmi.objectives._count":{d:"R",t:"CMIInteger"}},e.validRegexElements={"cmi\\.interactions.\\d+\\.id":{d:"W",t:"CMIIdentifier"},"cmi\\.interactions.\\d+\\.time":{d:"W",t:"CMITime"},"cmi\\.interactions.\\d+\\.type":{d:"W",t:"OneOf",c:["true-false","choice","fill-in","matching","performance","sequencing","likert","numeric"]},"cmi\\.interactions.\\d+\\.weighting":{d:"W",t:"CMIDecimal"},"cmi\\.interactions.\\d+\\.student_response":{d:"W",t:"CMIFeedback"},"cmi\\.interactions.\\d+\\.result":{d:"W",t:"CMIResult"},"cmi\\.interactions.\\d+\\.latency":{d:"W",t:"CMITimespan"},"cmi\\.interactions.\\d+\\.objectives\\._count":{d:"R",t:"CMIInteger"},"cmi\\.interactions.\\d+\\.objectives\\._children":{d:"R",t:"Fixed",v:"id"},"cmi\\.interactions.\\d+\\.objectives.\\d+\\.id":{d:"W",t:"CMIIdentifier"},"cmi\\.interactions.\\d+\\.correct_responses\\._count":{d:"R",t:"CMIInteger"},"cmi\\.interactions.\\d+\\.correct_responses\\._children":{d:"R",t:"Fixed",v:"pattern"},"cmi\\.interactions.\\d+\\.correct_responses.\\d+\\.pattern":{d:"W",t:"CMIFeedback"},"cmi\\.objectives.\\d+\\.id":{d:"RW",t:"CMIIdentifier"},"cmi\\.objectives.\\d+\\.score\\._children":{d:"R",t:"Fixed",v:"raw,min,max"},"cmi\\.objectives.\\d+\\.score\\.raw":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi\\.objectives.\\d+\\.score\\.max":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi\\.objectives.\\d+\\.score\\.min":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi\\.objectives.\\d+\\.status":{d:"RW",t:"OneOf",c:e.objStatusChoices}},e}return r(e,t),e.prototype.validateIdentifier=function(t,e){if(void 0===e&&(e=!1),e){var i=t.match(/^.+$/);if(i&&i.length)return!0}else{var i=t.match(/^[0-9a-zA-Z_-]{1,255}$/);if(i&&i.length)return!0}return!1},e.prototype.validateResult=function(t){var e=t.match(/^correct$|^wrong$|^unanticipated$|^neutral$|^([0-9]{0,3})?(\.[0-9]{1,2})?$/);return!(!e||!e.length)},e.prototype.validateTime=function(t){var e=t.match(/^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(\.[0-9]{1,2})?$/);return!(!e||!e.length)},e.prototype.validateTimespan=function(t){var e=t.match(/^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(\.[0-9]{1,2})?$/);return!(!e||!e.length)},e}(n.ScormBaseDataModel);e.Scorm12DataModel=o},function(t,e,i){"use strict";function r(t,e){if(e.scoreRollupCustomFunction())return e.scoreRollupCustomFunction()(t,e);var i,r=0,n="",o=0;for(i in t.scos)t.scos.hasOwnProperty(i)&&(n=t.scos[i].getScore(),""!==n?(r+=Number(n),o+=1):e.scoreRollupIncludeScosWithNoScore()&&(o+=1));return 0==o?"":String(r/o)}e.__esModule=!0,e.rollupAllScoScores=r},function(t,e,i){"use strict";function r(t,e){if(e.statusRollupCustomFunction())return e.statusRollupCustomFunction()(t,e);var i,r="",n="";for(i in t.scos)if(t.scos.hasOwnProperty(i)&&""!==(n=t.scos[i].getStatus()))switch(r){case"":r=n;break;case"not attempted":switch(n){case"not attempted":break;case"incomplete":r="incomplete";break;case"failed":r="failed";break;case"completed":case"passed":r="incomplete"}break;case"incomplete":switch(n){case"not attempted":case"incomplete":break;case"failed":r=n}break;case"failed":break;case"completed":switch(n){case"not attempted":case"incomplete":r="incomplete";break;case"failed":r=n;break;case"completed":break;case"passed":r=n}break;case"passed":switch(n){case"not attempted":case"incomplete":r="incomplete";break;case"failed":r=n}}return r}e.__esModule=!0,e.rollupAllScoStatuses=r},function(t,e,i){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();e.__esModule=!0;var n=i(15),o=i(4),s=o.ScoVar,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.interactionCount=0,e.objectiveCount=0,e.interactionObjectiveCount={},e.correctResponsesCount={},e}return r(e,t),e.prototype.fillDefaults=function(){this.data["cmi.completion_status"]=new s("not attempted"),this.data["cmi.success_status"]=new s("unknown"),this.data["cmi.suspend_data"]=new s(""),this.data["cmi.location"]=new s(""),this.data["cmi.session_time"]=new s("PT0S"),this.data["cmi.total_time"]=new s("PT0S"),this.data["cmi.entry"]=new s("ab-initio"),this.data["cmi.score.scaled"]=new s(""),this.data["cmi.score.raw"]=new s(""),this.data["cmi.score.min"]=new s(""),this.data["cmi.score.max"]=new s(""),this.data["cmi.learner_preference.audio_level"]=new s("0"),this.data["cmi.learner_preference.language"]=new s(""),this.data["cmi.learner_preference.delivery_speed"]=new s("0"),this.data["cmi.learner_preference.audio_captioning"]=new s("0"),this.data["cmi.learner_name"]=new s(""),this.data["cmi.learner_id"]=new s(""),this.data["cmi.launch_data"]=new s(""),this.data["cmi.max_time_allowed"]=new s(""),this.data["cmi.time_limit_action"]=new s(""),this.data["cmi.credit"]=new s("credit"),this.data["cmi.mode"]=new s("normal")},e.prototype.canImportKey=function(t){return"cmi.session_time"!=t},e.prototype.getScore=function(){var t=this.data["cmi.score.raw"].get();return""===t&&(t=this.data["cmi.score.scaled"].get()),t},e.prototype.getSessionTime=function(){return this.data["cmi.session_time"].get()},e.prototype.getStatus=function(){var t=this.data["cmi.success_status"].get(),e=this.data["cmi.completion_status"].get();return"incomplete"===e?e:"passed"===t||"failed"===t?t:e},e.prototype.getTotalTime=function(){return this.data["cmi.total_time"].get()},e.prototype.populateMaxes=function(){var t,e;for(this.interactionCount=this.getMaxIndex("cmi.interactions.")+1,this.updateInteractionCountDme(),this.objectiveCount=this.getMaxIndex("cmi.objectives.")+1,this.updateObjectiveCountDme(),t=0;t<this.interactionCount;t++)e="cmi.interactions."+t+".objectives.",this.interactionObjectiveCount[t]=this.getMaxIndex(e)+1,this.updateInteractionObjectiveCountDme(t);for(t=0;t<this.interactionCount;t++)e="cmi.interactions."+t+".correct_responses.",this.correctResponsesCount[t]=this.getMaxIndex(e)+1,this.updateCorrectResponsesCountDme(t)},e.prototype.set=function(e,i){t.prototype.set.call(this,e,i);var r=e.split(".");"interactions"===r[1]?(this.interactionCount=Math.max(Number(r[2])+1,this.interactionCount),this.updateInteractionCountDme(),"objectives"===r[3]?(this.interactionObjectiveCount[r[2]]=Math.max(Number(r[4])+1,this.interactionObjectiveCount[r[2]]),this.updateInteractionObjectiveCountDme(Number(r[2]))):this.updateInteractionObjectiveCountDme(Number(r[2])),"correct_responses"===r[3]?(this.correctResponsesCount[r[2]]=Math.max(Number(r[4])+1,this.correctResponsesCount[r[2]]),this.updateCorrectResponsesCountDme(Number(r[2]))):this.updateCorrectResponsesCountDme(Number(r[2]))):"objectives"===r[1]&&(this.objectiveCount=Math.max(Number(r[2])+1,this.objectiveCount),this.updateObjectiveCountDme())},e.prototype.updateInteractionCountDme=function(){this.data["cmi.interactions._count"]=new s(this.interactionCount)},e.prototype.updateObjectiveCountDme=function(){this.data["cmi.objectives._count"]=new s(this.objectiveCount)},e.prototype.updateInteractionObjectiveCountDme=function(t){this.interactionObjectiveCount[t]||(this.interactionObjectiveCount[t]=0),this.data["cmi.interactions."+t+".objectives._count"]=new s(this.interactionObjectiveCount[t])},e.prototype.updateCorrectResponsesCountDme=function(t){this.correctResponsesCount[t]||(this.correctResponsesCount[t]=0),this.data["cmi.interactions."+t+".correct_responses._count"]=new s(this.correctResponsesCount[t])},e}(o.ScoData);e.Sco2004Data=a;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.addTimes=function(t,e){return u.addTime(t,e)},e.prototype.makeNewScoData=function(){return new a},e}(o.AllScosData);e.AllScos2004Data=c;var u=function(){function t(){}return t.addTime=function(t,e){if(!t)return"";if(!e)return t;this.dm.validateTimespan(e)||(e="PT0S");for(var i=t.split("P"),r=e.split("P"),n=t.indexOf("T")>-1||e.indexOf("T")>-1,o=this.parseTimestamp(i[1]),s=this.parseTimestamp(r[1]),a="P",c=["yearVal","monthVal","dayVal"],u=["hourVal","minVal"],l=0;l<c.length;l++)a+=this.addValuesToTimeString(c[l],o,s);if(n){a+="T";for(var l=0;l<u.length;l++)a+=this.addValuesToTimeString(u[l],o,s);if(o.secVal||s.secVal){if(o.secVal&&s.secVal){var p=o.secVal+s.secVal,h=p%1;0!==h&&h>.99&&(p=p-h+Math.round(100*h)/100),s.secVal=p}s.secVal||(s.secVal=o.secVal),a+=s.secVal.toString()+"S"}}return"P"!=a&&"PT"!=a||(a="PT0S"),a},t.addValuesToTimeString=function(t,e,i){var r="";if(e[t]||i[t]){e[t]&&i[t]&&(i[t]=e[t]+i[t]),i[t]||(i[t]=e[t]);var n=t.charAt(0).toUpperCase();r=i[t].toString()+n}return r},t.parseTimestamp=function(t){var e=t.indexOf("T"),i={},r=t,n="";e>-1&&(r=t.substring(0,e),n=t.substring(e+1,t.length));var o=r.match(/(\d+Y|Y)/),s=r.match(/(\d+M|M)/),a=r.match(/(\d+D|D)/),c=n.match(/(\d+H|H)/),u=n.match(/(\d+M|M)/),l=n.match(/(\d+([.]\d{1,2})?S|S)/);return null!=o&&(i.yearVal=Number(o[0].replace("Y",""))),null!=s&&(i.monthVal=Number(s[0].replace("M",""))),null!=a&&(i.dayVal=Number(a[0].replace("D",""))),null!=c&&(i.hourVal=Number(c[0].replace("H",""))),null!=u&&(i.minVal=Number(u[0].replace("M",""))),null!=l&&(i.secVal=Number(l[0].replace("S",""))),i},t.dm=new n.Scorm2004DataModel,t}(),l=function(){function t(t,e,i,r){this.error="0",this.events=null,this.saveCallbacks=[],this.scoName=t,this.sco=e,this.dataModel=new n.Scorm2004DataModel,this.events=i,this.config=r,this.sco.start=!1,this.sco.end=!1}return t.prototype.storeTime=function(t){if(t){var e=u.addTime(t,this.sco.get("cmi.total_time"));this.sco.set("cmi.total_time",e)}},t.prototype.addSaveCallback=function(t,e){this.saveCallbacks.push([t,e])},t.prototype.callSave=function(t,e){var i;for(i=0;i<this.saveCallbacks.length;i++)this.saveCallbacks[i][0].call(this.saveCallbacks[i][1],"",{eventType:t,scoName:this.scoName,sco:this.sco,forceSync:e})},t.prototype.initialize=function(t){return""!==t?(this.error="201","false"):this.sco.end?(this.error="104","false"):this.sco.start?(this.error="103","false"):(this.sco.start=!0,this.error="0","true")},t.prototype.finish=function(t){if(""!==t)return this.error="201","false";if(!this.sco.start)return this.error="112","false";if(this.sco.end)return this.error="113","false";"not attempted"==this.sco.get("cmi.completion_status")&&this.config.statusAllowCompletionOnUnsetFinish()&&this.sco.set("cmi.completion_status","completed");var e=this.sco.get("cmi.session_time");return this.storeTime(e),"suspend"===this.sco.get("cmi.exit")?this.sco.set("cmi.entry","resume"):this.sco.set("cmi.entry",""),this.sco.end=!0,this.error="0",this.callSave("finish",!0),"true"},t.prototype.getValue=function(t){if(!this.sco.start)return this.error="122","";if(this.sco.end)return this.error="123","";if(void 0===t||null===t)return this.error="301","false";t=String(t);var e=this.dataModel.matchElement(t);return e?"W"===e.d?(this.error="405",""):(this.error="0","Fixed"===e.t?e.v:this.sco.get(t)):(this.error="401","")},t.prototype.setValue=function(t,e){var i=!0;if(!this.sco.start)return this.error="132","false";if(this.sco.end)return this.error="133","false";if(void 0===t||null===t)return this.error="351","false";t=String(t),void 0!==e&&null!==e||(e=""),e=String(e);var r=this.dataModel.matchElement(t);if(!r)return this.error="401","false";if("R"===r.d)return this.error="404","false";var n,o=""+e;if("CMIDecimal"===r.t)n=this.dataModel.validateDecimal(o,r.min,r.max);else if("CMIFeedback"===r.t)n=this.dataModel.validateFeedback(o);else if("CMIIdentifier"===r.t)n=this.dataModel.validateIdentifier(o,this.config.looseIdentifiers());else if("CMIInteger"===r.t)n=this.dataModel.validateIntegerUnsigned(o,r.min,r.max);else if("CMISInteger"===r.t)n=this.dataModel.validateIntegerSigned(o,r.min,r.max);else if("OneOf"===r.t)n=this.dataModel.validateOneOf(r.c,o);else if("CMIResult"===r.t)n=this.dataModel.validateResult(o);else if("CMIString"===r.t)n=this.dataModel.validateString(o,r.l);else if("CMITime2004"===r.t)n=this.dataModel.validateTime(o);else{if("CMITimespan"!==r.t)return this.error="351","false";n=this.dataModel.validateTimespan(o)}if(!n)return this.error="406","false";var s=t.split(".");if("interactions"===s[1]){if(Number(s[2])>this.sco.interactionCount)return this.error="408","false";if("objectives"===s[3]&&Number(s[4])>this.sco.interactionObjectiveCount[s[2]])return this.error="408","false";if("correct_responses"===s[3]&&Number(s[4])>this.sco.correctResponsesCount[s[2]])return this.error="408","false"}if("objectives"===s[1]&&Number(s[2])>this.sco.objectiveCount)return this.error="408","false";if("cmi.score.raw"==t){var a=this.sco.get("cmi.score.raw"),c=this.sco.get("cmi.completion_status"),u=this.sco.get("cmi.success_status");""!==a&&("completed"==c&&!this.config.scoreAllowChangeAfterCompleted()||"passed"==u&&!this.config.scoreAllowChangeAfterPassed()||"failed"==u&&!this.config.scoreAllowChangeAfterFailed())?i=!1:this.config.scoreAllowReduce()||""!==a&&Number(a)>Number(e)&&(i=!1)}else if("cmi.score.scaled"==t){var a=this.sco.get("cmi.score.scaled"),c=this.sco.get("cmi.completion_status"),u=this.sco.get("cmi.success_status");""!==a&&("completed"==c&&!this.config.scoreAllowChangeAfterCompleted()||"passed"==u&&!this.config.scoreAllowChangeAfterPassed()||"failed"==u&&!this.config.scoreAllowChangeAfterFailed())?i=!1:this.config.scoreAllowReduce()||""!==a&&Number(a)>Number(e)&&(i=!1)}if("cmi.success_status"==t){var l=this.sco.get("cmi.success_status");("passed"==l&&!this.config.statusAllowChangeAfterPassed()||"failed"==l&&!this.config.statusAllowChangeAfterFailed())&&(i=!1)}else if("cmi.completion_status"==t){var l=this.sco.get("cmi.completion_status");"completed"!=l||this.config.statusAllowChangeAfterCompleted()||(i=!1)}return this.error="0",i&&(this.sco.set(t,o),"cmi.completion_status"!==t&&"cmi.lesson_status"!==t||this.events.statusChange.dispatch(o),this.config.saveDataOnSetValue()&&this.callSave("setValue",!1)),"true"},t.prototype.commit=function(t){return""!==t?(this.error="201","false"):this.sco.start?this.sco.end?(this.error="143","false"):(this.error="0",this.config.saveDataOnCommit()&&this.callSave("commit",!1),"true"):(this.error="142","false")},t.prototype.getLastError=function(){return this.error},t.prototype.getErrorString=function(t){var e={0:"No error",101:"General Exception",102:"General Initialization Failure",103:"Already Initialized",104:"Content Instance Terminated",111:"General Termination Failure",112:"Termination Before Initialization",113:"Termination After Termination",122:"Retrieve Data Before Initialization",123:"Retrieve Data After Termination",132:"Store Data Before Initialization",133:"Store Data After Termination",142:"Commit Before Initialization",143:"Commit After Termination",201:"General Argument Error",301:"General Get Failure",351:"General Set Failure",391:"General Commit Failure",401:"Undefined Data Model Element",402:"Unimplemented Data Model Element",403:"Data Model Element Value Not Initialized",404:"Data Model Element Is Read Only",405:"Data Model Element Is Write Only",406:"Data Model Element Type Mismatch",407:"Data Model Element Value Out Of Range",408:"Data Model Dependency Not Established"};return e[t]?e[t]:""},t.prototype.getDiagnostic=function(t){return this.error},t.prototype.Initialize=function(t){var e;return this.events.preInitialize.dispatch("Initialize",[t]),e=this.initialize(t),this.events.postInitialize.dispatch("Initialize",[t],e,this.error),e},t.prototype.Terminate=function(t){var e;return this.events.preFinish.dispatch("Terminate",[t]),e=this.finish(t),this.events.postFinish.dispatch("Terminate",[t],e,this.error),e},t.prototype.GetValue=function(t){var e;return this.events.preGetValue.dispatch("GetValue",[t]),e=this.getValue(t),this.events.postGetValue.dispatch("GetValue",[t],e,this.error),e},t.prototype.SetValue=function(t,e){var i;return this.events.preSetValue.dispatch("SetValue",[t,e]),i=this.setValue(t,e),this.events.postSetValue.dispatch("SetValue",[t,e],i,this.error),i},t.prototype.Commit=function(t){var e;return this.events.preCommit.dispatch("Commit",[t]),e=this.commit(t),this.events.postCommit.dispatch("Commit",[t],e,this.error),e},t.prototype.GetLastError=function(){var t;return this.events.preGetLastError.dispatch("GetLastError",[]),t=this.getLastError(),this.events.postGetLastError.dispatch("GetLastError",[],t,this.error),t},t.prototype.GetErrorString=function(t){var e;return this.events.preGetErrorString.dispatch("GetErrorString",[t]),e=this.getErrorString(t),this.events.postGetLastError.dispatch("GetErrorString",[t],e,this.error),e},t.prototype.GetDiagnostic=function(t){var e;return this.events.preGetDiagnostic.dispatch("GetDiagnostic",[t]),e=this.getDiagnostic(t),this.events.postGetDiagnostic.dispatch("GetDiagnostic",[t],e,this.error),e},t}();e.Scorm2004Api=l},function(t,e,i){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();e.__esModule=!0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.successStatusChoices=["passed","failed","unknown"],e.completionStatusChoices=["not attempted","completed","incomplete","unknown"],e.navRequestChoices=["","continue","previous","choice","jump","exit","exitAll","abandon","abandonAll","suspendAll"],e.validElements={"cmi._version":{d:"R",t:"Fixed",v:"2004 4th Edition"},"cmi.completion_status":{d:"RW",t:"OneOf",c:e.completionStatusChoices},"cmi.completion_threshold":{d:"RW",t:"CMIDecimal",min:0,max:1},"cmi.credit":{d:"R",t:"OneOf",c:["credit","no-credit"]},"cmi.entry":{d:"R",t:"OneOf",c:["","ab-initio","resume"]},"cmi.exit":{d:"W",t:"OneOf",c:["","time-out","logout","suspend","normal"]},"cmi.interactions._children":{d:"R",t:"Fixed",v:"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description"},"cmi.interactions._count":{d:"R",t:"CMIInteger"},"cmi.objectives._children":{d:"R",t:"Fixed",v:"id,score,success_status,completion_status,description,progress_measure"},"cmi.objectives._count":{d:"R",t:"CMIInteger"},"cmi.launch_data":{d:"R",t:"CMIString",l:4e3},"cmi.learner_id":{d:"R",t:"CMIString",l:4e3},"cmi.learner_name":{d:"R",t:"CMIString",l:250},"cmi.learner_preference._children":{d:"R",t:"Fixed",v:"audio_level,language,delivery_speed,audio_captioning"},"cmi.learner_preference.audio_level":{d:"RW",t:"CMIDecimal"},"cmi.learner_preference.language":{d:"RW",t:"CMIString",l:250},"cmi.learner_preference.delivery_speed":{d:"RW",t:"CMIDecimal",min:0},"cmi.learner_preference.audio_captioning":{d:"RW",t:"OneOf",c:["-1","0","1"]},"cmi.location":{d:"RW",t:"CMIString",l:1e3},"cmi.max_time_allowed":{d:"R",t:"CMITimespan"},"cmi.mode":{d:"R",t:"OneOf",c:["browse","normal","review"]},"cmi.progress_measure":{d:"RW",t:"CMIDecimal",min:0,max:1},"cmi.scaled_passing_score":{d:"RW",t:"CMIDecimal",min:-1,max:1},"cmi.score._children":{d:"R",t:"Fixed",v:"scaled,raw,min,max"},"cmi.score.scaled":{d:"RW",t:"CMIDecimal",min:-1,max:1},"cmi.score.max":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi.score.min":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi.score.raw":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi.session_time":{d:"W",t:"CMITimespan"},"cmi.success_status":{d:"RW",t:"OneOf",c:e.successStatusChoices},"cmi.suspend_data":{d:"RW",t:"CMIString",l:64e3},"cmi.time_limit_action":{d:"R",t:"OneOf",c:["exit,message","exit,no message","continue,message","continue,no message"]},"cmi.total_time":{d:"R",t:"CMITimespan"},"cmi._children":{d:"R",t:"Fixed",v:"_version,completion_status,completion_threshold,credit,entry,exit,interactions,objectives,launch_data,learner_id,learner_name,learner_preference,location,max_time_allowed,mode,progress_meausre,scaled_passing_score,score,session_time,success_status,suspend_data,time_limit_action,total_time"},"cmi.comments_from_learner._children":{d:"R",t:"Fixed",v:"comment,location.timestamp"},"cmi.comments_from_learner._count":{d:"R",t:"CMIInteger"},"cmi.comments_from_lms._children":{d:"R",t:"Fixed",v:"comment,location.timestamp"},"cmi.comments_from_lms._count":{d:"R",t:"CMIInteger"},"adl.nav.request":{d:"RW",t:"OneOf",c:e.navRequestChoices},"adl.nav.request_valid.continue":{d:"R",t:"Fixed",v:"true"},"adl.nav.request_valid.previous":{d:"R",t:"Fixed",v:"true"}},e.validRegexElements={"cmi\\.comments_from_learner.\\d+\\.comment":{d:"RW",t:"CMIString",l:4e3},"cmi\\.comments_from_learner.\\d+\\.location":{d:"RW",t:"CMIString",l:250},"cmi\\.comments_from_learner.\\d+\\.timestamp":{d:"RW",t:"CMITime2004"},"cmi\\.comments_from_lms.\\d+\\.comment":{d:"R",t:"CMIString",l:4e3},"cmi\\.comments_from_lms.\\d+\\.location":{d:"R",t:"CMIString",l:250},"cmi\\.comments_from_lms.\\d+\\.timestamp":{d:"R",t:"CMITime2004"},"cmi\\.interactions.\\d+\\.id":{d:"W",t:"CMIIdentifier"},"cmi\\.interactions.\\d+\\.type":{d:"W",t:"OneOf",c:["true-false","choice","fill-in","long-fill-in","matching","performance","sequencing","likert","numeric","other"]},"cmi\\.interactions.\\d+\\.timestamp":{d:"W",t:"CMITime2004"},"cmi\\.interactions.\\d+\\.weighting":{d:"W",t:"CMIDecimal"},"cmi\\.interactions.\\d+\\.learner_response":{d:"W",t:"CMIFeedback"},"cmi\\.interactions.\\d+\\.result":{d:"W",t:"CMIResult"},"cmi\\.interactions.\\d+\\.latency":{d:"W",t:"CMITimespan"},"cmi\\.interactions.\\d+\\.description":{d:"W",t:"CMIString",l:250},"cmi\\.interactions.\\d+\\.objectives\\._count":{d:"R",t:"CMIInteger"},"cmi\\.interactions.\\d+\\.objectives\\._children":{d:"R",t:"Fixed",v:"id"},"cmi\\.interactions.\\d+\\.objectives.\\d+\\.id":{d:"W",t:"CMIIdentifier"},"cmi\\.interactions.\\d+\\.correct_responses\\._count":{d:"R",t:"CMIInteger"},"cmi\\.interactions.\\d+\\.correct_responses\\._children":{d:"R",t:"Fixed",v:"pattern"},"cmi\\.interactions.\\d+\\.correct_responses.\\d+\\.pattern":{d:"W",t:"CMIFeedback"},"cmi\\.objectives.\\d+\\.id":{d:"RW",t:"CMIIdentifier"},"cmi\\.objectives.\\d+\\.score\\._children":{d:"R",t:"Fixed",v:"scaled,raw,min,max"},"cmi\\.objectives.\\d+\\.score\\.scaled":{d:"RW",t:"CMIDecimal",min:-1,max:1},"cmi\\.objectives.\\d+\\.score\\.raw":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi\\.objectives.\\d+\\.score\\.max":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi\\.objectives.\\d+\\.score\\.min":{d:"RW",t:"CMIDecimal",min:0,max:100},"cmi\\.objectives.\\d+\\.success_status":{d:"RW",t:"OneOf",c:e.successStatusChoices},"cmi\\.objectives.\\d+\\.completion_status":{d:"RW",t:"OneOf",c:e.completionStatusChoices},"cmi\\.objectives.\\d+\\.progress_measure":{d:"RW",t:"CMIDecimal",min:0,max:1},"cmi\\.objectives.\\d+\\.description":{d:"RW",t:"CMIString",l:250},"adl.nav.request_valid.choice\\..+":{d:"R",t:"Fixed",v:"true"}},e}return r(e,t),e.prototype.validateIdentifier=function(t,e){if(void 0===e&&(e=!1),e){var i=t.match(/^.+$/);if(i&&i.length)return!0}else{var i=t.match(/^\S{1,4000}$/);if(i&&i.length)return!0}return!1},e.prototype.validateResult=function(t){var e=t.match(/^correct$|^incorrect$|^unanticipated$|^neutral$|^([0-9]{0,3})?(\.[0-9]{1,7})?$/);return!(!e||!e.length)},e.prototype.validateTime=function(t){var e=t.match(/^[0-9]{4}(-[0-9]{2}(-[0-9]{2}(T[0-9]{2}(:[0-9]{2}(:[0-9]{2}(\.[0-9].*)?)?)?)?)?)?$/);return!(!e||!e.length)},e.prototype.validateTimespan=function(t){var e=t.match(/^P(?=\w*\d)(?:\d+Y|Y)?(?:\d+M|M)?(?:\d+D|D)?(?:T(?:\d+H|H)?(?:\d+M|M)?(?:\d+(?:.\d{1,2})?S|S)?)?$/);return!(!e||!e.length)},e}(n.ScormBaseDataModel);e.Scorm2004DataModel=o},function(t,e,i){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();e.__esModule=!0;var n=i(17),o=i(1),s=i(19),a=i(20),c=i(21),u=i(23),l=i(5),p=i(0);e.UrlVarService=p.UrlVarService;var h=i(2),d=i(6),m=i(24),f=function(t){function e(){var e=t.call(this)||this;return e.events=null,e.config=null,e.currentScoIndex=0,e.currentSco=null,e.scosData=null,e.toc=null,e.events=new c.SSLAApiEvents,e.events.statusChange.add(e.updateManifestSelectability,e),e.scormLog=new u.ScormLog(e.events),e}return r(e,t),e.prototype.loadSco=function(t,e){this.endPreviousSco(),this.updateManifestSelectability(),this.initializeApi(t),this.currentScoIndex=e,this.currentSco=t,this.toc.currentScoId=this.currentSco.identifier,this.scosData.currentScoId=this.currentSco.identifier,this.scosData.scos[this.currentSco.identifier].startViewing();var i=this.manifest.scoLaunchUrl(t);h.openSco(o.join([this.config.courseDirectory(),i]),this.config,this.manifest),document.getElementById("prev").disabled=0===this.currentScoIndex,document.getElementById("next").disabled=this.manifest.navigableScoInOrderTraversal.length<=this.currentScoIndex+1,this.events.statusChange.dispatch("")},e.prototype.loadScoByIndex=function(t){if(!(t<0||this.manifest.navigableScoInOrderTraversal.length<=t)){var e=this.manifest.navigableScoInOrderTraversal[t];this.loadSco(e,t)}},e.prototype.loadScoByIdentifier=function(t){var e,i=this.manifest.scosByIdentifiers[t],r=-1;for(e=0;e<this.manifest.navigableScoInOrderTraversal.length;e++)if(this.manifest.navigableScoInOrderTraversal[e].identifier==i.identifier){r=e;break}-1===r&&alert("SCO not found."),this.loadSco(i,r)},e.prototype.clearManifestAiccScriptParsers=function(){for(var t=this.manifest.navigableScoInOrderTraversal,e=0;e<t.length;e++){t[e].aiccScriptParser=null}},e.prototype.performLayoutUpdate=function(){null!=this.config.layoutUpdater()?this.config.layoutUpdater()(this):this.standardLayoutUpdater()},e.prototype.setupNavigationType=function(){var t=this.config.navigationType(),e=this.manifest.navigableScoInOrderTraversal;if(""==t);else if(this.clearManifestAiccScriptParsers(),"lockstep"==t)for(var i=1;i<e.length;i++){var r=e[i],n=new l.AiccScript;n.parse(e[i-1].identifier),r.aiccScriptParser=n}else if("examaftercontent"==t){for(var r=e[e.length-1],o=[],i=0;i<e.length-1;i++)o.push(e[i].identifier);var n=new l.AiccScript;n.parse(o.join("&")),r.aiccScriptParser=n}else if("onlyonce"==t)for(var i=0;i<e.length;i++){var r=e[i],n=new l.AiccScript;n.parse(r.identifier+"=n"),r.aiccScriptParser=n}else alert("Unrecognized nagivationType: "+t)},e.prototype.standardLayoutUpdater=function(){var t=document.body;d.DomRender.removeClass(t,"hide-menu"),d.DomRender.removeClass(t,"hide-toc"),1==this.manifest.navigableScoInOrderTraversal.length&&("HIDE_ALL"!=this.config.singleScoView()&&"HIDE_NAV_BUTTONS"!=this.config.singleScoView()||d.DomRender.addClass(t,"hide-menu"),"HIDE_ALL"!=this.config.singleScoView()&&"HIDE_TREE"!=this.config.singleScoView()||d.DomRender.addClass(t,"hide-toc"))},e.prototype.updateManifestSelectability=function(){for(var t=0;t<this.manifest.navigableScoInOrderTraversal.length;t++){var e=this.manifest.navigableScoInOrderTraversal[t];null!=e.aiccScriptParser&&(e.isSelectable=e.aiccScriptParser.evaluate(null,this.scosData)),this.toc.updateSelectability(e)}},e.prototype.onceLoaded=function(){var t;this.scosData.startViewing();for(t in this.scosData.scos)this.toc.updateActivityStatus(t,this.scosData.scos[t].getStatus());this.updateManifestSelectability(),this.config.returnToLastScoOnLaunch()&&this.scosData.currentScoId&&this.manifest.scosByIdentifiers[this.scosData.currentScoId]?this.loadScoByIdentifier(this.scosData.currentScoId):this.config.autoLaunchFirstSco()&&this.loadScoByIndex(0),window.DATA=this.scosData},e.prototype.start=function(){var t,e=document.getElementById("frame-here");return e.innerHTML='<iframe id="jca_course_player" name="jca_course_player" frameborder="0" width="100%" height="100%" src="blank.htm" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',this.manifest=new n.Manifest,(this.config.scormManifestUseRawXml()?this.manifest.loadManifestFromString(this.config.scormManifestRawXml()):this.manifest.loadManifestFromXmlDom(this.ctd.scormContents))?this.manifest.processManifest()?(this.setupNavigationType(),this.initializeScosData(),this.toc=new a.TableOfContents(this.config,this.events),t=this.toc.render(this.manifest.resourcesByIdentifierRef,this.manifest.itemTree),document.getElementById("toc").innerHTML=t,this.performLayoutUpdate(),this.config.storageAdapter()?this.storage=new(this.config.storageAdapter())(this.config,this.scosData):this.storage=new s.AllInOneStorage(this.config,this.scosData),void this.storage.load({callback:this.onceLoaded.bind(this)})):void alert("The manifest did not parse correctly.  Reason: "+this.manifest.lastError):void alert("The manifest ("+this.config.scormManifestFilename()+") was not found or is unavailable.  Please check your settings and try again.  Reason: "+this.manifest.lastError)},e}(m.SSLAPlugin);e.ScormPlugin=f},function(t,e,i){"use strict";e.__esModule=!0;var r=i(5),n=function(){function t(){}return t}();e.Resource=n;var o=function(){function t(){this.isSelectable=!0,this.isVisible=!0,this.parameters="",this.aiccScriptParser=null}return t}();e.ScoNavItem=o;var s=function(){function t(){}return t.prototype.checkManifestProperty=function(t,e){var i;if(t.hasOwnProperty(e)&&1===t[e].length)return!0;for(i in t)if(t.hasOwnProperty(i)&&i.toLowerCase()===e.toLowerCase())return 1===t[i].length;return!1},t.prototype.getManifestProperty=function(t,e){var i;if(t.hasOwnProperty(e)&&1===t[e].length)return"[object Object]"==Object.prototype.toString.call(t[e][0])?t[e][0]["#text"][0].replace(/^\s+|\s+$/gm,""):t[e][0].replace(/^\s+|\s+$/gm,"");for(i in t)if(t.hasOwnProperty(i)&&i.toLowerCase()===e.toLowerCase())return t[i][0].replace(/^\s+|\s+$/gm,"")},t.prototype.buildResources=function(t){var e,i,r;if(this.resources=[],this.resourcesByIdentifierRef={},t.length>0&&t[0].hasOwnProperty("resource"))for(e=0;e<t[0].resource.length;e++)i=t[0].resource[e],r={},this.resources.push(r),this.checkManifestProperty(i,"identifier")&&(r.identifier=this.getManifestProperty(i,"identifier"),this.resourcesByIdentifierRef[r.identifier]=r),this.checkManifestProperty(i,"href")&&(r.href=this.getManifestProperty(i,"href"))},t.prototype.isSco=function(t){return!!t.identifierRef},t.prototype._buildScoTree=function(t){var e,i=new o;if(this.checkManifestProperty(t,"identifier")&&(i.identifier=this.getManifestProperty(t,"identifier"),this.scosByIdentifiers[i.identifier]=i),this.checkManifestProperty(t,"identifierref")&&(i.identifierRef=this.getManifestProperty(t,"identifierref"),this.scosByIdentifierRefs[i.identifierRef]=i),this.checkManifestProperty(t,"title")&&(i.title=this.getManifestProperty(t,"title")),this.checkManifestProperty(t,"isvisible")&&(i.isVisible="false"!==this.getManifestProperty(t,"isvisible")),this.checkManifestProperty(t,"parameters")&&(i.parameters=this.getManifestProperty(t,"parameters")),this.checkManifestProperty(t,"adlcp:datafromlms")&&(i.dataFromLms=this.getManifestProperty(t,"adlcp:datafromlms")),this.checkManifestProperty(t,"adlcp:masteryscore")&&(i.masteryScore=this.getManifestProperty(t,"adlcp:masteryscore")),this.checkManifestProperty(t,"adlcp:timelimitaction")&&(i.timeLimitAction=this.getManifestProperty(t,"adlcp:timelimitaction")),this.checkManifestProperty(t,"adlcp:maxtimeallowed")&&(i.maxTimeAllowed=this.getManifestProperty(t,"adlcp:maxtimeallowed")),this.checkManifestProperty(t,"adlcp:prerequisites")&&(i.prerequisites=this.getManifestProperty(t,"adlcp:prerequisites"),t.hasOwnProperty("adlcp:prerequisites")&&1===t["adlcp:prerequisites"].length&&"[object Object]"==Object.prototype.toString.call(t["adlcp:prerequisites"][0])&&t["adlcp:prerequisites"][0].hasOwnProperty("type")&&"aicc_script"==t["adlcp:prerequisites"][0].type)){var n=new r.AiccScript;n.parse(i.prerequisites)&&(i.aiccScriptParser=n)}if(this.isSco(i)&&(this.scoInOrderTraversal.push(i),i.isVisible&&this.navigableScoInOrderTraversal.push(i),this.firstScoId||(this.firstScoId=i.identifier)),i.children=[],t.hasOwnProperty("item")&&t.item.length>0)for(e=0;e<t.item.length;e++)i.children.push(this._buildScoTree(t.item[e]));return i},t.prototype.buildScoTree=function(t){this.scosByIdentifiers={},this.scosByIdentifierRefs={},this.firstScoId=null,this.scoInOrderTraversal=[],this.navigableScoInOrderTraversal=[],this.itemTree=this._buildScoTree(t)},t.prototype.loadManifestFromString=function(t){var e=new ParseXMLToObject.ParseXML;return e.setOutputArrayAll(),this.rawManifest=e.parseString(t),!!this.rawManifest||(this.lastError="Unable to load manifest.",!1)},t.prototype.loadManifestFromXmlDom=function(t){var e=new ParseXMLToObject.ParseXML;return e.setOutputArrayAll(),this.rawManifest=e.parseDocument(t.documentElement),!!this.rawManifest||(this.lastError="Unable to load manifest.",!1)},t.prototype.processManifest=function(){var t=0;if(this.processSchemaVersion(this.rawManifest),"1.2"!==this.schemaVersionMain&&"2004"!==this.schemaVersionMain)return this.lastError="Unsupported schemaversion: "+this.schemaVersionMain,!1;if(!this.rawManifest.hasOwnProperty("manifest")||0==this.rawManifest.manifest.length)return this.lastError="Invalid imsmanifest.xml, must be started with <manifest> tag",!1;if(this.rawManifest.manifest[0].hasOwnProperty("organizations")&&this.rawManifest.manifest[0].organizations.length>0&&this.rawManifest.manifest[0].organizations[0].hasOwnProperty("organization")){if((t=this.rawManifest.manifest[0].organizations[0].organization.length)>1)return this.lastError="imsmanifest.xml parser does not currently support more than 1 <organization>.",!1;if(1!=t)return this.lastError="imsmanifest.xml parser only found 0 <organization>s.",!1;this.buildScoTree(this.rawManifest.manifest[0].organizations[0].organization[0])}return this.rawManifest.manifest[0].hasOwnProperty("resources")&&this.buildResources(this.rawManifest.manifest[0].resources),!0},t.prototype.scoLaunchUrl=function(t){var e=this.resourcesByIdentifierRef[t.identifierRef].href;if(""!==t.parameters){var i=/^[?&]*(.*)$/g,r=i.exec(t.parameters);if(0==r.length)return e;var n=r[1];if(-1!==n.indexOf("#"))return-1!==e.indexOf("#")?e:e+n;-1!==e.indexOf("?")?e+="&":e+="?",e+=n}return e},t.prototype.processSchemaVersion=function(t){var e=this.findSchemaVersion(this.rawManifest);"1.2"==e?this.schemaVersionMain="1.2":"CAM 1.3"===e?(this.schemaVersionMain="2004",this.schemaVersionSub="2"):"2004 3rd Edition"===e?(this.schemaVersionMain="2004",this.schemaVersionSub="3"):"2004 4th Edition"===e?(this.schemaVersionMain="2004",this.schemaVersionSub="4"):this.traverseForProperty(this.rawManifest,"adlcp:scormtype")?this.schemaVersionMain="1.2":this.traverseForProperty(this.rawManifest,"adlcp:scormType")&&(this.schemaVersionMain="2004",this.schemaVersionSub="3")},t.prototype.traverseForProperty=function(t,e){var i,r;for(var n in t)if(t.hasOwnProperty(n)){if(n===e)return t[n][0];if("[object Array]"===Object.prototype.toString.call(t[n])){for(i=0;i<t[n].length;i++)if(r=this.traverseForProperty(t[n][i],e))return r}else if("object"==typeof t[n]&&(r=this.traverseForProperty(t[n],e)))return r}return null},t.prototype.findSchemaVersion=function(t){var e,i;for(var r in t)if(t.hasOwnProperty(r)){if("schemaversion"===r.toLowerCase()&&"[object Array]"===Object.prototype.toString.call(t[r])&&t[r].length>0)return t[r][0];if("[object Array]"===Object.prototype.toString.call(t[r])){for(e=0;e<t[r].length;e++)if(i=this.findSchemaVersion(t[r][e]))return i}else if("object"==typeof t[r]&&(i=this.findSchemaVersion(t[r])))return i}return null},t}();e.Manifest=s},function(t,e,i){"use strict";function r(t,e){function i(){return t.substring(Ht,Xt)}function r(t,e){return{type:"literal",text:t,ignoreCase:e}}function n(t,e,i){return{type:"class",parts:t,inverted:e,ignoreCase:i}}function s(t){return{type:"other",description:t}}function a(e){var i,r=qt[e];if(r)return r;for(i=e-1;!qt[i];)i--;for(r=qt[i],r={line:r.line,column:r.column};i<e;)10===t.charCodeAt(i)?(r.line++,r.column=1):r.column++,i++;return qt[e]=r,r}function c(t,e){var i=a(t),r=a(e);return{start:{offset:t,line:i.line,column:i.column},end:{offset:e,line:r.line,column:r.column}}}function u(t){Xt<Yt||(Xt>Yt&&(Yt=Xt,Kt=[]),Kt.push(t))}function l(t,e,i){return new o(o.buildMessage(t,e),t,e,i)}function p(){var t,e=15*Xt+0,i=Jt[e];return i?(Xt=i.nextPos,i.result):(t=h(),Jt[e]={nextPos:Xt,result:t},t)}function h(){var t,e,i,r,n,o=15*Xt+1,s=Jt[o];if(s)return Xt=s.nextPos,s.result;for(t=Xt,e=[],i=Xt,r=d(),r!==D?(n=M(),n!==D?(r=[r,n],i=r):(Xt=i,i=D)):(Xt=i,i=D);i!==D;)e.push(i),i=Xt,r=d(),r!==D?(n=M(),n!==D?(r=[r,n],i=r):(Xt=i,i=D)):(Xt=i,i=D);return e!==D?(i=x(),i!==D?(r=d(),r!==D?(Ht=t,e=T(e,r),t=e):(Xt=t,t=D)):(Xt=t,t=D)):(Xt=t,t=D),Jt[o]={nextPos:Xt,result:t},t}function d(){var t,e=15*Xt+2,i=Jt[e];return i?(Xt=i.nextPos,i.result):(t=f(),t===D&&(t=g())===D&&(t=m())===D&&(t=y())===D&&(t=v())===D&&(t=w()),Jt[e]={nextPos:Xt,result:t},t)}function m(){var e,i,r,n,o,s,a=15*Xt+3,c=Jt[a];return c?(Xt=c.nextPos,c.result):(e=Xt,40===t.charCodeAt(Xt)?(i=P,Xt++):(i=D,0===Zt&&u(E)),i!==D?(r=x(),r!==D?(n=h(),n!==D?(o=x(),o!==D?(41===t.charCodeAt(Xt)?(s=j,Xt++):(s=D,0===Zt&&u(V)),s!==D?(Ht=e,i=W(n),e=i):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D),Jt[a]={nextPos:Xt,result:e},e)}function f(){var e,i,r,n,o,s,a=15*Xt+4,c=Jt[a];return c?(Xt=c.nextPos,c.result):(e=Xt,i=w(),i!==D?(r=x(),r!==D?(61===t.charCodeAt(Xt)?(n=F,Xt++):(n=D,0===Zt&&u(k)),n!==D?(o=x(),o!==D?(s=b(),s!==D?(Ht=e,i=L(i,s),e=i):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D),Jt[a]={nextPos:Xt,result:e},e)}function g(){var e,i,r,n,o,s,a=15*Xt+5,c=Jt[a];return c?(Xt=c.nextPos,c.result):(e=Xt,i=w(),i!==D?(r=x(),r!==D?(t.substr(Xt,2)===N?(n=N,Xt+=2):(n=D,0===Zt&&u(U)),n!==D?(o=x(),o!==D?(s=b(),s!==D?(Ht=e,i=G(i,s),e=i):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D),Jt[a]={nextPos:Xt,result:e},e)}function v(){var e,i,r,n,o=15*Xt+6,s=Jt[o];return s?(Xt=s.nextPos,s.result):(e=Xt,126===t.charCodeAt(Xt)?(i=B,Xt++):(i=D,0===Zt&&u(z)),i!==D?(r=x(),r!==D?(n=d(),n!==D?(Ht=e,i=$(n),e=i):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D),Jt[o]={nextPos:Xt,result:e},e)}function y(){var t,e,i,r=15*Xt+7,n=Jt[r];return n?(Xt=n.nextPos,n.result):(t=Xt,e=S(),e===D&&(e=null),e!==D?(i=C(),i!==D?(Ht=t,e=X(e,i),t=e):(Xt=t,t=D)):(Xt=t,t=D),Jt[r]={nextPos:Xt,result:t},t)}function S(){var e,i,r,n,o,s=15*Xt+8,a=Jt[s];return a?(Xt=a.nextPos,a.result):(e=Xt,i=_(),i!==D?(r=x(),r!==D?(42===t.charCodeAt(Xt)?(n=H,Xt++):(n=D,0===Zt&&u(q)),n!==D?(o=x(),o!==D?(Ht=e,i=Y(i),e=i):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D),Jt[s]={nextPos:Xt,result:e},e)}function C(){var e,i,r,n,o,s,a,c,l=15*Xt+9,p=Jt[l];if(p)return Xt=p.nextPos,p.result;if(e=Xt,123===t.charCodeAt(Xt)?(i=K,Xt++):(i=D,0===Zt&&u(Z)),i!==D)if(x()!==D)if(r=f(),r===D&&(r=g())===D&&(r=w()),r!==D)if(x()!==D){for(n=[],o=Xt,44===t.charCodeAt(Xt)?(s=J,Xt++):(s=D,0===Zt&&u(Q)),s!==D?(a=x(),a!==D?(c=f(),c===D&&(c=g())===D&&(c=w()),c!==D?(s=[s,a,c],o=s):(Xt=o,o=D)):(Xt=o,o=D)):(Xt=o,o=D);o!==D;)n.push(o),o=Xt,44===t.charCodeAt(Xt)?(s=J,Xt++):(s=D,0===Zt&&u(Q)),s!==D?(a=x(),a!==D?(c=f(),c===D&&(c=g())===D&&(c=w()),c!==D?(s=[s,a,c],o=s):(Xt=o,o=D)):(Xt=o,o=D)):(Xt=o,o=D);n!==D?(o=x(),o!==D?(125===t.charCodeAt(Xt)?(s=tt,Xt++):(s=D,0===Zt&&u(et)),s!==D?(Ht=e,i=it(r,n),e=i):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D)}else Xt=e,e=D;else Xt=e,e=D;else Xt=e,e=D;else Xt=e,e=D;return Jt[l]={nextPos:Xt,result:e},e}function _(){var e,i,r,n=15*Xt+10,o=Jt[n];if(o)return Xt=o.nextPos,o.result;if(e=Xt,i=[],rt.test(t.charAt(Xt))?(r=t.charAt(Xt),Xt++):(r=D,0===Zt&&u(nt)),r!==D)for(;r!==D;)i.push(r),rt.test(t.charAt(Xt))?(r=t.charAt(Xt),Xt++):(r=D,0===Zt&&u(nt));else i=D;return i!==D&&(Ht=e,i=ot()),e=i,Jt[n]={nextPos:Xt,result:e},e}function w(){var e,i,r,n=15*Xt+11,o=Jt[n];if(o)return Xt=o.nextPos,o.result;if(e=Xt,i=[],st.test(t.charAt(Xt))?(r=t.charAt(Xt),Xt++):(r=D,0===Zt&&u(at)),r!==D)for(;r!==D;)i.push(r),st.test(t.charAt(Xt))?(r=t.charAt(Xt),Xt++):(r=D,0===Zt&&u(at));else i=D;return e=i!==D?t.substring(e,Xt):i,Jt[n]={nextPos:Xt,result:e},e}function M(){var e,i,r,n,o=15*Xt+12,s=Jt[o];return s?(Xt=s.nextPos,s.result):(e=Xt,i=x(),i!==D?(38===t.charCodeAt(Xt)?(r=ct,Xt++):(r=D,0===Zt&&u(ut)),r===D&&(124===t.charCodeAt(Xt)?(r=lt,Xt++):(r=D,0===Zt&&u(pt))),r!==D?(n=x(),n!==D?(Ht=e,i=ht(r),e=i):(Xt=e,e=D)):(Xt=e,e=D)):(Xt=e,e=D),Jt[o]={nextPos:Xt,result:e},e)}function b(){var e,i,r,n=15*Xt+13,o=Jt[n];return o?(Xt=o.nextPos,o.result):(e=Xt,t.substr(Xt,1).toLowerCase()===dt?(i=t.charAt(Xt),Xt++):(i=D,0===Zt&&u(mt)),i!==D?(t.substr(Xt,5).toLowerCase()===ft?(r=t.substr(Xt,5),Xt+=5):(r=D,0===Zt&&u(gt)),r===D&&(r=null),r!==D?(Ht=e,i=vt(),e=i):(Xt=e,e=D)):(Xt=e,e=D),e===D&&(e=Xt,t.substr(Xt,1).toLowerCase()===yt?(i=t.charAt(Xt),Xt++):(i=D,0===Zt&&u(St)),i!==D?(t.substr(Xt,8).toLowerCase()===Ct?(r=t.substr(Xt,8),Xt+=8):(r=D,0===Zt&&u(_t)),r===D&&(r=null),r!==D?(Ht=e,i=wt(),e=i):(Xt=e,e=D)):(Xt=e,e=D),e===D&&(e=Xt,t.substr(Xt,1).toLowerCase()===Mt?(i=t.charAt(Xt),Xt++):(i=D,0===Zt&&u(bt)),i!==D?(t.substr(Xt,5).toLowerCase()===xt?(r=t.substr(Xt,5),Xt+=5):(r=D,0===Zt&&u(It)),r===D&&(r=null),r!==D?(Ht=e,i=At(),e=i):(Xt=e,e=D)):(Xt=e,e=D),e===D&&(e=Xt,t.substr(Xt,1).toLowerCase()===Dt?(i=t.charAt(Xt),Xt++):(i=D,0===Zt&&u(Ot)),i!==D?(t.substr(Xt,9).toLowerCase()===Rt?(r=t.substr(Xt,9),Xt+=9):(r=D,0===Zt&&u(Tt)),r===D&&(r=null),r!==D?(Ht=e,i=Pt(),e=i):(Xt=e,e=D)):(Xt=e,e=D),e===D&&(e=Xt,t.substr(Xt,1).toLowerCase()===Et?(i=t.charAt(Xt),Xt++):(i=D,0===Zt&&u(jt)),i!==D?(t.substr(Xt,6).toLowerCase()===Vt?(r=t.substr(Xt,6),Xt+=6):(r=D,0===Zt&&u(Wt)),r===D&&(r=null),r!==D?(Ht=e,i=Ft(),e=i):(Xt=e,e=D)):(Xt=e,e=D),e===D&&(e=Xt,t.substr(Xt,1).toLowerCase()===kt?(i=t.charAt(Xt),Xt++):(i=D,0===Zt&&u(Lt)),i!==D?(t.substr(Xt,12).toLowerCase()===Nt?(r=t.substr(Xt,12),Xt+=12):(r=D,0===Zt&&u(Ut)),r===D&&(r=null),r!==D?(Ht=e,i=Gt(),e=i):(Xt=e,e=D)):(Xt=e,e=D)))))),Jt[n]={nextPos:Xt,result:e},e)}function x(){var e,i,r,n=15*Xt+14,o=Jt[n];if(o)return Xt=o.nextPos,o.result;for(Zt++,e=Xt,i=[],zt.test(t.charAt(Xt))?(r=t.charAt(Xt),Xt++):(r=D,0===Zt&&u($t));r!==D;)i.push(r),zt.test(t.charAt(Xt))?(r=t.charAt(Xt),Xt++):(r=D,0===Zt&&u($t));return e=i!==D?t.substring(e,Xt):i,Zt--,e===D&&(i=D,0===Zt&&u(Bt)),Jt[n]={nextPos:Xt,result:e},e}function I(t,e){if(!t.length)return e;var i=t.pop();return{left:I(t,i[0]),op:i[1],right:e}}e=void 0!==e?e:{};var A,D={},O={Program:p},R=p,T=function(t,e){return I(t,e)},P="(",E=r("(",!1),j=")",V=r(")",!1),W=function(t){return t},F="=",k=r("=",!1),L=function(t,e){return{left:t,op:"=",right:e}},N="<>",U=r("<>",!1),G=function(t,e){return{left:t,op:"<>",right:e}},B="~",z=r("~",!1),$=function(t){return{op:"~",left:t}},X=function(t,e){return{op:"set",times:t,set:e}},H="*",q=r("*",!1),Y=function(t){return t},K="{",Z=r("{",!1),J=",",Q=r(",",!1),tt="}",et=r("}",!1),it=function(t,e){var i=0,r=[t];for(i=0;i<e.length;i++)r.push(e[i][2]);return r},rt=/^[0-9]/,nt=n([["0","9"]],!1,!1),ot=function(){return parseInt(i(),10)},st=/^[a-zA-Z0-9]/,at=n([["a","z"],["A","Z"],["0","9"]],!1,!1),ct="&",ut=r("&",!1),lt="|",pt=r("|",!1),ht=function(t){return t},dt="p",mt=r("p",!0),ft="assed",gt=r("assed",!0),vt=function(){return"passed"},yt="c",St=r("c",!0),Ct="ompleted",_t=r("ompleted",!0),wt=function(){return"completed"},Mt="f",bt=r("f",!0),xt="ailed",It=r("ailed",!0),At=function(){return"failed"},Dt="i",Ot=r("i",!0),Rt="ncomplete",Tt=r("ncomplete",!0),Pt=function(){return"incomplete"},Et="b",jt=r("b",!0),Vt="rowsed",Wt=r("rowsed",!0),Ft=function(){return"browsed"},kt="n",Lt=r("n",!0),Nt="ot attempted",Ut=r("ot attempted",!0),Gt=function(){return"not attempted"},Bt=s("whitespace"),zt=/^[ \t\n\r]/,$t=n([" ","\t","\n","\r"],!1,!1),Xt=0,Ht=0,qt=[{line:1,column:1}],Yt=0,Kt=[],Zt=0,Jt={};if("startRule"in e){if(!(e.startRule in O))throw new Error("Can't start parsing from rule \""+e.startRule+'".');R=O[e.startRule]}if((A=R())!==D&&Xt===t.length)return A;throw A!==D&&Xt<t.length&&u(function(){return{type:"end"}}()),l(Kt,Yt<t.length?t.charAt(Yt):null,Yt<t.length?c(Yt,Yt+1):c(Yt,Yt))}var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();e.__esModule=!0;var o=function(t){function e(i,r,n,o){var s=t.call(this)||this;return s.message=i,s.expected=r,s.found=n,s.location=o,s.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s,e),s}return n(e,t),e.buildMessage=function(t,e){function i(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+i(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+i(t)})}function n(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+i(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+i(t)})}function o(t){return s[t.type](t)}var s={literal:function(t){return'"'+r(t.text)+'"'},class:function(t){var e=t.parts.map(function(t){return Array.isArray(t)?n(t[0])+"-"+n(t[1]):n(t)});return"["+(t.inverted?"^":"")+e+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,i,r=t.map(o);if(r.sort(),r.length>0){for(e=1,i=1;e<r.length;e++)r[e-1]!==r[e]&&(r[i]=r[e],i++);r.length=i}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+r(t)+'"':"end of input"}(e)+" found."},e}(Error);e.SyntaxError=o,e.parse=r},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){this.cachedData=null,this.config=t,this.allScos=e}return t.prototype.load=function(t){var e=this;this.cachedData?(e.allScos.importData(e.cachedData),t.callback(!0)):reqwest({url:this.config.getDataUrl(),method:this.config.getDataAjaxMethod(),headers:this.config.getDataHeaders(),type:"json",async:!0,crossOrigin:this.config.storageAllowCORS(),withCredentials:this.config.storageUseWithCredentials(),data:{activityId:this.config.courseId(),studentId:this.config.studentId(),timestamp:(new Date).getTime()},success:function(i){(void 0===i||!i||"responseText"in i||"responseXML"in i)&&(i={}),e.cachedData=i,e.allScos.importData(e.cachedData),t.callback(!0)},error:function(e,i,r){console.log("error in get ajax"+e+","+i+","+r),t.callback(!1)}})},t.prototype.save=function(t,e){var i=!0;e||(e={}),e.forceSync&&(i=!1),e.eventType||(e.eventType="save"),e.scoName||(e.scoName=""),reqwest({url:this.config.setDataUrl(),method:this.config.setDataAjaxMethod(),headers:this.config.setDataHeaders(),async:i,crossOrigin:this.config.storageAllowCORS(),withCredentials:this.config.storageUseWithCredentials(),data:{action:e.eventType,currentSco:e.scoName,data:JSON.stringify(this.allScos.exportData(this.config)),activityId:this.config.courseId(),studentId:this.config.studentId(),timestamp:(new Date).getTime()},success:function(t){},error:function(t){console.log("There was an error saving your data: "+t)}})},t}();e.AllInOneStorage=r},function(t,e,i){"use strict";e.__esModule=!0;var r=i(6),n=function(){function t(t,e){this.config=t,this.events=e,this.events.statusChange.add(this.statusChanged,this)}return t.prototype.render=function(t,e){return this._render(t,e)},t.prototype.updateCurrentActivity=function(t){var e,i="toc-"+t,n=Array.prototype.slice.call(document.getElementById("toc").getElementsByClassName("current"));for(e=0;e<n.length;e++)r.DomRender.removeClass(n[e],"current");var o=document.getElementById(i);r.DomRender.addClass(o,"current")},t.prototype.updateActivityStatus=function(t,e){var i="toc-"+t,n="";if(""!==e){switch(e){case"completed":case"browsed":n="completed";break;case"incomplete":n="incomplete";break;case"unknown":n="unknown";break;case"passed":n="passed";break;case"failed":n="failed";break;case"not attempted":case void 0:n="not_attempted"}if(n&&document.getElementById(i)){var o=document.getElementById(i);r.DomRender.removeClass(o,"completed"),r.DomRender.removeClass(o,"browsed"),r.DomRender.removeClass(o,"incomplete"),r.DomRender.removeClass(o,"unknown"),r.DomRender.removeClass(o,"passed"),r.DomRender.removeClass(o,"failed"),r.DomRender.removeClass(o,"not_attempted"),r.DomRender.addClass(o,n)}}},t.prototype.updateSelectability=function(t){var e=document.getElementById("toc-"+t.identifier);t.isSelectable?r.DomRender.removeClass(e,"disable"):r.DomRender.addClass(e,"disable")},t.prototype.statusChanged=function(t){this.updateActivityStatus(this.currentScoId,t),this.updateCurrentActivity(this.currentScoId)},t.prototype._render=function(t,e){var i,r="<ul>",n="",o="",s="",a=!1;for(e.hasOwnProperty("identifierRef")&&t.hasOwnProperty(e.identifierRef)&&(n=t[e.identifierRef].href,a=!0),e.hasOwnProperty("identifier")&&(o=e.identifier),r+='<li id="toc-'+o+'">',n&&a?(s=" onclick=\"ssla.navigateByIdentifier('"+e.identifier+"'); return false;\"",r+='<a href="#" '+s+">"+e.title+"</a>"):r+='<div style="font-weight: bold">'+e.title+"</div>",i=0;i<e.children.length;i++)r+=this._render(t,e.children[i]);return r+="</li>",r+="</ul>"},t}();e.TableOfContents=n},function(t,e,i){"use strict";e.__esModule=!0;var r=i(22),n=function(){function t(){this.preInitialize=new r.Signal,this.postInitialize=new r.Signal,this.preFinish=new r.Signal,this.postFinish=new r.Signal,this.preCommit=new r.Signal,this.postCommit=new r.Signal,this.preGetValue=new r.Signal,this.postGetValue=new r.Signal,this.preSetValue=new r.Signal,this.postSetValue=new r.Signal,this.preGetLastError=new r.Signal,this.postGetLastError=new r.Signal,this.preGetErrorString=new r.Signal,this.postGetErrorString=new r.Signal,this.preGetDiagnostic=new r.Signal,this.postGetDiagnostic=new r.Signal,this.statusChange=new r.Signal}return t}();e.SSLAApiEvents=n},function(t,e){t.exports=signals},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e,i,r,n){this.sco=t,this.fn=e,this.args=i,this.ret=r,this.error=n,this.startTime=(new Date).getTime()}return t.prototype.end=function(){this.endTime=(new Date).getTime()},t}(),n=function(){function t(t){this.currentStatement=null,this.events=t,this.statements=[],this.registerEvents()}return t.prototype.add=function(t,e,i,r){this.start(t,e),this.finish(i,r)},t.prototype.pre=function(t,e){this.start(t,e)},t.prototype.post=function(t,e,i,r){this.finish(i,r)},t.prototype.registerEvents=function(){this.events.preInitialize.add(this.pre,this),this.events.postInitialize.add(this.post,this),this.events.preFinish.add(this.pre,this),this.events.postFinish.add(this.post,this),this.events.preCommit.add(this.pre,this),this.events.postCommit.add(this.post,this),this.events.preGetValue.add(this.pre,this),this.events.postGetValue.add(this.post,this),this.events.preSetValue.add(this.pre,this),this.events.postSetValue.add(this.post,this),this.events.preGetLastError.add(this.pre,this),this.events.postGetLastError.add(this.post,this),this.events.preGetErrorString.add(this.pre,this),this.events.postGetErrorString.add(this.post,this),this.events.preGetDiagnostic.add(this.pre,this),this.events.postGetDiagnostic.add(this.post,this)},t.prototype.setSco=function(t){this.currentSco=t},t.prototype.start=function(t,e){this.currentStatement=new r(this.currentSco,t,e),this.statements.push(this.currentStatement)},t.prototype.finish=function(t,e){this.currentStatement.end(),this.currentStatement=null},t}();e.ScormLog=n},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){this.config=null,this.ctd=null}return t}();e.SSLAPlugin=r},function(t,e,i){"use strict";e.__esModule=!0;var r=i(26),n=i(0);e.UrlVarService=n.UrlVarService;var o=i(27),s=i(2);e.popupManually=s.popupManually;var a=i(7),c=i(2),u=function(){function t(){this.config=null,this.ctd=null,this.plugins={},this.version=a.VERSION,this.popupManually=c.popupManually,this.config=new r.SSLAConfiguration,this.ctd=new o.CourseTypeDetector}return t.prototype.exit=function(){switch(this.config.exitAction()){case"none":break;case"close":try{window.close()}catch(t){}try{top.window.close()}catch(t){}break;case"referrer":window.location.href=document.referrer;break;case"url":window.location.href=this.config.exitUrl();break;case"custom":this.config.exitFn()?this.config.exitFn()():console.log("No function specified for exit type custom for exitFn.");break;default:console.log("Exit behavior configuration option invalid:",this.config.exitAction())}},t.prototype.initCourseType=function(t){"scorm"===t?this.plugins.scorm?this.plugins.scorm.start():alert("No SCORM plugin installed.  Please contact administrative support."):"xapi"===t?this.plugins.xapi?this.plugins.xapi.start():alert("No XAPI plugin installed.  Please contact administrative support."):"aicc"===t?this.plugins.aicc?this.plugins.aicc.start():alert("No AICC plugin installed.  Please contact administrative support."):alert("Could not find any manifest file for supported course types in the specified folder.  Please check the directory containing your course and try again.\nCourse types supported by this build: "+Object.keys(this.plugins).join(",")+"\n")},t.prototype.registerPlugin=function(t,e){this.plugins[t]=e,e.config=this.config,e.ctd=this.ctd,"scorm"==t&&(this.scorm=e)},t.prototype.start=function(){if(this.config.pluginLoadDetection()&&""!=this.config.pluginMode())return void alert("Configuration issue: pluginLoadDetection = true cannot be used with pluginMode.  System will now exit.");if(!this.config.pluginLoadDetection()&&""==this.config.pluginMode())return void alert("Configuration issue: pluginLoadDetection = false must have a specified pluginMode.  System will now exit.");if(this.config.pluginLoadDetection())this.ctd.identify(this.config,this.plugins,this.initCourseType.bind(this));else{var t=this.plugins[this.config.pluginMode()];if(!t)return void alert("Plugin mode could not be found: "+this.config.pluginMode());t.start()}},t}();e.SSLA=u},function(t,e,i){"use strict";e.__esModule=!0;var r=i(1),n=i(0),o=function(){function t(){}return t.prototype.autoLaunchFirstSco=function(){return!0},t.prototype.courseBaseHtmlPath=function(){return""},t.prototype.courseId=function(){return n.UrlVarService.get("courseId")},t.prototype.courseDirectory=function(){return"/"===n.UrlVarService.get("courseDirectory").charAt(0)?n.UrlVarService.get("courseDirectory"):r.join([this.courseBaseHtmlPath(),n.UrlVarService.get("courseDirectory")])},t.prototype.closePopupSingleScoBehavior=function(){return"exit"},t.prototype.closePopupMultiScoBehavior=function(){return""},t.prototype.closePopupSingleScoCustomFunction=function(){return null},t.prototype.closePopupMultiScoCustomFunction=function(){return null},t.prototype.exitAction=function(){return"referrer"},t.prototype.exitFn=function(){return null},t.prototype.exitUrl=function(){return"blank_unloading.htm"},t.prototype.getCredit=function(){return n.UrlVarService.get("credit")},t.prototype.getDataAjaxMethod=function(){return"POST"},t.prototype.getDataHeaders=function(){return{}},t.prototype.getDataUrl=function(){return"/trackAllInOne/get"},t.prototype.getMode=function(){return n.UrlVarService.get("mode")},t.prototype.layoutUpdater=function(){return null},t.prototype.looseIdentifiers=function(){return!1},t.prototype.navigationType=function(){return""},t.prototype.openContentIn=function(){return"inline"},t.prototype.pluginLoadDetection=function(){return!0},t.prototype.pluginMode=function(){return""},t.prototype.popupMainContentMessageAfterOpen=function(){return"Your course has been opened in a popup.  When you have completed your course, please make another selection from the tree, press exit or close this window."},t.prototype.popupMainContentMessageFailed=function(){return'Your course window did not pop open correctly.<br>  <a onclick="parent.ssla.ssla.popupManually()" href="#">Click here to open the course.</a>'},t.prototype.popupWindowParams=function(){return"status=1,toolbar=1,scrollbars=1,resizable=1,alwaysRaised=1"},t.prototype.returnToLastScoOnLaunch=function(){return!1},t.prototype.saveDataOnCommit=function(){return!0},t.prototype.saveDataOnSetValue=function(){return!1},t.prototype.scoreAllowChangeAfterCompleted=function(){return!0},t.prototype.scoreAllowChangeAfterFailed=function(){return!0},t.prototype.scoreAllowChangeAfterPassed=function(){return!0},t.prototype.scoreAllowReduce=function(){return!0},t.prototype.scoreRollupCustomFunction=function(){return null},t.prototype.scoreRollupIncludeScosWithNoScore=function(){return!1},t.prototype.scormManifestFilename=function(){return"imsmanifest.xml"},t.prototype.scormManifestRawXml=function(){return""},t.prototype.scormManifestUseRawXml=function(){return!1},t.prototype.setDataAjaxMethod=function(){return"POST"},t.prototype.setDataHeaders=function(){return{}},t.prototype.setDataUrl=function(){return"/trackAllInOne/set"},t.prototype.singleScoView=function(){return""},t.prototype.statusAllowChangeAfterCompleted=function(){return!0},t.prototype.statusAllowChangeAfterFailed=function(){return!0},t.prototype.statusAllowChangeAfterPassed=function(){return!0},t.prototype.statusAllowCompletionOnUnsetFinish=function(){return!0},t.prototype.statusRollupCustomFunction=function(){return null},t.prototype.storageAdapter=function(){return null},t.prototype.storageAllowCORS=function(){return!0},t.prototype.storageUseWithCredentials=function(){return!0},t.prototype.studentId=function(){return n.UrlVarService.get("studentId")},t.prototype.studentName=function(){return n.UrlVarService.get("studentName")},t.prototype.xapiEndpoint=function(){return""},t.prototype.xapiManifestFilename=function(){return"tincan.xml"},t.prototype.xapiRegistration=function(){return""},t}(),s=function(){function t(){this.internalConfig=new o}return t.prototype.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},t.prototype.fromExt=function(t){return void 0!==window.sslaConfig&&void 0!==window.sslaConfig[t]?this.isFunction(window.sslaConfig[t])?window.sslaConfig[t]():window.sslaConfig[t]:this.internalConfig[t]()},t.prototype.autoLaunchFirstSco=function(){return this.fromExt("autoLaunchFirstSco")},t.prototype.closePopupSingleScoBehavior=function(){return this.fromExt("closePopupSingleScoBehavior")},t.prototype.closePopupMultiScoBehavior=function(){return this.fromExt("closePopupMultiScoBehavior")},t.prototype.closePopupSingleScoCustomFunction=function(){return this.fromExt("closePopupSingleScoCustomFunction")},t.prototype.closePopupMultiScoCustomFunction=function(){return this.fromExt("closePopupMultiScoCustomFunction")},t.prototype.courseBaseHtmlPath=function(){return this.fromExt("courseBaseHtmlPath")},t.prototype.courseId=function(){return this.fromExt("courseId")},t.prototype.courseDirectory=function(){return this.fromExt("courseDirectory")},t.prototype.exitAction=function(){return this.fromExt("exitAction")},t.prototype.exitFn=function(){return this.fromExt("exitFn")},t.prototype.exitUrl=function(){return this.fromExt("exitUrl")},t.prototype.getCredit=function(){return this.fromExt("getCredit")},t.prototype.getDataAjaxMethod=function(){return this.fromExt("getDataAjaxMethod")},t.prototype.getDataHeaders=function(){return this.fromExt("getDataHeaders")},t.prototype.getDataUrl=function(){return this.fromExt("getDataUrl")},t.prototype.getMode=function(){return this.fromExt("getMode")},t.prototype.layoutUpdater=function(){return this.fromExt("layoutUpdater")},t.prototype.looseIdentifiers=function(){return this.fromExt("looseIdentifiers")},t.prototype.navigationType=function(){return this.fromExt("navigationType")},t.prototype.openContentIn=function(){return this.fromExt("openContentIn")},t.prototype.pluginLoadDetection=function(){return this.fromExt("pluginLoadDetection")},t.prototype.pluginMode=function(){return this.fromExt("pluginMode")},t.prototype.popupMainContentMessageAfterOpen=function(){return this.fromExt("popupMainContentMessageAfterOpen")},t.prototype.popupMainContentMessageFailed=function(){return this.fromExt("popupMainContentMessageFailed")},t.prototype.popupWindowParams=function(){return this.fromExt("popupWindowParams")},t.prototype.returnToLastScoOnLaunch=function(){return this.fromExt("returnToLastScoOnLaunch")},t.prototype.saveDataOnCommit=function(){return this.fromExt("saveDataOnCommit")},t.prototype.saveDataOnSetValue=function(){return this.fromExt("saveDataOnSetValue")},t.prototype.scoreAllowChangeAfterCompleted=function(){return this.fromExt("scoreAllowChangeAfterCompleted")},t.prototype.scoreAllowChangeAfterFailed=function(){return this.fromExt("scoreAllowChangeAfterFailed")},t.prototype.scoreAllowChangeAfterPassed=function(){return this.fromExt("scoreAllowChangeAfterPassed")},t.prototype.scoreAllowReduce=function(){return this.fromExt("scoreAllowReduce")},t.prototype.scoreRollupCustomFunction=function(){return this.fromExt("scoreRollupCustomFunction")},t.prototype.scoreRollupIncludeScosWithNoScore=function(){return this.fromExt("scoreRollupIncludeScosWithNoScore")},t.prototype.scormManifestFilename=function(){return this.fromExt("scormManifestFilename")},t.prototype.scormManifestRawXml=function(){return this.fromExt("scormManifestRawXml")},t.prototype.scormManifestUseRawXml=function(){return this.fromExt("scormManifestUseRawXml")},t.prototype.setDataAjaxMethod=function(){return this.fromExt("setDataAjaxMethod")},t.prototype.setDataHeaders=function(){return this.fromExt("setDataHeaders")},t.prototype.setDataUrl=function(){return this.fromExt("setDataUrl")},t.prototype.singleScoView=function(){return this.fromExt("singleScoView")},t.prototype.statusAllowChangeAfterCompleted=function(){return this.fromExt("statusAllowChangeAfterCompleted")},t.prototype.statusAllowChangeAfterFailed=function(){return this.fromExt("statusAllowChangeAfterFailed")},t.prototype.statusAllowChangeAfterPassed=function(){return this.fromExt("statusAllowChangeAfterPassed")},t.prototype.statusAllowCompletionOnUnsetFinish=function(){return this.fromExt("statusAllowCompletionOnUnsetFinish")},t.prototype.statusRollupCustomFunction=function(){return this.fromExt("statusRollupCustomFunction")},t.prototype.storageAdapter=function(){return this.fromExt("storageAdapter")},t.prototype.storageAllowCORS=function(){return this.fromExt("storageAllowCORS")},t.prototype.storageUseWithCredentials=function(){return this.fromExt("storageUseWithCredentials")},t.prototype.studentId=function(){return this.fromExt("studentId")},t.prototype.studentName=function(){return this.fromExt("studentName")},t.prototype.xapiEndpoint=function(){return this.fromExt("xapiEndpoint")},t.prototype.xapiManifestFilename=function(){return this.fromExt("xapiManifestFilename")},t.prototype.xapiRegistration=function(){return this.fromExt("xapiRegistration")},t}();e.SSLAConfiguration=s},function(t,e,i){"use strict";e.__esModule=!0;var r=i(1),n=function(){function t(){this.callbackAttempted=!1,this.checkedAICC=!1,this.checkedSCORM=!1,this.checkedXAPI=!1,this.isAICC=!1,this.isSCORM=!1,this.isXAPI=!1}return t.prototype.attemptAICC=function(t,e){this.checkedAICC=!0,this.finishIfAllChecked()},t.prototype.attemptXAPI=function(t,e){var i=this;reqwest({url:r.join([t,e]),type:"xml"}).then(function(t){i.isXAPI=!0,i.xapiContents=t}).always(function(t){i.checkedXAPI=!0,i.finishIfAllChecked()})},t.prototype.attemptSCORM=function(t,e){var i=this;reqwest({url:r.join([t,e]),type:"xml",headers:{"Accept": "*/*"}}).then(function(t){i.isSCORM=!0,i.scormContents=t}).always(function(t){i.checkedSCORM=!0,i.finishIfAllChecked()})},t.prototype.finishIfAllChecked=function(){this.callbackAttempted||(this.isSCORM?(this.callbackAttempted=!0,this.callbackOnDecision("scorm")):this.isXAPI?(this.callbackAttempted=!0,this.callbackOnDecision("xapi")):this.isAICC?(this.callbackAttempted=!0,this.callbackOnDecision("aicc")):this.checkedSCORM&&this.checkedXAPI&&this.checkedAICC&&this.callbackOnDecision(""))},t.prototype.identify=function(t,e,i){this.callbackOnDecision=i,e.aicc?this.attemptAICC(t.courseDirectory(),""):this.checkedAICC=!0,e.scorm?this.attemptSCORM(t.courseDirectory(),t.scormManifestFilename()):this.checkedSCORM=!0,e.xapi?this.attemptXAPI(t.courseDirectory(),t.xapiManifestFilename()):this.checkedXAPI=!0},t}();e.CourseTypeDetector=n}]);
