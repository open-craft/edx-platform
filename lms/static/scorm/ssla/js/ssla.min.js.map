{"version":3,"sources":["webpack:///ssla/js/ssla.min.js","webpack:///webpack/bootstrap 9ca2c310b4ad1259417b","webpack:///./src/app_12_2004.ts","webpack:///./src/2004/app.ts","webpack:///./src/12/api12.ts","webpack:///./src/12/dm12.ts","webpack:///./src/dm.ts","webpack:///./src/sco.ts","webpack:///./src/score_rollup.ts","webpack:///./src/status_rollup.ts","webpack:///./src/2004/api2004.ts","webpack:///./src/2004/dm2004.ts","webpack:///./src/url.ts","webpack:///./src/scorm/plugin.ts","webpack:///./src/manifest.ts","webpack:///./src/aiccscript_parser.ts","webpack:///./src/aiccscript.js","webpack:///./src/path.ts","webpack:///./src/storage.ts","webpack:///./src/toc.ts","webpack:///./src/render.ts","webpack:///./src/events.ts","webpack:///external \"signals\"","webpack:///./src/scormlog.ts","webpack:///./src/open.ts","webpack:///./src/plugin.ts","webpack:///./src/app.ts","webpack:///./src/config.ts","webpack:///./src/detector.ts","webpack:///./src/version.ts"],"names":["ssla","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","start","navigate","type","scormPlugin","loadScoByIndex","currentScoIndex","exit","navigateByIdentifier","loadScoByIdentifier","finish","endPreviousSco","app_1","app_2","version_1","Scorm2004Plugin","SSLA","registerPlugin","version","VERSION","__extends","this","d","b","__","constructor","hasOwnProperty","prototype","Object","create","Scorm12Api","Scorm2004Api","url_1","UrlVarService","plugin_1","_super","apply","arguments","API","API_1484_11","initializeApi","scoNav","manifest","schemaVersionMain","i","scosData","scos","identifier","set","config","studentId","studentName","dataFromLms","masteryScore","maxTimeAllowed","timeLimitAction","getCredit","getMode","events","addSaveCallback","storage","save","window","alert","currentSco","stopViewing","LMSFinish","Terminate","initializeScosData","AllScos12Data","scoInOrderTraversal","length","Sco12Data","AllScos2004Data","Sco2004Data","ScormPlugin","dm12_1","Sco","ScoVar","API_FALSE","API_TRUE","interactionCount","objectiveCount","interactionObjectiveCount","correctResponsesCount","fillDefaults","data","canImportKey","key","getScore","get","getSessionTime","getStatus","getTotalTime","populateMaxes","dme","getMaxIndex","updateInteractionCountDme","updateObjectiveCountDme","updateInteractionObjectiveCountDme","updateCorrectResponsesCountDme","value","dmeParts","split","Math","max","Number","index","ScoData","addTimes","one","two","Scorm12TimeManager","addTime","makeNewScoData","AllScosData","splitSession","totalTime","splitTotal","carryOver","seconds","floor","minutes","hours","padLength","hoursStr","padTime","toString","minutesStr","indexOf","secondsStr","timeString","str","padValue","zeroes","substr","num","scoName","scoData","error","saveCallbacks","sco","dataModel","Scorm12DataModel","end","storeTime","session_time","callbackFn","scope","push","callSave","eventType","becauseFinish","forceSync","initialize","empty","requiredEmpty","rawScore","parseInt","sessionTime","getValue","undefined","String","dm","matchElement","t","v","setValue","actuallySet","validResult","validateDecimal","min","validateFeedback","validateIdentifier","validateIntegerUnsigned","validateIntegerSigned","validateOneOf","validateResult","validateString","l","validateTime","console","log","validateTimespan","rawStatus","scoreAllowChangeAfterCompleted","scoreAllowChangeAfterPassed","scoreAllowChangeAfterFailed","scoreAllowReduce","statusAllowChangeAfterCompleted","statusAllowChangeAfterPassed","statusAllowChangeAfterFailed","statusChange","dispatch","saveDataOnSetValue","commit","saveDataOnCommit","getLastError","getErrorString","errorCode","errors","0","101","201","202","203","301","401","402","403","404","405","getDiagnostic","LMSInitialize","ret","preInitialize","postInitialize","preFinish","postFinish","LMSGetValue","preGetValue","postGetValue","LMSSetValue","preSetValue","postSetValue","LMSCommit","preCommit","postCommit","LMSGetLastError","preGetLastError","postGetLastError","LMSGetErrorString","preGetErrorString","LMSGetDiagnostic","preGetDiagnostic","postGetDiagnostic","dm_1","statusChoices","objStatusChoices","validElements","cmi.comments_from_lms","cmi.comments","cmi.core._children","cmi.core.credit","cmi.core.entry","cmi.core.exit","cmi.core.lesson_location","cmi.core.lesson_mode","cmi.core.lesson_status","cmi.core.score._children","cmi.core.score.max","cmi.core.score.min","cmi.core.score.raw","cmi.core.session_time","cmi.core.student_id","cmi.core.student_name","cmi.core.total_time","cmi.launch_data","cmi.student_data._children","cmi.student_data.mastery_score","cmi.student_data.max_time_allowed","cmi.student_data.time_limit_action","cmi.student_preference._children","cmi.student_preference.audio","cmi.student_preference.language","cmi.student_preference.speed","cmi.student_preference.text","cmi.suspend_data","cmi.interactions._children","cmi.interactions._count","cmi.objectives._children","cmi.objectives._count","validRegexElements","cmi\\.interactions.\\d+\\.id","cmi\\.interactions.\\d+\\.time","cmi\\.interactions.\\d+\\.type","cmi\\.interactions.\\d+\\.weighting","cmi\\.interactions.\\d+\\.student_response","cmi\\.interactions.\\d+\\.result","cmi\\.interactions.\\d+\\.latency","cmi\\.interactions.\\d+\\.objectives\\._count","cmi\\.interactions.\\d+\\.objectives\\._children","cmi\\.interactions.\\d+\\.objectives.\\d+\\.id","cmi\\.interactions.\\d+\\.correct_responses\\._count","cmi\\.interactions.\\d+\\.correct_responses\\._children","cmi\\.interactions.\\d+\\.correct_responses.\\d+\\.pattern","cmi\\.objectives.\\d+\\.id","cmi\\.objectives.\\d+\\.score\\._children","cmi\\.objectives.\\d+\\.score\\.raw","cmi\\.objectives.\\d+\\.score\\.max","cmi\\.objectives.\\d+\\.score\\.min","cmi\\.objectives.\\d+\\.status","res","match","ScormBaseDataModel","element","regexKeys","keys","RegExp","isNaN","oneOf","score_rollup_1","status_rollup_1","_value","dirty","wasSet","isDirty","isSet","totalWallTimeAtStart","currentWallTimeStart","currentWallTimeEnd","prefix","dmeSplit","n","prefixLen","maxIndex","dmes","substring","exportData","flatData","scoFlat","status","score","sessionWallTime","totalWallTime","lastOpenedAt","lastClosedAt","Date","getTime","k","importData","unflattenData","startViewing","currentScoId","rollupAllScoStatuses","rollupAllScoScores","updateSessionViewing","allScos","scoreRollupCustomFunction","rollupScore","tempScore","contributingScos","scoreRollupIncludeScosWithNoScore","statusRollupCustomFunction","rollupStatus","scoStatus","dm2004_1","success","complete","Scorm2004TimeManager","hasTimeBlock","parseTimestamp","calendarValues","timeValues","addValuesToTimeString","decimalVal","round","arrayValue","firstChar","charAt","toUpperCase","timeIndex","date","timeBlock","yearMatch","monthMatch","dayMatch","hourMatch","minuteMatch","secondMatch","replace","Scorm2004DataModel","rawCompletionStatus","rawSuccessStatus","102","103","104","111","112","113","122","123","132","133","142","143","351","391","406","407","408","Initialize","GetValue","SetValue","Commit","GetLastError","GetErrorString","GetDiagnostic","successStatusChoices","completionStatusChoices","cmi._version","cmi.completion_status","cmi.completion_threshold","cmi.credit","cmi.entry","cmi.exit","cmi.learner_id","cmi.learner_name","cmi.learner_preference._children","cmi.learner_preference.audio_level","cmi.learner_preference.language","cmi.learner_preference.delivery_speed","cmi.learner_preference.audio_captioning","cmi.location","cmi.max_time_allowed","cmi.mode","cmi.progress_measure","cmi.scaled_passing_score","cmi.score._children","cmi.score.scaled","cmi.score.max","cmi.score.min","cmi.score.raw","cmi.session_time","cmi.success_status","cmi.time_limit_action","cmi.total_time","cmi._children","cmi.comments_from_learner._children","cmi.comments_from_learner._count","cmi.comments_from_lms._children","cmi.comments_from_lms._count","adl.nav.request","adl.nav.request_valid.continue","adl.nav.request_valid.previous","cmi\\.comments_from_learner.\\d+\\.comment","cmi\\.comments_from_learner.\\d+\\.location","cmi\\.comments_from_learner.\\d+\\.timestamp","cmi\\.comments_from_lms.\\d+\\.comment","cmi\\.comments_from_lms.\\d+\\.location","cmi\\.comments_from_lms.\\d+\\.timestamp","cmi\\.interactions.\\d+\\.timestamp","cmi\\.interactions.\\d+\\.learner_response","cmi\\.interactions.\\d+\\.description","cmi\\.objectives.\\d+\\.score\\.scaled","cmi\\.objectives.\\d+\\.success_status","cmi\\.objectives.\\d+\\.completion_status","cmi\\.objectives.\\d+\\.progress_measure","cmi\\.objectives.\\d+\\.description","adl.nav.request_valid.choice\\..+","parsed","query","location","search","vars","pair","decodeURIComponent","manifest_1","Path","Storage","toc_1","events_1","scormlog_1","aiccscript_parser_1","open_1","render_1","toc","SSLAApiEvents","add","updateManifestSelectability","scormLog","ScormLog","loadSco","scoIndex","launchUrl","scoLaunchUrl","openSco","join","courseDirectory","document","getElementById","disabled","navigableScoInOrderTraversal","scoId","scosByIdentifiers","clearManifestAiccScriptParsers","aiccScriptParser","performLayoutUpdate","layoutUpdater","standardLayoutUpdater","setupNavigationType","navigationType","asp","AiccScript","parse","idents","body","DomRender","removeClass","singleScoView","addClass","isSelectable","evaluate","updateSelectability","onceLoaded","updateActivityStatus","returnToLastScoOnLaunch","autoLaunchFirstSco","DATA","manifestLoaded","manifestParsed","tocHtml","innerHTML","Manifest","scormManifestUseRawXml","loadManifestFromString","scormManifestRawXml","loadManifestFromXmlDom","ctd","scormContents","processManifest","TableOfContents","render","resourcesByIdentifierRef","itemTree","storageAdapter","AllInOneStorage","load","callback","bind","lastError","scormManifestFilename","SSLAPlugin","Resource","ScoNavItem","isVisible","parameters","checkManifestProperty","base","property","toLowerCase","getManifestProperty","buildResources","resources","buildResource","isSco","item","identifierRef","_buildScoTree","itemNode","currentItem","scosByIdentifierRefs","title","prerequisites","firstScoId","children","buildScoTree","manifestStr","px","ParseXMLToObject","ParseXML","setOutputArrayAll","rawManifest","parseString","dom","parseDocument","documentElement","orgLen","processSchemaVersion","s","href","removePrefixes","exec","shorterParams","obj","schema","findSchemaVersion","schemaVersionSub","traverseForProperty","propertyToFind","aiccscript_1","tree","e","lookupContext","context","currentNode","op","left","right","counter","times","peg$subclass","child","parent","ctor","peg$SyntaxError","message","expected","found","name","Error","captureStackTrace","peg$parse","input","text","peg$savedPos","peg$currPos","peg$computePosDetails","pos","ch","details","peg$posDetailsCache","line","column","seenCR","peg$computeLocation","startPos","endPos","startPosDetails","endPosDetails","offset","peg$fail","peg$maxFailPos","peg$maxFailExpected","peg$buildException","cleanupExpected","sort","a","description","splice","buildMessage","stringEscape","hex","charCodeAt","expectedDesc","foundDesc","expectedDescs","Array","slice","peg$parseProgram","s0","peg$parseE1","s1","s2","s3","s4","peg$parseE2","peg$FAILED","peg$parseAndOrOperator","peg$parse_","peg$c0","peg$parseEquals","peg$parseNotEquals","peg$parseParens","peg$parseOutOfSet","peg$parseNeg","peg$parseCourseElement","s5","peg$c1","peg$silentFails","peg$c2","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","peg$parseStatus","peg$c8","peg$c9","peg$c10","peg$c11","peg$c12","peg$c13","peg$c14","peg$parseOutOfSetTimes","peg$parseSet","peg$c15","peg$parseInteger","peg$c16","peg$c17","peg$c18","s6","s7","s8","s9","peg$c19","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$c26","test","peg$c27","peg$c28","peg$c29","peg$c30","peg$c31","peg$c32","peg$c33","peg$c34","peg$c35","peg$c36","peg$c37","peg$c38","peg$c39","peg$c40","peg$c41","peg$c42","peg$c43","peg$c44","peg$c45","peg$c46","peg$c47","peg$c48","peg$c49","peg$c50","peg$c51","peg$c52","peg$c53","peg$c54","peg$c55","peg$c56","peg$c57","peg$c58","peg$c59","peg$c60","peg$c61","peg$c62","peg$c63","peg$c64","peg$c65","peg$c67","peg$c68","peg$c66","leftAssoc","rest","val","last","pop","peg$result","options","peg$startRuleFunctions","Program","peg$startRuleFunction","expr","el","neg","head","tail","operator","startRule","SyntaxError","parts","sep","j","separator","cachedData","me","reqwest","url","getDataUrl","method","getDataAjaxMethod","headers","getDataHeaders","async","crossOrigin","storageAllowCORS","withCredentials","storageUseWithCredentials","activityId","courseId","timestamp","resp","request","setDataUrl","setDataAjaxMethod","setDataHeaders","action","JSON","stringify","msg","statusChanged","resourcesByIref","_render","updateCurrentActivity","curList","getElementsByClassName","newClass","newStatus","klass","doClick","canNavigate","hasClass","ele","cls","className","reg","signals_1","Signal","postGetErrorString","signals","Statement","fn","args","startTime","endTime","currentStatement","statements","registerEvents","pre","cmd","post","err","setSco","openPage","windowName","settings","popUp","open","focus","pollTimer","setInterval","behavior","behaviorCustomFn","closed","clearInterval","openManifest","openConfig","closePopupSingleScoBehavior","closePopupSingleScoCustomFunction","closePopupMultiScoBehavior","closePopupMultiScoCustomFunction","tryPopup","path","popupSettings","makePopup","openUrl","popupWindowParams","popupManually","updateUserText","updateCenterContent","handle","jca_course_player","popupMainContentMessageAfterOpen","win","openContentIn","popupMainContentMessageFailed","config_1","detector_1","open_2","plugins","SSLAConfiguration","CourseTypeDetector","exitAction","close","top","referrer","exitUrl","exitFn","initCourseType","courseType","plugin","scorm","pluginLoadDetection","pluginMode","identify","BasicConfiguration","courseBaseHtmlPath","xapiEndpoint","xapiManifestFilename","xapiRegistration","internalConfig","isFunction","fromExt","sslaConfig","callbackAttempted","checkedAICC","checkedSCORM","checkedXAPI","isAICC","isSCORM","isXAPI","attemptAICC","manifestFilename","finishIfAllChecked","attemptXAPI","then","xapiContents","always","attemptSCORM","callbackOnDecision","availablePlugins"],"mappings":"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","file":"ssla/js/ssla.min.js","sourcesContent":["var ssla =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar app_1 = __webpack_require__(1);\n\tvar app_2 = __webpack_require__(24);\n\tvar version_1 = __webpack_require__(27);\n\tfunction start() {\n\t    exports.ssla.start();\n\t}\n\texports.start = start;\n\tfunction navigate(type) {\n\t    if (type === \"next\") {\n\t        scormPlugin.loadScoByIndex(scormPlugin.currentScoIndex + 1);\n\t    }\n\t    else if (type === \"previous\") {\n\t        scormPlugin.loadScoByIndex(scormPlugin.currentScoIndex - 1);\n\t    }\n\t    else if (type === \"exit\") {\n\t        exports.ssla.exit();\n\t    }\n\t}\n\texports.navigate = navigate;\n\tfunction navigateByIdentifier(id) {\n\t    scormPlugin.loadScoByIdentifier(id);\n\t}\n\texports.navigateByIdentifier = navigateByIdentifier;\n\tfunction finish() {\n\t    scormPlugin.endPreviousSco();\n\t}\n\texports.finish = finish;\n\tvar scormPlugin = new app_1.Scorm2004Plugin();\n\texports.ssla = new app_2.SSLA();\n\texports.ssla.registerPlugin(\"scorm\", scormPlugin);\n\texports.version = version_1.VERSION;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Scorm12Api = __webpack_require__(2);\n\tvar Scorm2004Api = __webpack_require__(8);\n\tvar url_1 = __webpack_require__(10);\n\texports.UrlVarService = url_1.UrlVarService;\n\tvar plugin_1 = __webpack_require__(11);\n\tvar Scorm2004Plugin = (function (_super) {\n\t    __extends(Scorm2004Plugin, _super);\n\t    function Scorm2004Plugin() {\n\t        _super.apply(this, arguments);\n\t        this.API = null;\n\t        this.API_1484_11 = null;\n\t    }\n\t    Scorm2004Plugin.prototype.initializeApi = function (scoNav) {\n\t        if (this.manifest.schemaVersionMain === \"1.2\") {\n\t            var i = this.scosData.scos[scoNav.identifier];\n\t            i.set(\"cmi.core.student_id\", this.config.studentId());\n\t            i.set(\"cmi.core.student_name\", this.config.studentName());\n\t            i.set(\"cmi.launch_data\", scoNav.dataFromLms);\n\t            i.set(\"cmi.student_data.mastery_score\", scoNav.masteryScore);\n\t            i.set(\"cmi.student_data.max_time_allowed\", scoNav.maxTimeAllowed);\n\t            i.set(\"cmi.student_data.time_limit_action\", scoNav.timeLimitAction);\n\t            i.set(\"cmi.core.credit\", this.config.getCredit());\n\t            i.set(\"cmi.core.mode\", this.config.getMode());\n\t            this.API = new Scorm12Api.Scorm12Api(scoNav.identifier, this.scosData.scos[scoNav.identifier], this.events, this.config);\n\t            this.API.addSaveCallback(this.storage.save, this.storage);\n\t            window.API = this.API;\n\t        }\n\t        else if (this.manifest.schemaVersionMain === \"2004\") {\n\t            var i = this.scosData.scos[scoNav.identifier];\n\t            i.set(\"cmi.learner_id\", this.config.studentId());\n\t            i.set(\"cmi.learner_name\", this.config.studentName());\n\t            i.set(\"cmi.launch_data\", scoNav.dataFromLms);\n\t            i.set(\"cmi.max_time_allowed\", scoNav.maxTimeAllowed);\n\t            i.set(\"cmi.time_limit_action\", scoNav.timeLimitAction);\n\t            i.set(\"cmi.credit\", this.config.getCredit());\n\t            i.set(\"cmi.mode\", this.config.getMode());\n\t            this.API_1484_11 = new Scorm2004Api.Scorm2004Api(scoNav.identifier, this.scosData.scos[scoNav.identifier], this.events, this.config);\n\t            this.API_1484_11.addSaveCallback(this.storage.save, this.storage);\n\t            window.API_1484_11 = this.API_1484_11;\n\t        }\n\t        else {\n\t            alert(\"Manifest schema version unrecognized: \" + this.manifest.schemaVersionMain);\n\t        }\n\t    };\n\t    Scorm2004Plugin.prototype.endPreviousSco = function () {\n\t        if (this.currentSco) {\n\t            this.scosData.scos[this.currentSco.identifier].stopViewing();\n\t            if (this.manifest.schemaVersionMain === \"1.2\") {\n\t                this.API.LMSFinish(\"\");\n\t            }\n\t            else if (this.manifest.schemaVersionMain === \"2004\") {\n\t                this.API_1484_11.Terminate(\"\");\n\t            }\n\t        }\n\t    };\n\t    Scorm2004Plugin.prototype.initializeScosData = function () {\n\t        var i;\n\t        if (this.manifest.schemaVersionMain === \"1.2\") {\n\t            this.scosData = new Scorm12Api.AllScos12Data();\n\t            for (i = 0; i < this.manifest.scoInOrderTraversal.length; i++) {\n\t                this.scosData.scos[this.manifest.scoInOrderTraversal[i].identifier] = new Scorm12Api.Sco12Data();\n\t            }\n\t        }\n\t        else if (this.manifest.schemaVersionMain === \"2004\") {\n\t            this.scosData = new Scorm2004Api.AllScos2004Data();\n\t            for (i = 0; i < this.manifest.scoInOrderTraversal.length; i++) {\n\t                this.scosData.scos[this.manifest.scoInOrderTraversal[i].identifier] = new Scorm2004Api.Sco2004Data();\n\t            }\n\t        }\n\t    };\n\t    return Scorm2004Plugin;\n\t}(plugin_1.ScormPlugin));\n\texports.Scorm2004Plugin = Scorm2004Plugin;\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar dm12_1 = __webpack_require__(3);\n\tvar Sco = __webpack_require__(5);\n\tvar ScoVar = Sco.ScoVar;\n\tvar API_FALSE = \"false\";\n\tvar API_TRUE = \"true\";\n\tvar Sco12Data = (function (_super) {\n\t    __extends(Sco12Data, _super);\n\t    function Sco12Data() {\n\t        _super.apply(this, arguments);\n\t        this.interactionCount = 0;\n\t        this.objectiveCount = 0;\n\t        this.interactionObjectiveCount = {};\n\t        this.correctResponsesCount = {};\n\t    }\n\t    Sco12Data.prototype.fillDefaults = function () {\n\t        this.data[\"cmi.core.lesson_status\"] = new ScoVar(\"not attempted\");\n\t        this.data[\"cmi.suspend_data\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.core.lesson_location\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.core.session_time\"] = new ScoVar(\"0000:00:00\");\n\t        this.data[\"cmi.core.total_time\"] = new ScoVar(\"0000:00:00\");\n\t        this.data[\"cmi.core.entry\"] = new ScoVar(\"ab-initio\");\n\t        this.data[\"cmi.core.score.raw\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.core.score.min\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.core.score.max\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.comments\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.comments_from_lms\"] = new ScoVar(\"No comment\");\n\t        this.data[\"cmi.student_preference.audio\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.student_preference.language\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.student_preference.speed\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.student_preference.text\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.core.student_name\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.core.student_id\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.launch_data\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.student_data.mastery_score\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.student_data.max_time_allowed\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.student_data.time_limit_action\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.core.credit\"] = new ScoVar(\"credit\");\n\t        this.data[\"cmi.core.lesson_mode\"] = new ScoVar(\"normal\");\n\t    };\n\t    Sco12Data.prototype.canImportKey = function (key) {\n\t        if (key == \"cmi.core.session_time\") {\n\t            return false;\n\t        }\n\t        return true;\n\t    };\n\t    Sco12Data.prototype.getScore = function () {\n\t        return this.data[\"cmi.core.score.raw\"].get();\n\t    };\n\t    Sco12Data.prototype.getSessionTime = function () {\n\t        return this.data[\"cmi.core.session_time\"].get();\n\t    };\n\t    Sco12Data.prototype.getStatus = function () {\n\t        return this.data[\"cmi.core.lesson_status\"].get();\n\t    };\n\t    Sco12Data.prototype.getTotalTime = function () {\n\t        return this.data[\"cmi.core.total_time\"].get();\n\t    };\n\t    Sco12Data.prototype.populateMaxes = function () {\n\t        var i, dme;\n\t        this.interactionCount = this.getMaxIndex(\"cmi.interactions.\") + 1;\n\t        this.updateInteractionCountDme();\n\t        this.objectiveCount = this.getMaxIndex(\"cmi.objectives.\") + 1;\n\t        this.updateObjectiveCountDme();\n\t        for (i = 0; i < this.interactionCount; i++) {\n\t            dme = \"cmi.interactions.\" + i + \".objectives.\";\n\t            this.interactionObjectiveCount[i] = this.getMaxIndex(dme) + 1;\n\t            this.updateInteractionObjectiveCountDme(i);\n\t        }\n\t        for (i = 0; i < this.interactionCount; i++) {\n\t            dme = \"cmi.interactions.\" + i + \".correct_responses.\";\n\t            this.correctResponsesCount[i] = this.getMaxIndex(dme) + 1;\n\t            this.updateCorrectResponsesCountDme(i);\n\t        }\n\t    };\n\t    Sco12Data.prototype.set = function (dme, value) {\n\t        _super.prototype.set.call(this, dme, value);\n\t        var dmeParts = dme.split(\".\");\n\t        if (dmeParts[1] === \"interactions\") {\n\t            this.interactionCount = Math.max(Number(dmeParts[2]) + 1, this.interactionCount);\n\t            this.updateInteractionCountDme();\n\t            if (dmeParts[3] === \"objectives\") {\n\t                this.interactionObjectiveCount[dmeParts[2]] = Math.max(Number(dmeParts[4]) + 1, this.interactionObjectiveCount[dmeParts[2]]);\n\t                this.updateInteractionObjectiveCountDme(Number(dmeParts[2]));\n\t            }\n\t            else {\n\t                this.updateInteractionObjectiveCountDme(Number(dmeParts[2]));\n\t            }\n\t            if (dmeParts[3] === \"correct_responses\") {\n\t                this.correctResponsesCount[dmeParts[2]] = Math.max(Number(dmeParts[4]) + 1, this.correctResponsesCount[dmeParts[2]]);\n\t                this.updateCorrectResponsesCountDme(Number(dmeParts[2]));\n\t            }\n\t            else {\n\t                this.updateCorrectResponsesCountDme(Number(dmeParts[2]));\n\t            }\n\t        }\n\t        else if (dmeParts[1] === \"objectives\") {\n\t            this.objectiveCount = Math.max(Number(dmeParts[2]) + 1, this.objectiveCount);\n\t            this.updateObjectiveCountDme();\n\t        }\n\t    };\n\t    Sco12Data.prototype.updateInteractionCountDme = function () {\n\t        this.data[\"cmi.interactions._count\"] = new ScoVar(this.interactionCount);\n\t    };\n\t    Sco12Data.prototype.updateObjectiveCountDme = function () {\n\t        this.data[\"cmi.objectives._count\"] = new ScoVar(this.objectiveCount);\n\t    };\n\t    Sco12Data.prototype.updateInteractionObjectiveCountDme = function (index) {\n\t        if (!this.interactionObjectiveCount[index]) {\n\t            this.interactionObjectiveCount[index] = 0;\n\t        }\n\t        this.data[\"cmi.interactions.\" + index + \".objectives._count\"] = new ScoVar(this.interactionObjectiveCount[index]);\n\t    };\n\t    Sco12Data.prototype.updateCorrectResponsesCountDme = function (index) {\n\t        if (!this.correctResponsesCount[index]) {\n\t            this.correctResponsesCount[index] = 0;\n\t        }\n\t        this.data[\"cmi.interactions.\" + index + \".correct_responses._count\"] = new ScoVar(this.correctResponsesCount[index]);\n\t    };\n\t    return Sco12Data;\n\t}(Sco.ScoData));\n\texports.Sco12Data = Sco12Data;\n\tvar AllScos12Data = (function (_super) {\n\t    __extends(AllScos12Data, _super);\n\t    function AllScos12Data() {\n\t        _super.apply(this, arguments);\n\t    }\n\t    AllScos12Data.prototype.addTimes = function (one, two) {\n\t        return Scorm12TimeManager.addTime(one, two);\n\t    };\n\t    AllScos12Data.prototype.makeNewScoData = function () {\n\t        return new Sco12Data();\n\t    };\n\t    return AllScos12Data;\n\t}(Sco.AllScosData));\n\texports.AllScos12Data = AllScos12Data;\n\tvar Scorm12TimeManager = (function () {\n\t    function Scorm12TimeManager() {\n\t    }\n\t    Scorm12TimeManager.addTime = function (one, two) {\n\t        if (!one) {\n\t            return \"\";\n\t        }\n\t        if (!two) {\n\t            two = \"0000:00:00\";\n\t        }\n\t        var splitSession = one.split(\":\");\n\t        var totalTime = two;\n\t        var splitTotal = totalTime.split(\":\");\n\t        var carryOver = 0;\n\t        var seconds = Number(splitTotal[2]) + Number(splitSession[2]);\n\t        if (seconds > 60) {\n\t            carryOver = Math.floor(seconds / 60);\n\t            seconds = seconds - (carryOver * 60);\n\t        }\n\t        var minutes = Number(splitTotal[1]) + Number(splitSession[1]) + carryOver;\n\t        carryOver = 0;\n\t        if (minutes > 60) {\n\t            carryOver = Math.floor(minutes / 60);\n\t            minutes = minutes - (carryOver * 60);\n\t        }\n\t        var hours = Number(splitTotal[0]) + Number(splitSession[0]) + carryOver;\n\t        if (hours > 9999) {\n\t            hours = 9999;\n\t        }\n\t        var padLength = 2;\n\t        var hoursStr = this.padTime(hours.toString(), padLength);\n\t        var minutesStr = this.padTime(minutes.toString(), padLength);\n\t        if (splitTotal[2].indexOf(\".\") > -1 || splitSession[2].indexOf(\".\") > -1) {\n\t            padLength = 5;\n\t        }\n\t        var secondsStr = this.padTime(seconds.toString(), padLength);\n\t        var timeString = hoursStr + \":\" + minutesStr + \":\" + secondsStr;\n\t        return timeString;\n\t    };\n\t    Scorm12TimeManager.padTime = function (str, padValue) {\n\t        var zeroes = \"0000\";\n\t        if (str === \"\") {\n\t            return zeroes.substr(0, padValue);\n\t        }\n\t        if (str.length < padValue) {\n\t            var num = padValue - str.length;\n\t            str = zeroes.substr(0, num) + str;\n\t            return str;\n\t        }\n\t        return str;\n\t    };\n\t    return Scorm12TimeManager;\n\t}());\n\tvar Scorm12Api = (function () {\n\t    function Scorm12Api(scoName, scoData, events, config) {\n\t        this.error = \"0\";\n\t        this.events = null;\n\t        this.saveCallbacks = [];\n\t        this.scoName = scoName;\n\t        this.sco = scoData;\n\t        this.dataModel = new dm12_1.Scorm12DataModel();\n\t        this.events = events;\n\t        this.config = config;\n\t        this.sco.start = false;\n\t        this.sco.end = false;\n\t    }\n\t    Scorm12Api.prototype.storeTime = function (session_time) {\n\t        if (!session_time) {\n\t            return;\n\t        }\n\t        var timeString = Scorm12TimeManager.addTime(session_time, this.sco.get(\"cmi.core.total_time\"));\n\t        this.sco.set(\"cmi.core.total_time\", timeString);\n\t    };\n\t    Scorm12Api.prototype.addSaveCallback = function (callbackFn, scope) {\n\t        this.saveCallbacks.push([callbackFn, scope]);\n\t    };\n\t    Scorm12Api.prototype.callSave = function (eventType, becauseFinish) {\n\t        var i;\n\t        for (i = 0; i < this.saveCallbacks.length; i++) {\n\t            this.saveCallbacks[i][0].call(this.saveCallbacks[i][1], \"\", {\n\t                eventType: eventType,\n\t                scoName: this.scoName,\n\t                sco: this.sco,\n\t                forceSync: becauseFinish\n\t            });\n\t        }\n\t    };\n\t    Scorm12Api.prototype.initialize = function (empty) {\n\t        if (empty !== \"\") {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.start) {\n\t            this.error = \"101\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"101\";\n\t            return API_FALSE;\n\t        }\n\t        this.sco.start = true;\n\t        this.error = \"0\";\n\t        return API_TRUE;\n\t    };\n\t    Scorm12Api.prototype.finish = function (requiredEmpty) {\n\t        if (requiredEmpty !== \"\") {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        if (!this.sco.start) {\n\t            this.error = \"301\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"301\";\n\t            return API_FALSE;\n\t        }\n\t        var masteryScore = this.sco.get(\"cmi.student_data.mastery_score\");\n\t        if (masteryScore !== \"\") {\n\t            var rawScore = this.sco.get(\"cmi.core.score.raw\");\n\t            if (rawScore !== \"\") {\n\t                if (parseInt(rawScore, 10) >= parseInt(masteryScore, 10)) {\n\t                    this.sco.set(\"cmi.core.lesson_status\", \"passed\");\n\t                }\n\t                else {\n\t                    this.sco.set(\"cmi.core.lesson_status\", \"failed\");\n\t                }\n\t            }\n\t        }\n\t        var sessionTime = this.sco.get(\"cmi.core.session_time\");\n\t        this.storeTime(sessionTime);\n\t        if (this.sco.get(\"cmi.core.exit\") === \"suspend\") {\n\t            this.sco.set(\"cmi.core.entry\", \"resume\");\n\t        }\n\t        else {\n\t            this.sco.set(\"cmi.core.entry\", \"\");\n\t        }\n\t        this.sco.end = true;\n\t        this.error = \"0\";\n\t        this.callSave(\"finish\", true);\n\t        return API_TRUE;\n\t    };\n\t    Scorm12Api.prototype.getValue = function (dme) {\n\t        if (!this.sco.start) {\n\t            this.error = \"301\";\n\t            return \"\";\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"301\";\n\t            return \"\";\n\t        }\n\t        if (dme === undefined || dme === null) {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        dme = String(dme);\n\t        var dm = this.dataModel.matchElement(dme);\n\t        if (!dm) {\n\t            this.error = \"201\";\n\t            return \"\";\n\t        }\n\t        if (dm.d === \"W\") {\n\t            this.error = \"404\";\n\t            return \"\";\n\t        }\n\t        this.error = \"0\";\n\t        if (dm.t === \"Fixed\") {\n\t            return dm.v;\n\t        }\n\t        return this.sco.get(dme);\n\t    };\n\t    Scorm12Api.prototype.setValue = function (dme, value) {\n\t        var actuallySet = true;\n\t        if (!this.sco.start) {\n\t            this.error = \"301\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"301\";\n\t            return API_FALSE;\n\t        }\n\t        if (dme === undefined || dme === null) {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        dme = String(dme);\n\t        if (value === undefined || value === null) {\n\t            value = \"\";\n\t        }\n\t        value = String(value);\n\t        var dm = this.dataModel.matchElement(dme);\n\t        if (!dm) {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        if (dm.d === \"R\") {\n\t            this.error = \"403\";\n\t            return API_FALSE;\n\t        }\n\t        if (dme === \"cmi.comments\") {\n\t            value = this.sco.get(\"cmi.comments\") + value;\n\t        }\n\t        var validResult;\n\t        var v = \"\" + value;\n\t        if (dm.t === \"CMIDecimal\") {\n\t            validResult = this.dataModel.validateDecimal(v, dm.min, dm.max);\n\t        }\n\t        else if (dm.t === \"CMIFeedback\") {\n\t            validResult = this.dataModel.validateFeedback(v);\n\t        }\n\t        else if (dm.t === \"CMIIdentifier\") {\n\t            validResult = this.dataModel.validateIdentifier(v);\n\t        }\n\t        else if (dm.t === \"CMIInteger\") {\n\t            validResult = this.dataModel.validateIntegerUnsigned(v, dm.min, dm.max);\n\t        }\n\t        else if (dm.t === \"CMISInteger\") {\n\t            validResult = this.dataModel.validateIntegerSigned(v, dm.min, dm.max);\n\t        }\n\t        else if (dm.t === \"OneOf\") {\n\t            validResult = this.dataModel.validateOneOf(dm.c, v);\n\t        }\n\t        else if (dm.t === \"CMIResult\") {\n\t            validResult = this.dataModel.validateResult(v);\n\t        }\n\t        else if (dm.t === \"CMIString\") {\n\t            validResult = this.dataModel.validateString(v, dm.l);\n\t        }\n\t        else if (dm.t === \"CMITime\") {\n\t            validResult = this.dataModel.validateTime(v);\n\t        }\n\t        else if (dm.t === \"CMITimespan\") {\n\t            validResult = this.dataModel.validateTimespan(v);\n\t        }\n\t        else {\n\t            console.log(\"Unrecognized data validation type.\", dm.t);\n\t            this.error = \"101\";\n\t            return API_FALSE;\n\t        }\n\t        if (!validResult) {\n\t            this.error = \"405\";\n\t            return API_FALSE;\n\t        }\n\t        var dmeParts = dme.split(\".\");\n\t        if (dmeParts[1] === \"interactions\") {\n\t            if (Number(dmeParts[2]) > this.sco.interactionCount) {\n\t                this.error = \"201\";\n\t                return API_FALSE;\n\t            }\n\t            if (dmeParts[3] === \"objectives\") {\n\t                if (Number(dmeParts[4]) > this.sco.interactionObjectiveCount[dmeParts[2]]) {\n\t                    this.error = \"201\";\n\t                    return API_FALSE;\n\t                }\n\t            }\n\t            if (dmeParts[3] === \"correct_responses\") {\n\t                if (Number(dmeParts[4]) > this.sco.correctResponsesCount[dmeParts[2]]) {\n\t                    this.error = \"201\";\n\t                    return API_FALSE;\n\t                }\n\t            }\n\t        }\n\t        if (dmeParts[1] === \"objectives\") {\n\t            if (Number(dmeParts[2]) > this.sco.objectiveCount) {\n\t                this.error = \"201\";\n\t                return API_FALSE;\n\t            }\n\t        }\n\t        if (dme == \"cmi.core.score.raw\") {\n\t            var rawScore = this.sco.get(\"cmi.core.score.raw\");\n\t            var rawStatus = this.sco.get(\"cmi.core.lesson_status\");\n\t            if (rawScore !== \"\" &&\n\t                ((rawStatus == \"completed\" && !this.config.scoreAllowChangeAfterCompleted()) ||\n\t                    (rawStatus == \"passed\" && !this.config.scoreAllowChangeAfterPassed()) ||\n\t                    (rawStatus == \"failed\" && !this.config.scoreAllowChangeAfterFailed()))) {\n\t                actuallySet = false;\n\t            }\n\t            else if (!this.config.scoreAllowReduce()) {\n\t                if (rawScore !== \"\" && Number(rawScore) > Number(value)) {\n\t                    actuallySet = false;\n\t                }\n\t            }\n\t        }\n\t        if (dme == \"cmi.core.lesson_status\") {\n\t            var rawStatus = this.sco.get(\"cmi.core.lesson_status\");\n\t            if ((rawStatus == \"completed\" && !this.config.statusAllowChangeAfterCompleted()) ||\n\t                (rawStatus == \"passed\" && !this.config.statusAllowChangeAfterPassed()) ||\n\t                (rawStatus == \"failed\" && !this.config.statusAllowChangeAfterFailed())) {\n\t                actuallySet = false;\n\t            }\n\t        }\n\t        this.error = \"0\";\n\t        if (actuallySet) {\n\t            this.sco.set(dme, v);\n\t            if (dme === \"cmi.core.lesson_status\") {\n\t                this.events.statusChange.dispatch(v);\n\t            }\n\t            if (this.config.saveDataOnSetValue()) {\n\t                this.callSave(\"setValue\", false);\n\t            }\n\t        }\n\t        return API_TRUE;\n\t    };\n\t    Scorm12Api.prototype.commit = function (requiredEmpty) {\n\t        if (requiredEmpty !== \"\") {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        if (!this.sco.start) {\n\t            this.error = \"301\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"301\";\n\t            return API_FALSE;\n\t        }\n\t        this.error = \"0\";\n\t        if (this.config.saveDataOnCommit()) {\n\t            this.callSave(\"commit\", false);\n\t        }\n\t        return API_TRUE;\n\t    };\n\t    Scorm12Api.prototype.getLastError = function () {\n\t        return this.error;\n\t    };\n\t    Scorm12Api.prototype.getErrorString = function (errorCode) {\n\t        var errors = {\n\t            \"0\": \"No error\",\n\t            \"101\": \"General Exception\",\n\t            \"201\": \"Invalid argument error\",\n\t            \"202\": \"Element cannot have children\",\n\t            \"203\": \"Element not an array.\",\n\t            \"301\": \"Not initialized\",\n\t            \"401\": \"Not implemented error\",\n\t            \"402\": \"Invalid set value, element is a keyword\",\n\t            \"403\": \"Element is read only\",\n\t            \"404\": \"Element is write only\",\n\t            \"405\": \"Incorrect Data Type\"\n\t        };\n\t        if (errors[errorCode]) {\n\t            return errors[errorCode];\n\t        }\n\t        return \"\";\n\t    };\n\t    Scorm12Api.prototype.getDiagnostic = function (errorCode) {\n\t        return this.error;\n\t    };\n\t    Scorm12Api.prototype.LMSInitialize = function (empty) {\n\t        var ret;\n\t        this.events.preInitialize.dispatch(\"LMSInitialize\", [empty]);\n\t        ret = this.initialize(empty);\n\t        this.events.postInitialize.dispatch(\"LMSInitialize\", [empty], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm12Api.prototype.LMSFinish = function (empty) {\n\t        var ret;\n\t        this.events.preFinish.dispatch(\"LMSFinish\", [empty]);\n\t        ret = this.finish(empty);\n\t        this.events.postFinish.dispatch(\"LMSFinish\", [empty], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm12Api.prototype.LMSGetValue = function (dme) {\n\t        var ret;\n\t        this.events.preGetValue.dispatch(\"LMSGetValue\", [dme]);\n\t        ret = this.getValue(dme);\n\t        this.events.postGetValue.dispatch(\"LMSGetValue\", [dme], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm12Api.prototype.LMSSetValue = function (dme, value) {\n\t        var ret;\n\t        this.events.preSetValue.dispatch(\"LMSSetValue\", [dme, value]);\n\t        ret = this.setValue(dme, value);\n\t        this.events.postSetValue.dispatch(\"LMSSetValue\", [dme, value], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm12Api.prototype.LMSCommit = function (requiredEmpty) {\n\t        var ret;\n\t        this.events.preCommit.dispatch(\"LMSCommit\", [requiredEmpty]);\n\t        ret = this.commit(requiredEmpty);\n\t        this.events.postCommit.dispatch(\"LMSCommit\", [requiredEmpty], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm12Api.prototype.LMSGetLastError = function () {\n\t        var ret;\n\t        this.events.preGetLastError.dispatch(\"LMSGetLastError\", []);\n\t        ret = this.getLastError();\n\t        this.events.postGetLastError.dispatch(\"LMSGetLastError\", [], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm12Api.prototype.LMSGetErrorString = function (errorCode) {\n\t        var ret;\n\t        this.events.preGetErrorString.dispatch(\"LMSGetErrorString\", [errorCode]);\n\t        ret = this.getErrorString(errorCode);\n\t        this.events.postGetLastError.dispatch(\"LMSGetErrorString\", [errorCode], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm12Api.prototype.LMSGetDiagnostic = function (errorCode) {\n\t        var ret;\n\t        this.events.preGetDiagnostic.dispatch(\"LMSGetDiagnostic\", [errorCode]);\n\t        ret = this.getDiagnostic(errorCode);\n\t        this.events.postGetDiagnostic.dispatch(\"LMSGetDiagnostic\", [errorCode], ret, this.error);\n\t        return ret;\n\t    };\n\t    return Scorm12Api;\n\t}());\n\texports.Scorm12Api = Scorm12Api;\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar dm_1 = __webpack_require__(4);\n\tvar Scorm12DataModel = (function (_super) {\n\t    __extends(Scorm12DataModel, _super);\n\t    function Scorm12DataModel() {\n\t        _super.apply(this, arguments);\n\t        this.statusChoices = [\"passed\", \"completed\", \"failed\", \"incomplete\", \"browsed\"];\n\t        this.objStatusChoices = [\"not attempted\", \"passed\", \"completed\", \"failed\", \"incomplete\", \"browsed\"];\n\t        this.validElements = {\n\t            \"cmi.comments_from_lms\": { d: \"R\", t: \"CMIString\", l: 4096 },\n\t            \"cmi.comments\": { d: \"RW\", t: \"CMIString\", l: 4096 },\n\t            \"cmi.core._children\": { d: \"R\", t: \"Fixed\", v: \"student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time\" },\n\t            \"cmi.core.credit\": { d: \"R\", t: \"OneOf\", c: [\"credit\", \"no-credit\"] },\n\t            \"cmi.core.entry\": { d: \"R\", t: \"OneOf\", c: [\"\", \"ab-initio\", \"resume\"] },\n\t            \"cmi.core.exit\": { d: \"W\", t: \"OneOf\", c: [\"\", \"time-out\", \"logout\", \"suspend\"] },\n\t            \"cmi.core.lesson_location\": { d: \"RW\", t: \"CMIString\", l: 255 },\n\t            \"cmi.core.lesson_mode\": { d: \"R\", t: \"OneOf\", c: [\"browse\", \"normal\", \"review\"] },\n\t            \"cmi.core.lesson_status\": { d: \"RW\", t: \"OneOf\", c: this.statusChoices },\n\t            \"cmi.core.score._children\": { d: \"R\", t: \"Fixed\", v: \"raw,min,max\" },\n\t            \"cmi.core.score.max\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi.core.score.min\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi.core.score.raw\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi.core.session_time\": { d: \"W\", t: \"CMITimespan\" },\n\t            \"cmi.core.student_id\": { d: \"R\", t: \"CMIString\", l: 255 },\n\t            \"cmi.core.student_name\": { d: \"R\", t: \"CMIString\", l: 255 },\n\t            \"cmi.core.total_time\": { d: \"R\", t: \"CMITimespan\" },\n\t            \"cmi.launch_data\": { d: \"R\", t: \"CMIString\", l: 4096 },\n\t            \"cmi.student_data._children\": { d: \"R\", t: \"Fixed\", v: \"mastery_score,max_time_allowed,time_limit_action\" },\n\t            \"cmi.student_data.mastery_score\": { d: \"R\", t: \"Score\" },\n\t            \"cmi.student_data.max_time_allowed\": { d: \"R\", t: \"CMITimespan\" },\n\t            \"cmi.student_data.time_limit_action\": { d: \"R\", t: \"OneOf\", c: [\"exit,message\", \"exit,no message\", \"continue,message\", \"continue,no message\"] },\n\t            \"cmi.student_preference._children\": { d: \"R\", t: \"Fixed\", v: \"audio,language,speed,text\" },\n\t            \"cmi.student_preference.audio\": { d: \"RW\", t: \"CMISInteger\", min: -1, max: 100 },\n\t            \"cmi.student_preference.language\": { d: \"RW\", t: \"CMIString\", l: 255 },\n\t            \"cmi.student_preference.speed\": { d: \"RW\", t: \"CMISInteger\", min: -100, max: 100 },\n\t            \"cmi.student_preference.text\": { d: \"RW\", t: \"CMISInteger\", min: -1, max: 1 },\n\t            \"cmi.suspend_data\": { d: \"RW\", t: \"CMIString\", l: 4096 },\n\t            \"cmi.interactions._children\": { d: \"R\", t: \"Fixed\", v: \"id,objectives,time,type,correct_responses,weighting,student_response,result,latency\" },\n\t            \"cmi.interactions._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"cmi.objectives._children\": { d: \"R\", t: \"Fixed\", v: \"id,score,status\" },\n\t            \"cmi.objectives._count\": { d: \"R\", t: \"CMIInteger\" }\n\t        };\n\t        this.validRegexElements = {\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.id\": { d: \"W\", t: \"CMIIdentifier\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.time\": { d: \"W\", t: \"CMITime\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.type\": { d: \"W\", t: \"OneOf\", c: [\"true-false\", \"choice\", \"fill-in\", \"matching\", \"performance\", \"sequencing\", \"likert\", \"numeric\"] },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.weighting\": { d: \"W\", t: \"CMIDecimal\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.student_response\": { d: \"W\", t: \"CMIFeedback\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.result\": { d: \"W\", t: \"CMIResult\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.latency\": { d: \"W\", t: \"CMITimespan\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.objectives\\\\._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.objectives\\\\._children\": { d: \"R\", t: \"Fixed\", v: \"id\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.objectives.\\\\d+\\\\.id\": { d: \"W\", t: \"CMIIdentifier\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses\\\\._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses\\\\._children\": { d: \"R\", t: \"Fixed\", v: \"pattern\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses.\\\\d+\\\\.pattern\": { d: \"W\", t: \"CMIFeedback\" },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.id\": { d: \"RW\", t: \"CMIIdentifier\" },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\._children\": { d: \"R\", t: \"Fixed\", v: \"raw,min,max\" },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.raw\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.max\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.min\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.status\": { d: \"RW\", t: \"OneOf\", c: this.objStatusChoices }\n\t        };\n\t    }\n\t    Scorm12DataModel.prototype.validateResult = function (value) {\n\t        var res = value.match(/^correct$|^wrong$|^unanticipated$|^neutral$|^([0-9]{0,3})?(\\.[0-9]{1,2})?$/);\n\t        if (res && res.length) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    Scorm12DataModel.prototype.validateTime = function (value) {\n\t        var res = value.match(/^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(\\.[0-9]{1,2})?$/);\n\t        if (res && res.length) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    Scorm12DataModel.prototype.validateTimespan = function (value) {\n\t        var res = value.match(/^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(\\.[0-9]{1,2})?$/);\n\t        if (res && res.length) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    return Scorm12DataModel;\n\t}(dm_1.ScormBaseDataModel));\n\texports.Scorm12DataModel = Scorm12DataModel;\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar ScormBaseDataModel = (function () {\n\t    function ScormBaseDataModel() {\n\t    }\n\t    ScormBaseDataModel.prototype.matchElement = function (element) {\n\t        if (this.validElements[element]) {\n\t            return this.validElements[element];\n\t        }\n\t        var regexKeys = Object.keys(this.validRegexElements);\n\t        for (var i = 0; i < regexKeys.length; i++) {\n\t            if (element.match(new RegExp(\"^\" + regexKeys[i] + \"$\"))) {\n\t                return this.validRegexElements[regexKeys[i]];\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    ScormBaseDataModel.prototype.validateDecimal = function (value, min, max) {\n\t        var v = parseInt(value, 10);\n\t        if (isNaN(v)) {\n\t            return false;\n\t        }\n\t        if (typeof min !== undefined) {\n\t            if (v < min) {\n\t                return false;\n\t            }\n\t        }\n\t        if (typeof max !== undefined) {\n\t            if (v > max) {\n\t                return false;\n\t            }\n\t        }\n\t        return true;\n\t    };\n\t    ScormBaseDataModel.prototype.validateFeedback = function (value) {\n\t        var res = value.match(/^.{0,255}/);\n\t        if (res && res.length) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    ScormBaseDataModel.prototype.validateIdentifier = function (value) {\n\t        var res = value.match(/^\\w{1,255}$/);\n\t        if (res && res.length) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    ScormBaseDataModel.prototype.validateIntegerSigned = function (value, min, max) {\n\t        var v = parseInt(value, 10);\n\t        if (isNaN(v)) {\n\t            return false;\n\t        }\n\t        if (v <= -32768 || v >= 32768) {\n\t            return false;\n\t        }\n\t        if (typeof min !== undefined) {\n\t            if (v < min) {\n\t                return false;\n\t            }\n\t        }\n\t        if (typeof max !== undefined) {\n\t            if (v > max) {\n\t                return false;\n\t            }\n\t        }\n\t        return true;\n\t    };\n\t    ScormBaseDataModel.prototype.validateIntegerUnsigned = function (value, min, max) {\n\t        var v = parseInt(value, 10);\n\t        if (isNaN(v)) {\n\t            return false;\n\t        }\n\t        if (v <= 0 || v >= 65536) {\n\t            return false;\n\t        }\n\t        if (typeof min !== undefined) {\n\t            if (v < min) {\n\t                return false;\n\t            }\n\t        }\n\t        if (typeof max !== undefined) {\n\t            if (v > max) {\n\t                return false;\n\t            }\n\t        }\n\t        return true;\n\t    };\n\t    ScormBaseDataModel.prototype.validateOneOf = function (oneOf, value) {\n\t        var i;\n\t        for (i = 0; i < oneOf.length; i++) {\n\t            if (oneOf[i] === value) {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t    ScormBaseDataModel.prototype.validateString = function (value, length) {\n\t        return value.length <= length;\n\t    };\n\t    return ScormBaseDataModel;\n\t}());\n\texports.ScormBaseDataModel = ScormBaseDataModel;\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar score_rollup_1 = __webpack_require__(6);\n\tvar status_rollup_1 = __webpack_require__(7);\n\tvar ScoVar = (function () {\n\t    function ScoVar(v) {\n\t        if (v === void 0) { v = \"\"; }\n\t        this._value = \"\";\n\t        this.dirty = false;\n\t        this.wasSet = false;\n\t        this._value = v;\n\t    }\n\t    ScoVar.prototype.get = function () {\n\t        return this._value;\n\t    };\n\t    ScoVar.prototype.set = function (d) {\n\t        if (d === undefined || d === null) {\n\t            d = \"\";\n\t        }\n\t        if (typeof d !== \"number\") {\n\t            d = String(d);\n\t        }\n\t        if (this._value !== d) {\n\t            this.dirty = true;\n\t        }\n\t        this._value = d;\n\t        this.wasSet = true;\n\t    };\n\t    ScoVar.prototype.isDirty = function () {\n\t        return this.dirty;\n\t    };\n\t    ScoVar.prototype.isSet = function () {\n\t        return this.wasSet;\n\t    };\n\t    return ScoVar;\n\t}());\n\texports.ScoVar = ScoVar;\n\tvar ScoData = (function () {\n\t    function ScoData() {\n\t        this.start = false;\n\t        this.end = false;\n\t        this.dirty = false;\n\t        this.wasSet = false;\n\t        this.totalWallTimeAtStart = 0;\n\t        this.currentWallTimeStart = 0;\n\t        this.currentWallTimeEnd = 0;\n\t        this.start = false;\n\t        this.end = false;\n\t        this.data = {};\n\t        this.fillDefaults();\n\t        this.populateMaxes();\n\t    }\n\t    ScoData.prototype.fillDefaults = function () {\n\t    };\n\t    ScoData.prototype.getMaxIndex = function (prefix) {\n\t        var i, prefixLen = prefix.length, dmeSplit, maxIndex = -1, dmes = this.keys(), n;\n\t        for (i = 0; i < dmes.length; i++) {\n\t            if (dmes[i].substring(0, prefixLen) === prefix) {\n\t                dmeSplit = dmes[i].substring(prefixLen).split(\".\");\n\t                n = Number(dmeSplit[0]);\n\t                if (!isNaN(n)) {\n\t                    maxIndex = Math.max(n, maxIndex);\n\t                }\n\t            }\n\t        }\n\t        return maxIndex;\n\t    };\n\t    ScoData.prototype.exportData = function () {\n\t        var flatData = {};\n\t        var scoFlat = {\n\t            status: this.getStatus(),\n\t            score: this.getScore(),\n\t            sessionTime: this.getSessionTime(),\n\t            totalTime: this.getTotalTime(),\n\t            sessionWallTime: 0,\n\t            totalWallTime: 0,\n\t            lastOpenedAt: this.currentWallTimeStart,\n\t            lastClosedAt: this.currentWallTimeEnd,\n\t            data: flatData\n\t        };\n\t        if (this.currentWallTimeEnd) {\n\t            scoFlat.sessionWallTime = this.currentWallTimeEnd - this.currentWallTimeStart;\n\t        }\n\t        else if (this.currentWallTimeStart) {\n\t            scoFlat.sessionWallTime = new Date().getTime() - this.currentWallTimeStart;\n\t        }\n\t        scoFlat.totalWallTime = this.totalWallTimeAtStart + scoFlat.sessionWallTime;\n\t        var k;\n\t        for (k in this.data) {\n\t            if (this.data.hasOwnProperty(k)) {\n\t                flatData[k] = this.data[k].get();\n\t            }\n\t        }\n\t        return scoFlat;\n\t    };\n\t    ;\n\t    ScoData.prototype.importData = function (unflattenData) {\n\t        var k;\n\t        for (k in unflattenData.data) {\n\t            if (unflattenData.data.hasOwnProperty(k)) {\n\t                if (this.canImportKey(k)) {\n\t                    this.data[k] = new ScoVar(unflattenData.data[k]);\n\t                }\n\t            }\n\t        }\n\t        this.populateMaxes();\n\t        this.totalWallTimeAtStart = 0;\n\t        if (unflattenData.totalWallTime) {\n\t            this.totalWallTimeAtStart = unflattenData.totalWallTime;\n\t        }\n\t    };\n\t    ScoData.prototype.get = function (dme) {\n\t        if (!this.data[dme]) {\n\t            return \"\";\n\t        }\n\t        return this.data[dme].get();\n\t    };\n\t    ScoData.prototype.set = function (dme, value) {\n\t        if (!this.data[dme]) {\n\t            this.data[dme] = new ScoVar();\n\t        }\n\t        this.data[dme].set(value);\n\t        this.dirty = this.dirty || this.data[dme].isDirty();\n\t        this.wasSet = true;\n\t    };\n\t    ScoData.prototype.isDirty = function () {\n\t        return this.dirty;\n\t    };\n\t    ScoData.prototype.isSet = function () {\n\t        return this.wasSet;\n\t    };\n\t    ScoData.prototype.keys = function () {\n\t        return Object.keys(this.data);\n\t    };\n\t    ScoData.prototype.startViewing = function () {\n\t        this.currentWallTimeStart = new Date().getTime();\n\t        this.currentWallTimeEnd = 0;\n\t    };\n\t    ScoData.prototype.stopViewing = function () {\n\t        this.currentWallTimeEnd = new Date().getTime();\n\t    };\n\t    return ScoData;\n\t}());\n\texports.ScoData = ScoData;\n\tvar AllScosData = (function () {\n\t    function AllScosData() {\n\t        this.scos = {};\n\t        this.currentScoId = null;\n\t        this.sessionTime = \"\";\n\t        this.totalTime = \"\";\n\t        this.currentWallTimeStart = 0;\n\t        this.currentWallTimeEnd = 0;\n\t        this.totalWallTimeAtStart = 0;\n\t    }\n\t    AllScosData.prototype.exportData = function (config) {\n\t        var d = {\n\t            status: \"\",\n\t            score: \"\",\n\t            sessionTime: \"\",\n\t            totalTime: \"\",\n\t            sessionWallTime: 0,\n\t            totalWallTime: 0,\n\t            lastOpenedAt: this.currentWallTimeStart,\n\t            lastClosedAt: this.currentWallTimeEnd,\n\t            currentSco: this.currentScoId,\n\t            scos: {}\n\t        };\n\t        var k;\n\t        if (this.currentWallTimeEnd) {\n\t            d.sessionWallTime = this.currentWallTimeEnd - this.currentWallTimeStart;\n\t        }\n\t        else {\n\t            d.sessionWallTime = new Date().getTime() - this.currentWallTimeStart;\n\t        }\n\t        d.totalWallTime = this.totalWallTimeAtStart + d.sessionWallTime;\n\t        for (k in this.scos) {\n\t            if (this.scos.hasOwnProperty(k)) {\n\t                d.scos[k] = this.scos[k].exportData();\n\t                d.sessionTime = this.addTimes(this.scos[k].getSessionTime(), d.sessionTime);\n\t                d.totalTime = this.addTimes(this.scos[k].getTotalTime(), d.totalTime);\n\t            }\n\t        }\n\t        d.status = status_rollup_1.rollupAllScoStatuses(this, config);\n\t        d.score = score_rollup_1.rollupAllScoScores(this, config);\n\t        return d;\n\t    };\n\t    ;\n\t    AllScosData.prototype.importData = function (unflattenData) {\n\t        var k;\n\t        this.currentScoId = unflattenData.currentSco;\n\t        for (k in unflattenData.scos) {\n\t            if (unflattenData.scos.hasOwnProperty(k)) {\n\t                this.scos[k] = this.makeNewScoData();\n\t                this.scos[k].importData(unflattenData.scos[k]);\n\t            }\n\t        }\n\t        this.totalWallTimeAtStart = 0;\n\t        if (unflattenData.totalWallTime) {\n\t            this.totalWallTimeAtStart = unflattenData.totalWallTime;\n\t        }\n\t        this.sessionTime = \"\";\n\t        this.totalTime = \"\";\n\t        if (unflattenData.totalTime) {\n\t            this.totalTime = unflattenData.totalTime;\n\t        }\n\t    };\n\t    AllScosData.prototype.startViewing = function () {\n\t        this.currentWallTimeStart = new Date().getTime();\n\t        this.currentWallTimeEnd = 0;\n\t    };\n\t    AllScosData.prototype.updateSessionViewing = function () {\n\t        this.currentWallTimeEnd = new Date().getTime();\n\t    };\n\t    return AllScosData;\n\t}());\n\texports.AllScosData = AllScosData;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tfunction rollupAllScoScores(allScos, config) {\n\t    if (config.scoreRollupCustomFunction()) {\n\t        return config.scoreRollupCustomFunction()(allScos, config);\n\t    }\n\t    var rollupScore = 0;\n\t    var tempScore = \"\";\n\t    var contributingScos = 0;\n\t    var k;\n\t    for (k in allScos.scos) {\n\t        if (allScos.scos.hasOwnProperty(k)) {\n\t            tempScore = allScos.scos[k].getScore();\n\t            if (tempScore !== \"\") {\n\t                rollupScore += Number(tempScore);\n\t                contributingScos += 1;\n\t            }\n\t            else if (config.scoreRollupIncludeScosWithNoScore()) {\n\t                contributingScos += 1;\n\t            }\n\t        }\n\t    }\n\t    if (contributingScos == 0) {\n\t        return \"\";\n\t    }\n\t    return String(rollupScore / contributingScos);\n\t}\n\texports.rollupAllScoScores = rollupAllScoScores;\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tfunction rollupAllScoStatuses(allScos, config) {\n\t    if (config.statusRollupCustomFunction()) {\n\t        return config.statusRollupCustomFunction()(allScos, config);\n\t    }\n\t    var rollupStatus = \"\";\n\t    var scoStatus = \"\";\n\t    var k;\n\t    for (k in allScos.scos) {\n\t        if (allScos.scos.hasOwnProperty(k)) {\n\t            scoStatus = allScos.scos[k].getStatus();\n\t            if (scoStatus !== \"\") {\n\t                switch (rollupStatus) {\n\t                    case \"\":\n\t                        rollupStatus = scoStatus;\n\t                        break;\n\t                    case \"not attempted\":\n\t                        switch (scoStatus) {\n\t                            case \"not attempted\":\n\t                                break;\n\t                            case \"incomplete\":\n\t                                rollupStatus = \"incomplete\";\n\t                                break;\n\t                            case \"failed\":\n\t                                rollupStatus = \"failed\";\n\t                                break;\n\t                            case \"completed\":\n\t                            case \"passed\":\n\t                                rollupStatus = \"incomplete\";\n\t                                break;\n\t                        }\n\t                        break;\n\t                    case \"incomplete\":\n\t                        switch (scoStatus) {\n\t                            case \"not attempted\":\n\t                            case \"incomplete\":\n\t                                break;\n\t                            case \"failed\":\n\t                                rollupStatus = scoStatus;\n\t                                break;\n\t                            case \"completed\":\n\t                            case \"passed\":\n\t                                break;\n\t                        }\n\t                        break;\n\t                    case \"failed\":\n\t                        break;\n\t                    case \"completed\":\n\t                        switch (scoStatus) {\n\t                            case \"not attempted\":\n\t                            case \"incomplete\":\n\t                                rollupStatus = \"incomplete\";\n\t                                break;\n\t                            case \"failed\":\n\t                                rollupStatus = scoStatus;\n\t                                break;\n\t                            case \"completed\":\n\t                                break;\n\t                            case \"passed\":\n\t                                rollupStatus = scoStatus;\n\t                        }\n\t                        break;\n\t                    case \"passed\":\n\t                        switch (scoStatus) {\n\t                            case \"not attempted\":\n\t                            case \"incomplete\":\n\t                                rollupStatus = \"incomplete\";\n\t                                break;\n\t                            case \"failed\":\n\t                                rollupStatus = scoStatus;\n\t                                break;\n\t                            case \"completed\":\n\t                                break;\n\t                            case \"passed\":\n\t                                break;\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t        }\n\t    }\n\t    return rollupStatus;\n\t}\n\texports.rollupAllScoStatuses = rollupAllScoStatuses;\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar dm2004_1 = __webpack_require__(9);\n\tvar Sco = __webpack_require__(5);\n\tvar ScoVar = Sco.ScoVar;\n\tvar API_FALSE = \"false\";\n\tvar API_TRUE = \"true\";\n\tvar Sco2004Data = (function (_super) {\n\t    __extends(Sco2004Data, _super);\n\t    function Sco2004Data() {\n\t        _super.apply(this, arguments);\n\t        this.interactionCount = 0;\n\t        this.objectiveCount = 0;\n\t        this.interactionObjectiveCount = {};\n\t        this.correctResponsesCount = {};\n\t    }\n\t    Sco2004Data.prototype.fillDefaults = function () {\n\t        this.data[\"cmi.completion_status\"] = new ScoVar(\"not attempted\");\n\t        this.data[\"cmi.success_status\"] = new ScoVar(\"unknown\");\n\t        this.data[\"cmi.suspend_data\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.location\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.session_time\"] = new ScoVar(\"PT0S\");\n\t        this.data[\"cmi.total_time\"] = new ScoVar(\"PT0S\");\n\t        this.data[\"cmi.entry\"] = new ScoVar(\"ab-initio\");\n\t        this.data[\"cmi.score.scaled\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.score.raw\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.score.min\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.score.max\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.learner_preference.audio_level\"] = new ScoVar(\"0\");\n\t        this.data[\"cmi.learner_preference.language\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.learner_preference.delivery_speed\"] = new ScoVar(\"0\");\n\t        this.data[\"cmi.learner_preference.audio_captioning\"] = new ScoVar(\"0\");\n\t        this.data[\"cmi.learner_name\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.learner_id\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.launch_data\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.max_time_allowed\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.time_limit_action\"] = new ScoVar(\"\");\n\t        this.data[\"cmi.credit\"] = new ScoVar(\"credit\");\n\t        this.data[\"cmi.mode\"] = new ScoVar(\"normal\");\n\t    };\n\t    Sco2004Data.prototype.canImportKey = function (key) {\n\t        if (key == \"cmi.session_time\") {\n\t            return false;\n\t        }\n\t        return true;\n\t    };\n\t    Sco2004Data.prototype.getScore = function () {\n\t        var score = this.data[\"cmi.score.raw\"].get();\n\t        if (score === \"\") {\n\t            score = this.data[\"cmi.score.scaled\"].get();\n\t        }\n\t        return score;\n\t    };\n\t    Sco2004Data.prototype.getSessionTime = function () {\n\t        return this.data[\"cmi.session_time\"].get();\n\t    };\n\t    Sco2004Data.prototype.getStatus = function () {\n\t        var success = this.data[\"cmi.success_status\"].get();\n\t        var complete = this.data[\"cmi.completion_status\"].get();\n\t        if (complete === \"incomplete\") {\n\t            return complete;\n\t        }\n\t        if (success === \"passed\" || success === \"failed\") {\n\t            return success;\n\t        }\n\t        return complete;\n\t    };\n\t    Sco2004Data.prototype.getTotalTime = function () {\n\t        return this.data[\"cmi.total_time\"].get();\n\t    };\n\t    Sco2004Data.prototype.populateMaxes = function () {\n\t        var i, dme;\n\t        this.interactionCount = this.getMaxIndex(\"cmi.interactions.\") + 1;\n\t        this.updateInteractionCountDme();\n\t        this.objectiveCount = this.getMaxIndex(\"cmi.objectives.\") + 1;\n\t        this.updateObjectiveCountDme();\n\t        for (i = 0; i < this.interactionCount; i++) {\n\t            dme = \"cmi.interactions.\" + i + \".objectives.\";\n\t            this.interactionObjectiveCount[i] = this.getMaxIndex(dme) + 1;\n\t            this.updateInteractionObjectiveCountDme(i);\n\t        }\n\t        for (i = 0; i < this.interactionCount; i++) {\n\t            dme = \"cmi.interactions.\" + i + \".correct_responses.\";\n\t            this.correctResponsesCount[i] = this.getMaxIndex(dme) + 1;\n\t            this.updateCorrectResponsesCountDme(i);\n\t        }\n\t    };\n\t    Sco2004Data.prototype.set = function (dme, value) {\n\t        _super.prototype.set.call(this, dme, value);\n\t        var dmeParts = dme.split(\".\");\n\t        if (dmeParts[1] === \"interactions\") {\n\t            this.interactionCount = Math.max(Number(dmeParts[2]) + 1, this.interactionCount);\n\t            this.updateInteractionCountDme();\n\t            if (dmeParts[3] === \"objectives\") {\n\t                this.interactionObjectiveCount[dmeParts[2]] = Math.max(Number(dmeParts[4]) + 1, this.interactionObjectiveCount[dmeParts[2]]);\n\t                this.updateInteractionObjectiveCountDme(Number(dmeParts[2]));\n\t            }\n\t            else {\n\t                this.updateInteractionObjectiveCountDme(Number(dmeParts[2]));\n\t            }\n\t            if (dmeParts[3] === \"correct_responses\") {\n\t                this.correctResponsesCount[dmeParts[2]] = Math.max(Number(dmeParts[4]) + 1, this.correctResponsesCount[dmeParts[2]]);\n\t                this.updateCorrectResponsesCountDme(Number(dmeParts[2]));\n\t            }\n\t            else {\n\t                this.updateCorrectResponsesCountDme(Number(dmeParts[2]));\n\t            }\n\t        }\n\t        else if (dmeParts[1] === \"objectives\") {\n\t            this.objectiveCount = Math.max(Number(dmeParts[2]) + 1, this.objectiveCount);\n\t            this.updateObjectiveCountDme();\n\t        }\n\t    };\n\t    Sco2004Data.prototype.updateInteractionCountDme = function () {\n\t        this.data[\"cmi.interactions._count\"] = new ScoVar(this.interactionCount);\n\t    };\n\t    Sco2004Data.prototype.updateObjectiveCountDme = function () {\n\t        this.data[\"cmi.objectives._count\"] = new ScoVar(this.objectiveCount);\n\t    };\n\t    Sco2004Data.prototype.updateInteractionObjectiveCountDme = function (index) {\n\t        if (!this.interactionObjectiveCount[index]) {\n\t            this.interactionObjectiveCount[index] = 0;\n\t        }\n\t        this.data[\"cmi.interactions.\" + index + \".objectives._count\"] = new ScoVar(this.interactionObjectiveCount[index]);\n\t    };\n\t    Sco2004Data.prototype.updateCorrectResponsesCountDme = function (index) {\n\t        if (!this.correctResponsesCount[index]) {\n\t            this.correctResponsesCount[index] = 0;\n\t        }\n\t        this.data[\"cmi.interactions.\" + index + \".correct_responses._count\"] = new ScoVar(this.correctResponsesCount[index]);\n\t    };\n\t    return Sco2004Data;\n\t}(Sco.ScoData));\n\texports.Sco2004Data = Sco2004Data;\n\tvar AllScos2004Data = (function (_super) {\n\t    __extends(AllScos2004Data, _super);\n\t    function AllScos2004Data() {\n\t        _super.apply(this, arguments);\n\t    }\n\t    AllScos2004Data.prototype.addTimes = function (one, two) {\n\t        return Scorm2004TimeManager.addTime(one, two);\n\t    };\n\t    AllScos2004Data.prototype.makeNewScoData = function () {\n\t        return new Sco2004Data();\n\t    };\n\t    return AllScos2004Data;\n\t}(Sco.AllScosData));\n\texports.AllScos2004Data = AllScos2004Data;\n\tvar Scorm2004TimeManager = (function () {\n\t    function Scorm2004TimeManager() {\n\t    }\n\t    Scorm2004TimeManager.addTime = function (one, two) {\n\t        if (!one) {\n\t            return \"\";\n\t        }\n\t        if (!two) {\n\t            return one;\n\t        }\n\t        if (!this.dm.validateTimespan(two)) {\n\t            two = \"PT0S\";\n\t        }\n\t        var splitSession = one.split(\"P\");\n\t        var splitTotal = two.split(\"P\");\n\t        var hasTimeBlock = one.indexOf(\"T\") > -1 || two.indexOf(\"T\") > -1;\n\t        var sessionTime = this.parseTimestamp(splitSession[1]);\n\t        var totalTime = this.parseTimestamp(splitTotal[1]);\n\t        var timeString = \"P\";\n\t        var calendarValues = [\"yearVal\", \"monthVal\", \"dayVal\"];\n\t        var timeValues = [\"hourVal\", \"minVal\"];\n\t        for (var i = 0; i < calendarValues.length; i++) {\n\t            timeString += this.addValuesToTimeString(calendarValues[i], sessionTime, totalTime);\n\t        }\n\t        if (hasTimeBlock) {\n\t            timeString += \"T\";\n\t            for (var i = 0; i < timeValues.length; i++) {\n\t                timeString += this.addValuesToTimeString(timeValues[i], sessionTime, totalTime);\n\t            }\n\t            if (sessionTime[\"secVal\"] || totalTime[\"secVal\"]) {\n\t                if (sessionTime[\"secVal\"] && totalTime[\"secVal\"]) {\n\t                    var seconds = sessionTime[\"secVal\"] + totalTime[\"secVal\"];\n\t                    var decimalVal = seconds % 1;\n\t                    if (decimalVal !== 0 && decimalVal > 0.99) {\n\t                        seconds = (seconds - decimalVal) + (Math.round(decimalVal * 100) / 100);\n\t                    }\n\t                    totalTime[\"secVal\"] = seconds;\n\t                }\n\t                if (!totalTime[\"secVal\"]) {\n\t                    totalTime[\"secVal\"] = sessionTime[\"secVal\"];\n\t                }\n\t                timeString += totalTime[\"secVal\"].toString() + \"S\";\n\t            }\n\t        }\n\t        if (timeString == \"P\" || timeString == \"PT\") {\n\t            timeString = \"PT0S\";\n\t        }\n\t        return timeString;\n\t    };\n\t    Scorm2004TimeManager.addValuesToTimeString = function (arrayValue, sessionTime, totalTime) {\n\t        var timeString = \"\";\n\t        if (sessionTime[arrayValue] || totalTime[arrayValue]) {\n\t            if (sessionTime[arrayValue] && totalTime[arrayValue]) {\n\t                totalTime[arrayValue] = sessionTime[arrayValue] + totalTime[arrayValue];\n\t            }\n\t            if (!totalTime[arrayValue]) {\n\t                totalTime[arrayValue] = sessionTime[arrayValue];\n\t            }\n\t            var firstChar = arrayValue.charAt(0).toUpperCase();\n\t            timeString = totalTime[arrayValue].toString() + firstChar;\n\t        }\n\t        return timeString;\n\t    };\n\t    Scorm2004TimeManager.parseTimestamp = function (str) {\n\t        var timeIndex = str.indexOf(\"T\");\n\t        var timeValues = {};\n\t        var date = str;\n\t        var timeBlock = \"\";\n\t        if (timeIndex > -1) {\n\t            date = str.substring(0, timeIndex);\n\t            timeBlock = str.substring(timeIndex + 1, str.length);\n\t        }\n\t        var yearMatch = date.match(/(\\d+Y|Y)/);\n\t        var monthMatch = date.match(/(\\d+M|M)/);\n\t        var dayMatch = date.match(/(\\d+D|D)/);\n\t        var hourMatch = timeBlock.match(/(\\d+H|H)/);\n\t        var minuteMatch = timeBlock.match(/(\\d+M|M)/);\n\t        var secondMatch = timeBlock.match(/(\\d+([.]\\d{1,2})?S|S)/);\n\t        if (yearMatch != null) {\n\t            timeValues[\"yearVal\"] = Number(yearMatch[0].replace(\"Y\", \"\"));\n\t        }\n\t        if (monthMatch != null) {\n\t            timeValues[\"monthVal\"] = Number(monthMatch[0].replace(\"M\", \"\"));\n\t        }\n\t        if (dayMatch != null) {\n\t            timeValues[\"dayVal\"] = Number(dayMatch[0].replace(\"D\", \"\"));\n\t        }\n\t        if (hourMatch != null) {\n\t            timeValues[\"hourVal\"] = Number(hourMatch[0].replace(\"H\", \"\"));\n\t        }\n\t        if (minuteMatch != null) {\n\t            timeValues[\"minVal\"] = Number(minuteMatch[0].replace(\"M\", \"\"));\n\t        }\n\t        if (secondMatch != null) {\n\t            timeValues[\"secVal\"] = Number(secondMatch[0].replace(\"S\", \"\"));\n\t        }\n\t        return timeValues;\n\t    };\n\t    Scorm2004TimeManager.dm = new dm2004_1.Scorm2004DataModel();\n\t    return Scorm2004TimeManager;\n\t}());\n\tvar Scorm2004Api = (function () {\n\t    function Scorm2004Api(scoName, scoData, events, config) {\n\t        this.error = \"0\";\n\t        this.events = null;\n\t        this.saveCallbacks = [];\n\t        this.scoName = scoName;\n\t        this.sco = scoData;\n\t        this.dataModel = new dm2004_1.Scorm2004DataModel();\n\t        this.events = events;\n\t        this.config = config;\n\t        this.sco.start = false;\n\t        this.sco.end = false;\n\t    }\n\t    Scorm2004Api.prototype.storeTime = function (session_time) {\n\t        if (!session_time) {\n\t            return;\n\t        }\n\t        var timeString = Scorm2004TimeManager.addTime(session_time, this.sco.get(\"cmi.total_time\"));\n\t        this.sco.set(\"cmi.total_time\", timeString);\n\t    };\n\t    Scorm2004Api.prototype.addSaveCallback = function (callbackFn, scope) {\n\t        this.saveCallbacks.push([callbackFn, scope]);\n\t    };\n\t    Scorm2004Api.prototype.callSave = function (eventType, becauseFinish) {\n\t        var i;\n\t        for (i = 0; i < this.saveCallbacks.length; i++) {\n\t            this.saveCallbacks[i][0].call(this.saveCallbacks[i][1], \"\", {\n\t                eventType: eventType,\n\t                scoName: this.scoName,\n\t                sco: this.sco,\n\t                forceSync: becauseFinish\n\t            });\n\t        }\n\t    };\n\t    Scorm2004Api.prototype.initialize = function (empty) {\n\t        if (empty !== \"\") {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"104\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.start) {\n\t            this.error = \"103\";\n\t            return API_FALSE;\n\t        }\n\t        this.sco.start = true;\n\t        this.error = \"0\";\n\t        return API_TRUE;\n\t    };\n\t    Scorm2004Api.prototype.finish = function (requiredEmpty) {\n\t        if (requiredEmpty !== \"\") {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        if (!this.sco.start) {\n\t            this.error = \"112\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"113\";\n\t            return API_FALSE;\n\t        }\n\t        var sessionTime = this.sco.get(\"cmi.session_time\");\n\t        this.storeTime(sessionTime);\n\t        if (this.sco.get(\"cmi.exit\") === \"suspend\") {\n\t            this.sco.set(\"cmi.entry\", \"resume\");\n\t        }\n\t        else {\n\t            this.sco.set(\"cmi.entry\", \"\");\n\t        }\n\t        this.sco.end = true;\n\t        this.error = \"0\";\n\t        this.callSave(\"finish\", true);\n\t        return API_TRUE;\n\t    };\n\t    Scorm2004Api.prototype.getValue = function (dme) {\n\t        if (!this.sco.start) {\n\t            this.error = \"122\";\n\t            return \"\";\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"123\";\n\t            return \"\";\n\t        }\n\t        if (dme === undefined || dme === null) {\n\t            this.error = \"301\";\n\t            return API_FALSE;\n\t        }\n\t        dme = String(dme);\n\t        var dm = this.dataModel.matchElement(dme);\n\t        if (!dm) {\n\t            this.error = \"401\";\n\t            return \"\";\n\t        }\n\t        if (dm.d === \"W\") {\n\t            this.error = \"405\";\n\t            return \"\";\n\t        }\n\t        this.error = \"0\";\n\t        if (dm.t === \"Fixed\") {\n\t            return dm.v;\n\t        }\n\t        return this.sco.get(dme);\n\t    };\n\t    Scorm2004Api.prototype.setValue = function (dme, value) {\n\t        var actuallySet = true;\n\t        if (!this.sco.start) {\n\t            this.error = \"132\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"133\";\n\t            return API_FALSE;\n\t        }\n\t        if (dme === undefined || dme === null) {\n\t            this.error = \"351\";\n\t            return API_FALSE;\n\t        }\n\t        dme = String(dme);\n\t        if (value === undefined || value === null) {\n\t            value = \"\";\n\t        }\n\t        value = String(value);\n\t        var dm = this.dataModel.matchElement(dme);\n\t        if (!dm) {\n\t            this.error = \"401\";\n\t            return API_FALSE;\n\t        }\n\t        if (dm.d === \"R\") {\n\t            this.error = \"404\";\n\t            return API_FALSE;\n\t        }\n\t        var validResult;\n\t        var v = \"\" + value;\n\t        if (dm.t === \"CMIDecimal\") {\n\t            validResult = this.dataModel.validateDecimal(v, dm.min, dm.max);\n\t        }\n\t        else if (dm.t === \"CMIFeedback\") {\n\t            validResult = this.dataModel.validateFeedback(v);\n\t        }\n\t        else if (dm.t === \"CMIIdentifier\") {\n\t            validResult = this.dataModel.validateIdentifier(v);\n\t        }\n\t        else if (dm.t === \"CMIInteger\") {\n\t            validResult = this.dataModel.validateIntegerUnsigned(v, dm.min, dm.max);\n\t        }\n\t        else if (dm.t === \"CMISInteger\") {\n\t            validResult = this.dataModel.validateIntegerSigned(v, dm.min, dm.max);\n\t        }\n\t        else if (dm.t === \"OneOf\") {\n\t            validResult = this.dataModel.validateOneOf(dm.c, v);\n\t        }\n\t        else if (dm.t === \"CMIResult\") {\n\t            validResult = this.dataModel.validateResult(v);\n\t        }\n\t        else if (dm.t === \"CMIString\") {\n\t            validResult = this.dataModel.validateString(v, dm.l);\n\t        }\n\t        else if (dm.t === \"CMITime\") {\n\t            validResult = this.dataModel.validateTime(v);\n\t        }\n\t        else if (dm.t === \"CMITimespan\") {\n\t            validResult = this.dataModel.validateTimespan(v);\n\t        }\n\t        else {\n\t            this.error = \"351\";\n\t            return API_FALSE;\n\t        }\n\t        if (!validResult) {\n\t            this.error = \"406\";\n\t            return API_FALSE;\n\t        }\n\t        var dmeParts = dme.split(\".\");\n\t        if (dmeParts[1] === \"interactions\") {\n\t            if (Number(dmeParts[2]) > this.sco.interactionCount) {\n\t                this.error = \"408\";\n\t                return API_FALSE;\n\t            }\n\t            if (dmeParts[3] === \"objectives\") {\n\t                if (Number(dmeParts[4]) > this.sco.interactionObjectiveCount[dmeParts[2]]) {\n\t                    this.error = \"408\";\n\t                    return API_FALSE;\n\t                }\n\t            }\n\t            if (dmeParts[3] === \"correct_responses\") {\n\t                if (Number(dmeParts[4]) > this.sco.correctResponsesCount[dmeParts[2]]) {\n\t                    this.error = \"408\";\n\t                    return API_FALSE;\n\t                }\n\t            }\n\t        }\n\t        if (dmeParts[1] === \"objectives\") {\n\t            if (Number(dmeParts[2]) > this.sco.objectiveCount) {\n\t                this.error = \"408\";\n\t                return API_FALSE;\n\t            }\n\t        }\n\t        if (dme == \"cmi.score.raw\") {\n\t            var rawScore = this.sco.get(\"cmi.score.raw\");\n\t            var rawCompletionStatus = this.sco.get(\"cmi.completion_status\");\n\t            var rawSuccessStatus = this.sco.get(\"cmi.success_status\");\n\t            if (rawScore !== \"\" &&\n\t                ((rawCompletionStatus == \"completed\" && !this.config.scoreAllowChangeAfterCompleted()) ||\n\t                    (rawSuccessStatus == \"passed\" && !this.config.scoreAllowChangeAfterPassed()) ||\n\t                    (rawSuccessStatus == \"failed\" && !this.config.scoreAllowChangeAfterFailed()))) {\n\t                actuallySet = false;\n\t            }\n\t            else if (!this.config.scoreAllowReduce()) {\n\t                if (rawScore !== \"\" && Number(rawScore) > Number(value)) {\n\t                    actuallySet = false;\n\t                }\n\t            }\n\t        }\n\t        else if (dme == \"cmi.score.scaled\") {\n\t            var rawScore = this.sco.get(\"cmi.score.scaled\");\n\t            var rawCompletionStatus = this.sco.get(\"cmi.completion_status\");\n\t            var rawSuccessStatus = this.sco.get(\"cmi.success_status\");\n\t            if (rawScore !== \"\" &&\n\t                ((rawCompletionStatus == \"completed\" && !this.config.scoreAllowChangeAfterCompleted()) ||\n\t                    (rawSuccessStatus == \"passed\" && !this.config.scoreAllowChangeAfterPassed()) ||\n\t                    (rawSuccessStatus == \"failed\" && !this.config.scoreAllowChangeAfterFailed()))) {\n\t                actuallySet = false;\n\t            }\n\t            else if (!this.config.scoreAllowReduce()) {\n\t                if (rawScore !== \"\" && Number(rawScore) > Number(value)) {\n\t                    actuallySet = false;\n\t                }\n\t            }\n\t        }\n\t        if (dme == \"cmi.success_status\") {\n\t            var rawStatus = this.sco.get(\"cmi.success_status\");\n\t            if ((rawStatus == \"passed\" && !this.config.statusAllowChangeAfterPassed()) ||\n\t                (rawStatus == \"failed\" && !this.config.statusAllowChangeAfterFailed())) {\n\t                actuallySet = false;\n\t            }\n\t        }\n\t        else if (dme == \"cmi.completion_status\") {\n\t            var rawStatus = this.sco.get(\"cmi.completion_status\");\n\t            if ((rawStatus == \"completed\" && !this.config.statusAllowChangeAfterCompleted())) {\n\t                actuallySet = false;\n\t            }\n\t        }\n\t        this.error = \"0\";\n\t        if (actuallySet) {\n\t            this.sco.set(dme, v);\n\t            if (dme === \"cmi.completion_status\" || dme === \"cmi.lesson_status\") {\n\t                this.events.statusChange.dispatch(v);\n\t            }\n\t            if (this.config.saveDataOnSetValue()) {\n\t                this.callSave(\"setValue\", false);\n\t            }\n\t        }\n\t        return API_TRUE;\n\t    };\n\t    Scorm2004Api.prototype.commit = function (requiredEmpty) {\n\t        if (requiredEmpty !== \"\") {\n\t            this.error = \"201\";\n\t            return API_FALSE;\n\t        }\n\t        if (!this.sco.start) {\n\t            this.error = \"142\";\n\t            return API_FALSE;\n\t        }\n\t        if (this.sco.end) {\n\t            this.error = \"143\";\n\t            return API_FALSE;\n\t        }\n\t        this.error = \"0\";\n\t        if (this.config.saveDataOnCommit()) {\n\t            this.callSave(\"commit\", false);\n\t        }\n\t        return API_TRUE;\n\t    };\n\t    Scorm2004Api.prototype.getLastError = function () {\n\t        return this.error;\n\t    };\n\t    Scorm2004Api.prototype.getErrorString = function (errorCode) {\n\t        var errors = {\n\t            \"0\": \"No error\",\n\t            \"101\": \"General Exception\",\n\t            \"102\": \"General Initialization Failure\",\n\t            \"103\": \"Already Initialized\",\n\t            \"104\": \"Content Instance Terminated\",\n\t            \"111\": \"General Termination Failure\",\n\t            \"112\": \"Termination Before Initialization\",\n\t            \"113\": \"Termination After Termination\",\n\t            \"122\": \"Retrieve Data Before Initialization\",\n\t            \"123\": \"Retrieve Data After Termination\",\n\t            \"132\": \"Store Data Before Initialization\",\n\t            \"133\": \"Store Data After Termination\",\n\t            \"142\": \"Commit Before Initialization\",\n\t            \"143\": \"Commit After Termination\",\n\t            \"201\": \"General Argument Error\",\n\t            \"301\": \"General Get Failure\",\n\t            \"351\": \"General Set Failure\",\n\t            \"391\": \"General Commit Failure\",\n\t            \"401\": \"Undefined Data Model Element\",\n\t            \"402\": \"Unimplemented Data Model Element\",\n\t            \"403\": \"Data Model Element Value Not Initialized\",\n\t            \"404\": \"Data Model Element Is Read Only\",\n\t            \"405\": \"Data Model Element Is Write Only\",\n\t            \"406\": \"Data Model Element Type Mismatch\",\n\t            \"407\": \"Data Model Element Value Out Of Range\",\n\t            \"408\": \"Data Model Dependency Not Established\"\n\t        };\n\t        if (errors[errorCode]) {\n\t            return errors[errorCode];\n\t        }\n\t        return \"\";\n\t    };\n\t    Scorm2004Api.prototype.getDiagnostic = function (errorCode) {\n\t        return this.error;\n\t    };\n\t    Scorm2004Api.prototype.Initialize = function (empty) {\n\t        var ret;\n\t        this.events.preInitialize.dispatch(\"Initialize\", [empty]);\n\t        ret = this.initialize(empty);\n\t        this.events.postInitialize.dispatch(\"Initialize\", [empty], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm2004Api.prototype.Terminate = function (empty) {\n\t        var ret;\n\t        this.events.preFinish.dispatch(\"Terminate\", [empty]);\n\t        ret = this.finish(empty);\n\t        this.events.postFinish.dispatch(\"Terminate\", [empty], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm2004Api.prototype.GetValue = function (dme) {\n\t        var ret;\n\t        this.events.preGetValue.dispatch(\"GetValue\", [dme]);\n\t        ret = this.getValue(dme);\n\t        this.events.postGetValue.dispatch(\"GetValue\", [dme], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm2004Api.prototype.SetValue = function (dme, value) {\n\t        var ret;\n\t        this.events.preSetValue.dispatch(\"SetValue\", [dme, value]);\n\t        ret = this.setValue(dme, value);\n\t        this.events.postSetValue.dispatch(\"SetValue\", [dme, value], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm2004Api.prototype.Commit = function (requiredEmpty) {\n\t        var ret;\n\t        this.events.preCommit.dispatch(\"Commit\", [requiredEmpty]);\n\t        ret = this.commit(requiredEmpty);\n\t        this.events.postCommit.dispatch(\"Commit\", [requiredEmpty], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm2004Api.prototype.GetLastError = function () {\n\t        var ret;\n\t        this.events.preGetLastError.dispatch(\"GetLastError\", []);\n\t        ret = this.getLastError();\n\t        this.events.postGetLastError.dispatch(\"GetLastError\", [], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm2004Api.prototype.GetErrorString = function (errorCode) {\n\t        var ret;\n\t        this.events.preGetErrorString.dispatch(\"GetErrorString\", [errorCode]);\n\t        ret = this.getErrorString(errorCode);\n\t        this.events.postGetLastError.dispatch(\"GetErrorString\", [errorCode], ret, this.error);\n\t        return ret;\n\t    };\n\t    Scorm2004Api.prototype.GetDiagnostic = function (errorCode) {\n\t        var ret;\n\t        this.events.preGetDiagnostic.dispatch(\"GetDiagnostic\", [errorCode]);\n\t        ret = this.getDiagnostic(errorCode);\n\t        this.events.postGetDiagnostic.dispatch(\"GetDiagnostic\", [errorCode], ret, this.error);\n\t        return ret;\n\t    };\n\t    return Scorm2004Api;\n\t}());\n\texports.Scorm2004Api = Scorm2004Api;\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar dm_1 = __webpack_require__(4);\n\tvar Scorm2004DataModel = (function (_super) {\n\t    __extends(Scorm2004DataModel, _super);\n\t    function Scorm2004DataModel() {\n\t        _super.apply(this, arguments);\n\t        this.successStatusChoices = [\"passed\", \"failed\", \"unknown\"];\n\t        this.completionStatusChoices = [\"not attempted\", \"completed\", \"incomplete\", \"unknown\"];\n\t        this.validElements = {\n\t            \"cmi._version\": { d: \"R\", t: \"Fixed\", v: \"2004 4th Edition\" },\n\t            \"cmi.completion_status\": { d: \"RW\", t: \"OneOf\", c: this.completionStatusChoices },\n\t            \"cmi.completion_threshold\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 1 },\n\t            \"cmi.credit\": { d: \"R\", t: \"OneOf\", c: [\"credit\", \"no-credit\"] },\n\t            \"cmi.entry\": { d: \"R\", t: \"OneOf\", c: [\"\", \"ab-initio\", \"resume\"] },\n\t            \"cmi.exit\": { d: \"W\", t: \"OneOf\", c: [\"\", \"time-out\", \"logout\", \"suspend\", \"normal\"] },\n\t            \"cmi.interactions._children\": { d: \"R\", t: \"Fixed\", v: \"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description\" },\n\t            \"cmi.interactions._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"cmi.objectives._children\": { d: \"R\", t: \"Fixed\", v: \"id,score,success_status,completion_status,description,progress_measure\" },\n\t            \"cmi.objectives._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"cmi.launch_data\": { d: \"R\", t: \"CMIString\", l: 4000 },\n\t            \"cmi.learner_id\": { d: \"R\", t: \"CMIString\", l: 4000 },\n\t            \"cmi.learner_name\": { d: \"R\", t: \"CMIString\", l: 250 },\n\t            \"cmi.learner_preference._children\": { d: \"R\", t: \"Fixed\", v: \"audio_level,language,delivery_speed,audio_captioning\" },\n\t            \"cmi.learner_preference.audio_level\": { d: \"RW\", t: \"CMIDecimal\" },\n\t            \"cmi.learner_preference.language\": { d: \"RW\", t: \"CMIString\", l: 250 },\n\t            \"cmi.learner_preference.delivery_speed\": { d: \"RW\", t: \"CMIDecimal\", min: 0 },\n\t            \"cmi.learner_preference.audio_captioning\": { d: \"RW\", t: \"OneOf\", c: [\"-1\", \"0\", \"1\"] },\n\t            \"cmi.location\": { d: \"RW\", t: \"CMIString\", l: 1000 },\n\t            \"cmi.max_time_allowed\": { d: \"R\", t: \"CMITimespan\" },\n\t            \"cmi.mode\": { d: \"R\", t: \"OneOf\", c: [\"browse\", \"normal\", \"review\"] },\n\t            \"cmi.progress_measure\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 1 },\n\t            \"cmi.scaled_passing_score\": { d: \"RW\", t: \"CMIDecimal\", min: -1, max: 1 },\n\t            \"cmi.score._children\": { d: \"R\", t: \"Fixed\", v: \"scaled,raw,min,max\" },\n\t            \"cmi.score.scaled\": { d: \"RW\", t: \"CMIDecimal\", min: -1, max: 1 },\n\t            \"cmi.score.max\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi.score.min\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi.score.raw\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi.session_time\": { d: \"W\", t: \"CMITimespan\" },\n\t            \"cmi.success_status\": { d: \"RW\", t: \"OneOf\", c: this.successStatusChoices },\n\t            \"cmi.suspend_data\": { d: \"RW\", t: \"CMIString\", l: 64000 },\n\t            \"cmi.time_limit_action\": { d: \"R\", t: \"OneOf\", c: [\"exit,message\", \"exit,no message\", \"continue,message\", \"continue,no message\"] },\n\t            \"cmi.total_time\": { d: \"R\", t: \"CMITimespan\" },\n\t            \"cmi._children\": { d: \"R\", t: \"Fixed\", v: \"_version,completion_status,completion_threshold,credit,entry,exit,interactions,objectives,launch_data,learner_id,learner_name,learner_preference,location,max_time_allowed,mode,progress_meausre,scaled_passing_score,score,session_time,success_status,suspend_data,time_limit_action,total_time\" },\n\t            \"cmi.comments_from_learner._children\": { d: \"R\", t: \"Fixed\", v: \"comment,location.timestamp\" },\n\t            \"cmi.comments_from_learner._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"cmi.comments_from_lms._children\": { d: \"R\", t: \"Fixed\", v: \"comment,location.timestamp\" },\n\t            \"cmi.comments_from_lms._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"adl.nav.request\": { d: \"R\", t: \"Fixed\", v: \"\" },\n\t            \"adl.nav.request_valid.continue\": { d: \"R\", t: \"Fixed\", v: \"true\" },\n\t            \"adl.nav.request_valid.previous\": { d: \"R\", t: \"Fixed\", v: \"true\" }\n\t        };\n\t        this.validRegexElements = {\n\t            \"cmi\\\\.comments_from_learner.\\\\d+\\\\.comment\": { d: \"RW\", t: \"CMIString\", l: 4000 },\n\t            \"cmi\\\\.comments_from_learner.\\\\d+\\\\.location\": { d: \"RW\", t: \"CMIString\", l: 250 },\n\t            \"cmi\\\\.comments_from_learner.\\\\d+\\\\.timestamp\": { d: \"RW\", t: \"CMITimespan\" },\n\t            \"cmi\\\\.comments_from_lms.\\\\d+\\\\.comment\": { d: \"R\", t: \"CMIString\", l: 4000 },\n\t            \"cmi\\\\.comments_from_lms.\\\\d+\\\\.location\": { d: \"R\", t: \"CMIString\", l: 250 },\n\t            \"cmi\\\\.comments_from_lms.\\\\d+\\\\.timestamp\": { d: \"R\", t: \"CMITimespan\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.id\": { d: \"W\", t: \"CMIIdentifier\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.type\": { d: \"W\", t: \"OneOf\", c: [\"true-false\", \"choice\", \"fill-in\", \"long-fill-in\", \"matching\", \"performance\", \"sequencing\", \"likert\", \"numeric\", \"other\"] },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.timestamp\": { d: \"W\", t: \"CMITime2004\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.weighting\": { d: \"W\", t: \"CMIDecimal\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.learner_response\": { d: \"W\", t: \"CMIFeedback\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.result\": { d: \"W\", t: \"CMIResult\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.latency\": { d: \"W\", t: \"CMITimespan\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.description\": { d: \"W\", t: \"CMIString\", l: 250 },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.objectives\\\\._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.objectives\\\\._children\": { d: \"R\", t: \"Fixed\", v: \"id\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.objectives.\\\\d+\\\\.id\": { d: \"W\", t: \"CMIIdentifier\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses\\\\._count\": { d: \"R\", t: \"CMIInteger\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses\\\\._children\": { d: \"R\", t: \"Fixed\", v: \"pattern\" },\n\t            \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses.\\\\d+\\\\.pattern\": { d: \"W\", t: \"CMIFeedback\" },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.id\": { d: \"RW\", t: \"CMIIdentifier\" },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\._children\": { d: \"R\", t: \"Fixed\", v: \"scaled,raw,min,max\" },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.scaled\": { d: \"RW\", t: \"CMIDecimal\", min: -1, max: 1 },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.raw\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.max\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.min\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100 },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.success_status\": { d: \"RW\", t: \"OneOf\", c: this.successStatusChoices },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.completion_status\": { d: \"RW\", t: \"OneOf\", c: this.completionStatusChoices },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.progress_measure\": { d: \"RW\", t: \"CMIDecimal\", min: 0, max: 1 },\n\t            \"cmi\\\\.objectives.\\\\d+\\\\.description\": { d: \"RW\", t: \"CMIString\", l: 250 },\n\t            \"adl.nav.request_valid.choice\\\\..+\": { d: \"R\", t: \"Fixed\", v: \"true\" }\n\t        };\n\t    }\n\t    Scorm2004DataModel.prototype.validateResult = function (value) {\n\t        var res = value.match(/^correct$|^incorrect$|^unanticipated$|^neutral$|^([0-9]{0,3})?(\\.[0-9]{1,7})?$/);\n\t        if (res && res.length) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    Scorm2004DataModel.prototype.validateTime = function (value) {\n\t        var res = value.match(/^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(\\.[0-9]{1,2})?$/);\n\t        if (res && res.length) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    Scorm2004DataModel.prototype.validateTimespan = function (value) {\n\t        var res = value.match(/^P(?=\\w*\\d)(?:\\d+Y|Y)?(?:\\d+M|M)?(?:\\d+D|D)?(?:T(?:\\d+H|H)?(?:\\d+M|M)?(?:\\d+(?:.\\d{1,2})?S|S)?)?$/);\n\t        if (res && res.length) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    return Scorm2004DataModel;\n\t}(dm_1.ScormBaseDataModel));\n\texports.Scorm2004DataModel = Scorm2004DataModel;\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar UrlVarService = (function () {\n\t    function UrlVarService() {\n\t    }\n\t    UrlVarService.get = function (key) {\n\t        if (!UrlVarService.parsed) {\n\t            var query = window.location.search.substring(1), vars = void 0, i = void 0;\n\t            UrlVarService.parsed = {};\n\t            vars = query.split('&');\n\t            for (i = 0; i < vars.length; i++) {\n\t                var pair = vars[i].split('=');\n\t                if (pair[0] !== \"\") {\n\t                    if (pair.length > 1) {\n\t                        UrlVarService.parsed[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n\t                    }\n\t                    else {\n\t                        UrlVarService.parsed[decodeURIComponent(pair[0])] = \"\";\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        if (key in UrlVarService.parsed) {\n\t            return UrlVarService.parsed[key];\n\t        }\n\t        return \"\";\n\t    };\n\t    UrlVarService.parsed = null;\n\t    return UrlVarService;\n\t}());\n\texports.UrlVarService = UrlVarService;\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar manifest_1 = __webpack_require__(12);\n\tvar Path = __webpack_require__(15);\n\tvar Storage = __webpack_require__(16);\n\tvar toc_1 = __webpack_require__(17);\n\tvar events_1 = __webpack_require__(19);\n\tvar scormlog_1 = __webpack_require__(21);\n\tvar aiccscript_parser_1 = __webpack_require__(13);\n\tvar url_1 = __webpack_require__(10);\n\texports.UrlVarService = url_1.UrlVarService;\n\tvar open_1 = __webpack_require__(22);\n\tvar render_1 = __webpack_require__(18);\n\tvar plugin_1 = __webpack_require__(23);\n\tvar ScormPlugin = (function (_super) {\n\t    __extends(ScormPlugin, _super);\n\t    function ScormPlugin() {\n\t        _super.call(this);\n\t        this.events = null;\n\t        this.config = null;\n\t        this.currentScoIndex = 0;\n\t        this.currentSco = null;\n\t        this.scosData = null;\n\t        this.toc = null;\n\t        this.events = new events_1.SSLAApiEvents();\n\t        this.events.statusChange.add(this.updateManifestSelectability, this);\n\t        this.scormLog = new scormlog_1.ScormLog(this.events);\n\t    }\n\t    ScormPlugin.prototype.loadSco = function (scoNav, scoIndex) {\n\t        this.endPreviousSco();\n\t        this.updateManifestSelectability();\n\t        this.initializeApi(scoNav);\n\t        this.currentScoIndex = scoIndex;\n\t        this.currentSco = scoNav;\n\t        this.toc.currentScoId = this.currentSco.identifier;\n\t        this.scosData.currentScoId = this.currentSco.identifier;\n\t        this.scosData.scos[this.currentSco.identifier].startViewing();\n\t        var launchUrl = this.manifest.scoLaunchUrl(scoNav);\n\t        open_1.openSco(Path.join([this.config.courseDirectory(), launchUrl]), this.config, this.manifest);\n\t        document.getElementById(\"prev\").disabled = (this.currentScoIndex === 0) ? true : false;\n\t        document.getElementById(\"next\").disabled = (this.manifest.navigableScoInOrderTraversal.length <= this.currentScoIndex + 1) ? true : false;\n\t        this.events.statusChange.dispatch(\"\");\n\t    };\n\t    ScormPlugin.prototype.loadScoByIndex = function (scoIndex) {\n\t        if (scoIndex < 0 || this.manifest.navigableScoInOrderTraversal.length <= scoIndex) {\n\t            return;\n\t        }\n\t        var scoNav = this.manifest.navigableScoInOrderTraversal[scoIndex];\n\t        this.loadSco(scoNav, scoIndex);\n\t    };\n\t    ScormPlugin.prototype.loadScoByIdentifier = function (scoId) {\n\t        var scoNav = this.manifest.scosByIdentifiers[scoId], scoIndex = -1, i;\n\t        for (i = 0; i < this.manifest.navigableScoInOrderTraversal.length; i++) {\n\t            if (this.manifest.navigableScoInOrderTraversal[i].identifier == scoNav.identifier) {\n\t                scoIndex = i;\n\t                break;\n\t            }\n\t        }\n\t        if (scoIndex === -1) {\n\t            alert(\"SCO not found.\");\n\t        }\n\t        this.loadSco(scoNav, scoIndex);\n\t    };\n\t    ScormPlugin.prototype.clearManifestAiccScriptParsers = function () {\n\t        var scos = this.manifest.navigableScoInOrderTraversal;\n\t        for (var i = 0; i < scos.length; i++) {\n\t            var scoNav = scos[i];\n\t            scoNav.aiccScriptParser = null;\n\t        }\n\t    };\n\t    ScormPlugin.prototype.performLayoutUpdate = function () {\n\t        if (this.config.layoutUpdater() != null) {\n\t            this.config.layoutUpdater()(this);\n\t        }\n\t        else {\n\t            this.standardLayoutUpdater();\n\t        }\n\t    };\n\t    ScormPlugin.prototype.setupNavigationType = function () {\n\t        var navigationType = this.config.navigationType();\n\t        var scos = this.manifest.navigableScoInOrderTraversal;\n\t        if (navigationType == \"\") {\n\t        }\n\t        else {\n\t            this.clearManifestAiccScriptParsers();\n\t            if (navigationType == \"lockstep\") {\n\t                for (var i = 1; i < scos.length; i++) {\n\t                    var scoNav = scos[i];\n\t                    var asp = new aiccscript_parser_1.AiccScript();\n\t                    asp.parse(scos[i - 1].identifier);\n\t                    scoNav.aiccScriptParser = asp;\n\t                }\n\t            }\n\t            else if (navigationType == \"examaftercontent\") {\n\t                var scoNav = scos[scos.length - 1];\n\t                var idents = [];\n\t                for (var i = 0; i < scos.length - 1; i++) {\n\t                    idents.push(scos[i].identifier);\n\t                }\n\t                var asp = new aiccscript_parser_1.AiccScript();\n\t                asp.parse(idents.join(\"&\"));\n\t                scoNav.aiccScriptParser = asp;\n\t            }\n\t            else if (navigationType == \"onlyonce\") {\n\t                for (var i = 0; i < scos.length; i++) {\n\t                    var scoNav = scos[i];\n\t                    var asp = new aiccscript_parser_1.AiccScript();\n\t                    asp.parse(scoNav.identifier + \"=n\");\n\t                    scoNav.aiccScriptParser = asp;\n\t                }\n\t            }\n\t            else {\n\t                alert(\"Unrecognized nagivationType: \" + navigationType);\n\t            }\n\t        }\n\t    };\n\t    ScormPlugin.prototype.standardLayoutUpdater = function () {\n\t        var body = document.body;\n\t        render_1.DomRender.removeClass(body, \"hide-menu\");\n\t        render_1.DomRender.removeClass(body, \"hide-toc\");\n\t        if (this.manifest.navigableScoInOrderTraversal.length == 1) {\n\t            if (this.config.singleScoView() == \"HIDE_ALL\" || this.config.singleScoView() == \"HIDE_NAV_BUTTONS\") {\n\t                render_1.DomRender.addClass(body, \"hide-menu\");\n\t            }\n\t            if (this.config.singleScoView() == \"HIDE_ALL\" || this.config.singleScoView() == \"HIDE_TREE\") {\n\t                render_1.DomRender.addClass(body, \"hide-toc\");\n\t            }\n\t        }\n\t    };\n\t    ScormPlugin.prototype.updateManifestSelectability = function () {\n\t        for (var i = 0; i < this.manifest.navigableScoInOrderTraversal.length; i++) {\n\t            var scoNav = this.manifest.navigableScoInOrderTraversal[i];\n\t            if (scoNav.aiccScriptParser != null) {\n\t                scoNav.isSelectable = scoNav.aiccScriptParser.evaluate(null, this.scosData);\n\t            }\n\t            this.toc.updateSelectability(scoNav);\n\t        }\n\t    };\n\t    ScormPlugin.prototype.onceLoaded = function () {\n\t        var i;\n\t        this.scosData.startViewing();\n\t        for (i in this.scosData.scos) {\n\t            this.toc.updateActivityStatus(i, this.scosData.scos[i].getStatus());\n\t        }\n\t        this.updateManifestSelectability();\n\t        if (this.config.returnToLastScoOnLaunch() && this.scosData.currentScoId && this.manifest.scosByIdentifiers[this.scosData.currentScoId]) {\n\t            this.loadScoByIdentifier(this.scosData.currentScoId);\n\t        }\n\t        else if (this.config.autoLaunchFirstSco()) {\n\t            this.loadScoByIndex(0);\n\t        }\n\t        window.DATA = this.scosData;\n\t    };\n\t    ScormPlugin.prototype.start = function () {\n\t        var p = document.getElementById(\"frame-here\");\n\t        var manifestLoaded;\n\t        var manifestParsed;\n\t        var tocHtml;\n\t        p.innerHTML = '<iframe id=\"jca_course_player\" name=\"jca_course_player\" frameborder=\"0\" width=\"100%\" height=\"100%\" src=\"blank.htm\" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>';\n\t        this.manifest = new manifest_1.Manifest();\n\t        if (this.config.scormManifestUseRawXml()) {\n\t            manifestLoaded = this.manifest.loadManifestFromString(this.config.scormManifestRawXml());\n\t        }\n\t        else {\n\t            manifestLoaded = this.manifest.loadManifestFromXmlDom(this.ctd.scormContents);\n\t        }\n\t        if (!manifestLoaded) {\n\t            alert(\"The manifest (\" + this.config.scormManifestFilename() + \") was not found or is unavailable.  Please check your settings and try again.  Reason: \" + this.manifest.lastError);\n\t            return;\n\t        }\n\t        manifestParsed = this.manifest.processManifest();\n\t        if (!manifestParsed) {\n\t            alert(\"The manifest did not parse correctly.  Reason: \" + this.manifest.lastError);\n\t            return;\n\t        }\n\t        this.setupNavigationType();\n\t        this.initializeScosData();\n\t        this.toc = new toc_1.TableOfContents(this.config, this.events);\n\t        tocHtml = this.toc.render(this.manifest.resourcesByIdentifierRef, this.manifest.itemTree);\n\t        document.getElementById(\"toc\").innerHTML = tocHtml;\n\t        this.performLayoutUpdate();\n\t        if (this.config.storageAdapter()) {\n\t            this.storage = new (this.config.storageAdapter())(this.config, this.scosData);\n\t        }\n\t        else {\n\t            this.storage = new Storage.AllInOneStorage(this.config, this.scosData);\n\t        }\n\t        this.storage.load({ callback: this.onceLoaded.bind(this) });\n\t    };\n\t    return ScormPlugin;\n\t}(plugin_1.SSLAPlugin));\n\texports.ScormPlugin = ScormPlugin;\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar aiccscript_parser_1 = __webpack_require__(13);\n\tvar Resource = (function () {\n\t    function Resource() {\n\t    }\n\t    return Resource;\n\t}());\n\texports.Resource = Resource;\n\tvar ScoNavItem = (function () {\n\t    function ScoNavItem() {\n\t        this.isSelectable = true;\n\t        this.isVisible = true;\n\t        this.parameters = \"\";\n\t        this.aiccScriptParser = null;\n\t    }\n\t    return ScoNavItem;\n\t}());\n\texports.ScoNavItem = ScoNavItem;\n\tvar Manifest = (function () {\n\t    function Manifest() {\n\t    }\n\t    Manifest.prototype.checkManifestProperty = function (base, property) {\n\t        var k;\n\t        if (base.hasOwnProperty(property) && base[property].length === 1) {\n\t            return true;\n\t        }\n\t        for (k in base) {\n\t            if (base.hasOwnProperty(k) && k.toLowerCase() === property.toLowerCase()) {\n\t                return base[k].length === 1;\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t    Manifest.prototype.getManifestProperty = function (base, property) {\n\t        var k;\n\t        if (base.hasOwnProperty(property) && base[property].length === 1) {\n\t            if (Object.prototype.toString.call(base[property][0]) == '[object Object]') {\n\t                return base[property][0][\"#text\"][0].replace(/^\\s+|\\s+$/gm, '');\n\t            }\n\t            return base[property][0].replace(/^\\s+|\\s+$/gm, '');\n\t        }\n\t        for (k in base) {\n\t            if (base.hasOwnProperty(k) && k.toLowerCase() === property.toLowerCase()) {\n\t                return base[k][0].replace(/^\\s+|\\s+$/gm, '');\n\t            }\n\t        }\n\t    };\n\t    Manifest.prototype.buildResources = function (resources) {\n\t        var i, res, buildResource;\n\t        this.resources = [];\n\t        this.resourcesByIdentifierRef = {};\n\t        if (resources.length > 0 && resources[0].hasOwnProperty('resource')) {\n\t            for (i = 0; i < resources[0]['resource'].length; i++) {\n\t                res = resources[0]['resource'][i];\n\t                buildResource = {};\n\t                this.resources.push(buildResource);\n\t                if (this.checkManifestProperty(res, 'identifier')) {\n\t                    buildResource['identifier'] = this.getManifestProperty(res, 'identifier');\n\t                    this.resourcesByIdentifierRef[buildResource['identifier']] = buildResource;\n\t                }\n\t                if (this.checkManifestProperty(res, 'href')) {\n\t                    buildResource['href'] = this.getManifestProperty(res, 'href');\n\t                }\n\t            }\n\t        }\n\t    };\n\t    Manifest.prototype.isSco = function (item) {\n\t        if (item.identifierRef) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    Manifest.prototype._buildScoTree = function (itemNode) {\n\t        var currentItem = new ScoNavItem(), i;\n\t        if (this.checkManifestProperty(itemNode, \"identifier\")) {\n\t            currentItem.identifier = this.getManifestProperty(itemNode, \"identifier\");\n\t            this.scosByIdentifiers[currentItem.identifier] = currentItem;\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"identifierref\")) {\n\t            currentItem.identifierRef = this.getManifestProperty(itemNode, \"identifierref\");\n\t            this.scosByIdentifierRefs[currentItem.identifierRef] = currentItem;\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"title\")) {\n\t            currentItem.title = this.getManifestProperty(itemNode, \"title\");\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"isvisible\")) {\n\t            currentItem.isVisible = this.getManifestProperty(itemNode, \"isvisible\") === \"false\" ? false : true;\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"parameters\")) {\n\t            currentItem.parameters = this.getManifestProperty(itemNode, \"parameters\");\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"adlcp:datafromlms\")) {\n\t            currentItem.dataFromLms = this.getManifestProperty(itemNode, \"adlcp:datafromlms\");\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"adlcp:masteryscore\")) {\n\t            currentItem.masteryScore = this.getManifestProperty(itemNode, \"adlcp:masteryscore\");\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"adlcp:timelimitaction\")) {\n\t            currentItem.timeLimitAction = this.getManifestProperty(itemNode, \"adlcp:timelimitaction\");\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"adlcp:maxtimeallowed\")) {\n\t            currentItem.maxTimeAllowed = this.getManifestProperty(itemNode, \"adlcp:maxtimeallowed\");\n\t        }\n\t        if (this.checkManifestProperty(itemNode, \"adlcp:prerequisites\")) {\n\t            currentItem.prerequisites = this.getManifestProperty(itemNode, \"adlcp:prerequisites\");\n\t            if (itemNode.hasOwnProperty(\"adlcp:prerequisites\") &&\n\t                itemNode[\"adlcp:prerequisites\"].length === 1 &&\n\t                Object.prototype.toString.call(itemNode[\"adlcp:prerequisites\"][0]) == '[object Object]' &&\n\t                itemNode[\"adlcp:prerequisites\"][0].hasOwnProperty(\"type\") &&\n\t                itemNode[\"adlcp:prerequisites\"][0].type == \"aicc_script\") {\n\t                var asp = new aiccscript_parser_1.AiccScript();\n\t                var parsed = asp.parse(currentItem.prerequisites);\n\t                if (parsed) {\n\t                    currentItem.aiccScriptParser = asp;\n\t                }\n\t            }\n\t        }\n\t        if (this.isSco(currentItem)) {\n\t            this.scoInOrderTraversal.push(currentItem);\n\t            if (currentItem.isVisible) {\n\t                this.navigableScoInOrderTraversal.push(currentItem);\n\t            }\n\t            if (!this.firstScoId) {\n\t                this.firstScoId = currentItem.identifier;\n\t            }\n\t        }\n\t        currentItem.children = [];\n\t        if (itemNode.hasOwnProperty(\"item\") && itemNode.item.length > 0) {\n\t            for (i = 0; i < itemNode.item.length; i++) {\n\t                currentItem.children.push(this._buildScoTree(itemNode.item[i]));\n\t            }\n\t        }\n\t        return currentItem;\n\t    };\n\t    Manifest.prototype.buildScoTree = function (itemNode) {\n\t        this.scosByIdentifiers = {};\n\t        this.scosByIdentifierRefs = {};\n\t        this.firstScoId = null;\n\t        this.scoInOrderTraversal = [];\n\t        this.navigableScoInOrderTraversal = [];\n\t        this.itemTree = this._buildScoTree(itemNode);\n\t    };\n\t    Manifest.prototype.loadManifestFromString = function (manifestStr) {\n\t        var px = new ParseXMLToObject.ParseXML();\n\t        px.setOutputArrayAll();\n\t        this.rawManifest = px.parseString(manifestStr);\n\t        if (!this.rawManifest) {\n\t            this.lastError = \"Unable to load manifest.\";\n\t            return false;\n\t        }\n\t        return true;\n\t    };\n\t    Manifest.prototype.loadManifestFromXmlDom = function (dom) {\n\t        var px = new ParseXMLToObject.ParseXML();\n\t        px.setOutputArrayAll();\n\t        this.rawManifest = px.parseDocument(dom.documentElement);\n\t        if (!this.rawManifest) {\n\t            this.lastError = \"Unable to load manifest.\";\n\t            return false;\n\t        }\n\t        return true;\n\t    };\n\t    Manifest.prototype.processManifest = function () {\n\t        var orgLen = 0;\n\t        this.processSchemaVersion(this.rawManifest);\n\t        if (this.schemaVersionMain !== \"1.2\" && this.schemaVersionMain !== \"2004\") {\n\t            this.lastError = \"Unsupported schemaversion: \" + this.schemaVersionMain;\n\t            return false;\n\t        }\n\t        if (!this.rawManifest.hasOwnProperty('manifest') || this.rawManifest['manifest'].length == 0) {\n\t            this.lastError = \"Invalid imsmanifest.xml, must be started with <manifest> tag\";\n\t            return false;\n\t        }\n\t        if (this.rawManifest['manifest'][0].hasOwnProperty('organizations') && this.rawManifest['manifest'][0]['organizations'].length > 0) {\n\t            if (this.rawManifest['manifest'][0]['organizations'][0].hasOwnProperty('organization')) {\n\t                orgLen = this.rawManifest['manifest'][0]['organizations'][0]['organization'].length;\n\t                if (orgLen > 1) {\n\t                    this.lastError = \"imsmanifest.xml parser does not currently support more than 1 <organization>.\";\n\t                    return false;\n\t                }\n\t                else if (orgLen == 1) {\n\t                    this.buildScoTree(this.rawManifest['manifest'][0]['organizations'][0]['organization'][0]);\n\t                }\n\t                else {\n\t                    this.lastError = \"imsmanifest.xml parser only found 0 <organization>s.\";\n\t                    return false;\n\t                }\n\t            }\n\t        }\n\t        if (this.rawManifest['manifest'][0].hasOwnProperty('resources')) {\n\t            this.buildResources(this.rawManifest['manifest'][0]['resources']);\n\t        }\n\t        return true;\n\t    };\n\t    Manifest.prototype.scoLaunchUrl = function (sco) {\n\t        var s = this.resourcesByIdentifierRef[sco.identifierRef].href;\n\t        if (sco.parameters !== \"\") {\n\t            var removePrefixes = /^[?&]*(.*)$/g;\n\t            var match = removePrefixes.exec(sco.parameters);\n\t            if (match.length == 0) {\n\t                return s;\n\t            }\n\t            var shorterParams = match[1];\n\t            if (shorterParams.indexOf(\"#\") !== -1) {\n\t                if (s.indexOf(\"#\") !== -1) {\n\t                    return s;\n\t                }\n\t                else {\n\t                    return s + shorterParams;\n\t                }\n\t            }\n\t            if (s.indexOf(\"?\") !== -1) {\n\t                s += \"&\";\n\t            }\n\t            else {\n\t                s += \"?\";\n\t            }\n\t            s += shorterParams;\n\t        }\n\t        return s;\n\t    };\n\t    Manifest.prototype.processSchemaVersion = function (obj) {\n\t        var schema = this.findSchemaVersion(this.rawManifest);\n\t        if (schema == \"1.2\") {\n\t            this.schemaVersionMain = \"1.2\";\n\t        }\n\t        else if (schema === \"CAM 1.3\") {\n\t            this.schemaVersionMain = \"2004\";\n\t            this.schemaVersionSub = \"2\";\n\t        }\n\t        else if (schema === \"2004 3rd Edition\") {\n\t            this.schemaVersionMain = \"2004\";\n\t            this.schemaVersionSub = \"3\";\n\t        }\n\t        else if (schema === \"2004 4th Edition\") {\n\t            this.schemaVersionMain = \"2004\";\n\t            this.schemaVersionSub = \"4\";\n\t        }\n\t        else {\n\t            if (this.traverseForProperty(this.rawManifest, \"adlcp:scormtype\")) {\n\t                this.schemaVersionMain = \"1.2\";\n\t            }\n\t            else if (this.traverseForProperty(this.rawManifest, \"adlcp:scormType\")) {\n\t                this.schemaVersionMain = \"2004\";\n\t                this.schemaVersionSub = \"3\";\n\t            }\n\t        }\n\t    };\n\t    Manifest.prototype.traverseForProperty = function (obj, propertyToFind) {\n\t        var i, v;\n\t        for (var property in obj) {\n\t            if (obj.hasOwnProperty(property)) {\n\t                if (property === propertyToFind) {\n\t                    return obj[property][0];\n\t                }\n\t                if (Object.prototype.toString.call(obj[property]) === \"[object Array]\") {\n\t                    for (i = 0; i < obj[property].length; i++) {\n\t                        v = this.traverseForProperty(obj[property][i], propertyToFind);\n\t                        if (v) {\n\t                            return v;\n\t                        }\n\t                    }\n\t                }\n\t                else if (typeof obj[property] == \"object\") {\n\t                    v = this.traverseForProperty(obj[property], propertyToFind);\n\t                    if (v) {\n\t                        return v;\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    Manifest.prototype.findSchemaVersion = function (obj) {\n\t        var i, v;\n\t        for (var property in obj) {\n\t            if (obj.hasOwnProperty(property)) {\n\t                if (property.toLowerCase() === \"schemaversion\" &&\n\t                    Object.prototype.toString.call(obj[property]) === \"[object Array]\" &&\n\t                    obj[property].length > 0) {\n\t                    return obj[property][0];\n\t                }\n\t                if (Object.prototype.toString.call(obj[property]) === \"[object Array]\") {\n\t                    for (i = 0; i < obj[property].length; i++) {\n\t                        v = this.findSchemaVersion(obj[property][i]);\n\t                        if (v) {\n\t                            return v;\n\t                        }\n\t                    }\n\t                }\n\t                else if (typeof obj[property] == \"object\") {\n\t                    v = this.findSchemaVersion(obj[property]);\n\t                    if (v) {\n\t                        return v;\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    return Manifest;\n\t}());\n\texports.Manifest = Manifest;\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar aiccscript_1 = __webpack_require__(14);\n\tvar AiccScript = (function () {\n\t    function AiccScript() {\n\t        this.tree = null;\n\t    }\n\t    AiccScript.prototype.parse = function (s) {\n\t        try {\n\t            this.tree = aiccscript_1.parse(s);\n\t        }\n\t        catch (e) {\n\t            console.log(\"exception\", e);\n\t            return false;\n\t        }\n\t        return true;\n\t    };\n\t    AiccScript.prototype.lookupContext = function (context, key) {\n\t        if (context.scos[key]) {\n\t            return context.scos[key].getStatus();\n\t        }\n\t        alert(\"Context unavailable for SCO: \" + key);\n\t        return \"\";\n\t    };\n\t    AiccScript.prototype.evaluate = function (currentNode, context) {\n\t        if (currentNode == null) {\n\t            currentNode = this.tree;\n\t        }\n\t        if (Object.prototype.toString.call(currentNode) == '[object String]') {\n\t            var status = this.lookupContext(context, currentNode);\n\t            if (status == \"passed\" || status == \"completed\") {\n\t                return true;\n\t            }\n\t            return false;\n\t        }\n\t        else if (currentNode.op == \"&\") {\n\t            return this.evaluate(currentNode.left, context) && this.evaluate(currentNode.right, context);\n\t        }\n\t        else if (currentNode.op == \"|\") {\n\t            return this.evaluate(currentNode.left, context) || this.evaluate(currentNode.right, context);\n\t        }\n\t        else if (currentNode.op == \"=\") {\n\t            return this.lookupContext(context, currentNode.left) == currentNode.right;\n\t        }\n\t        else if (currentNode.op == \"<>\") {\n\t            return this.lookupContext(context, currentNode.left) != currentNode.right;\n\t        }\n\t        else if (currentNode.op == \"~\") {\n\t            return !this.evaluate(currentNode.left, context);\n\t        }\n\t        else if (currentNode.op == \"set\") {\n\t            var counter = 0;\n\t            for (var i = 0; i < currentNode.set.length; i++) {\n\t                if (this.evaluate(currentNode.set[i], context)) {\n\t                    counter += 1;\n\t                }\n\t            }\n\t            if (currentNode.times) {\n\t                return counter >= currentNode.times;\n\t            }\n\t            return counter == currentNode.set.length;\n\t        }\n\t        alert(\"Unrecognized operator: \" + currentNode.op);\n\t        return false;\n\t    };\n\t    return AiccScript;\n\t}());\n\texports.AiccScript = AiccScript;\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = (function() {\n\t  \"use strict\";\n\t\n\t  /*\n\t   * Generated by PEG.js 0.9.0.\n\t   *\n\t   * http://pegjs.org/\n\t   */\n\t\n\t  function peg$subclass(child, parent) {\n\t    function ctor() { this.constructor = child; }\n\t    ctor.prototype = parent.prototype;\n\t    child.prototype = new ctor();\n\t  }\n\t\n\t  function peg$SyntaxError(message, expected, found, location) {\n\t    this.message  = message;\n\t    this.expected = expected;\n\t    this.found    = found;\n\t    this.location = location;\n\t    this.name     = \"SyntaxError\";\n\t\n\t    if (typeof Error.captureStackTrace === \"function\") {\n\t      Error.captureStackTrace(this, peg$SyntaxError);\n\t    }\n\t  }\n\t\n\t  peg$subclass(peg$SyntaxError, Error);\n\t\n\t  function peg$parse(input) {\n\t    var options = arguments.length > 1 ? arguments[1] : {},\n\t\n\t        peg$FAILED = {},\n\t\n\t        peg$startRuleFunctions = { Program: peg$parseProgram },\n\t        peg$startRuleFunction  = peg$parseProgram,\n\t\n\t        peg$c0 = function(rest, v) {\n\t            return leftAssoc(rest, v);\n\t          },\n\t        peg$c1 = \"(\",\n\t        peg$c2 = { type: \"literal\", value: \"(\", description: \"\\\"(\\\"\" },\n\t        peg$c3 = \")\",\n\t        peg$c4 = { type: \"literal\", value: \")\", description: \"\\\")\\\"\" },\n\t        peg$c5 = function(expr) { return expr; },\n\t        peg$c6 = \"=\",\n\t        peg$c7 = { type: \"literal\", value: \"=\", description: \"\\\"=\\\"\" },\n\t        peg$c8 = function(el, status) { return {left: el, op: \"=\", right: status}; },\n\t        peg$c9 = \"<>\",\n\t        peg$c10 = { type: \"literal\", value: \"<>\", description: \"\\\"<>\\\"\" },\n\t        peg$c11 = function(el, status) { return {left: el, op: \"<>\", right: status}; },\n\t        peg$c12 = \"~\",\n\t        peg$c13 = { type: \"literal\", value: \"~\", description: \"\\\"~\\\"\" },\n\t        peg$c14 = function(neg) { return {op: \"~\", left: neg}; },\n\t        peg$c15 = function(times, set) { return {op: \"set\", times: times, set: set}; },\n\t        peg$c16 = \"*\",\n\t        peg$c17 = { type: \"literal\", value: \"*\", description: \"\\\"*\\\"\" },\n\t        peg$c18 = function(times) { return times; },\n\t        peg$c19 = \"{\",\n\t        peg$c20 = { type: \"literal\", value: \"{\", description: \"\\\"{\\\"\" },\n\t        peg$c21 = \",\",\n\t        peg$c22 = { type: \"literal\", value: \",\", description: \"\\\",\\\"\" },\n\t        peg$c23 = \"}\",\n\t        peg$c24 = { type: \"literal\", value: \"}\", description: \"\\\"}\\\"\" },\n\t        peg$c25 = function(head, tail) {\n\t            var i = 0, a = [head];\n\t            for (i=0; i < tail.length; i++) {\n\t              a.push(tail[i][2]);\n\t            }\n\t            return a;\n\t          },\n\t        peg$c26 = /^[0-9]/,\n\t        peg$c27 = { type: \"class\", value: \"[0-9]\", description: \"[0-9]\" },\n\t        peg$c28 = function() { return parseInt(text(), 10); },\n\t        peg$c29 = /^[a-zA-Z0-9]/,\n\t        peg$c30 = { type: \"class\", value: \"[a-zA-Z0-9]\", description: \"[a-zA-Z0-9]\" },\n\t        peg$c31 = \"&\",\n\t        peg$c32 = { type: \"literal\", value: \"&\", description: \"\\\"&\\\"\" },\n\t        peg$c33 = \"|\",\n\t        peg$c34 = { type: \"literal\", value: \"|\", description: \"\\\"|\\\"\" },\n\t        peg$c35 = function(operator) { return operator; },\n\t        peg$c36 = \"p\",\n\t        peg$c37 = { type: \"literal\", value: \"p\", description: \"\\\"p\\\"\" },\n\t        peg$c38 = \"assed\",\n\t        peg$c39 = { type: \"literal\", value: \"assed\", description: \"\\\"assed\\\"\" },\n\t        peg$c40 = function() { return \"passed\" },\n\t        peg$c41 = \"c\",\n\t        peg$c42 = { type: \"literal\", value: \"c\", description: \"\\\"c\\\"\" },\n\t        peg$c43 = \"ompleted\",\n\t        peg$c44 = { type: \"literal\", value: \"ompleted\", description: \"\\\"ompleted\\\"\" },\n\t        peg$c45 = function() { return \"completed\" },\n\t        peg$c46 = \"f\",\n\t        peg$c47 = { type: \"literal\", value: \"f\", description: \"\\\"f\\\"\" },\n\t        peg$c48 = \"ailed\",\n\t        peg$c49 = { type: \"literal\", value: \"ailed\", description: \"\\\"ailed\\\"\" },\n\t        peg$c50 = function() { return \"failed\" },\n\t        peg$c51 = \"i\",\n\t        peg$c52 = { type: \"literal\", value: \"i\", description: \"\\\"i\\\"\" },\n\t        peg$c53 = \"ncomplete\",\n\t        peg$c54 = { type: \"literal\", value: \"ncomplete\", description: \"\\\"ncomplete\\\"\" },\n\t        peg$c55 = function() { return \"incomplete\" },\n\t        peg$c56 = \"b\",\n\t        peg$c57 = { type: \"literal\", value: \"b\", description: \"\\\"b\\\"\" },\n\t        peg$c58 = \"rowsed\",\n\t        peg$c59 = { type: \"literal\", value: \"rowsed\", description: \"\\\"rowsed\\\"\" },\n\t        peg$c60 = function() { return \"browsed\" },\n\t        peg$c61 = \"n\",\n\t        peg$c62 = { type: \"literal\", value: \"n\", description: \"\\\"n\\\"\" },\n\t        peg$c63 = \"ot attempted\",\n\t        peg$c64 = { type: \"literal\", value: \"ot attempted\", description: \"\\\"ot attempted\\\"\" },\n\t        peg$c65 = function() { return \"not attempted\" },\n\t        peg$c66 = { type: \"other\", description: \"whitespace\" },\n\t        peg$c67 = /^[ \\t\\n\\r]/,\n\t        peg$c68 = { type: \"class\", value: \"[ \\\\t\\\\n\\\\r]\", description: \"[ \\\\t\\\\n\\\\r]\" },\n\t\n\t        peg$currPos          = 0,\n\t        peg$savedPos         = 0,\n\t        peg$posDetailsCache  = [{ line: 1, column: 1, seenCR: false }],\n\t        peg$maxFailPos       = 0,\n\t        peg$maxFailExpected  = [],\n\t        peg$silentFails      = 0,\n\t\n\t        peg$result;\n\t\n\t    if (\"startRule\" in options) {\n\t      if (!(options.startRule in peg$startRuleFunctions)) {\n\t        throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n\t      }\n\t\n\t      peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n\t    }\n\t\n\t    function text() {\n\t      return input.substring(peg$savedPos, peg$currPos);\n\t    }\n\t\n\t    function peg$computePosDetails(pos) {\n\t      var details = peg$posDetailsCache[pos],\n\t          p, ch;\n\t\n\t      if (details) {\n\t        return details;\n\t      } else {\n\t        p = pos - 1;\n\t        while (!peg$posDetailsCache[p]) {\n\t          p--;\n\t        }\n\t\n\t        details = peg$posDetailsCache[p];\n\t        details = {\n\t          line:   details.line,\n\t          column: details.column,\n\t          seenCR: details.seenCR\n\t        };\n\t\n\t        while (p < pos) {\n\t          ch = input.charAt(p);\n\t          if (ch === \"\\n\") {\n\t            if (!details.seenCR) { details.line++; }\n\t            details.column = 1;\n\t            details.seenCR = false;\n\t          } else if (ch === \"\\r\" || ch === \"\\u2028\" || ch === \"\\u2029\") {\n\t            details.line++;\n\t            details.column = 1;\n\t            details.seenCR = true;\n\t          } else {\n\t            details.column++;\n\t            details.seenCR = false;\n\t          }\n\t\n\t          p++;\n\t        }\n\t\n\t        peg$posDetailsCache[pos] = details;\n\t        return details;\n\t      }\n\t    }\n\t\n\t    function peg$computeLocation(startPos, endPos) {\n\t      var startPosDetails = peg$computePosDetails(startPos),\n\t          endPosDetails   = peg$computePosDetails(endPos);\n\t\n\t      return {\n\t        start: {\n\t          offset: startPos,\n\t          line:   startPosDetails.line,\n\t          column: startPosDetails.column\n\t        },\n\t        end: {\n\t          offset: endPos,\n\t          line:   endPosDetails.line,\n\t          column: endPosDetails.column\n\t        }\n\t      };\n\t    }\n\t\n\t    function peg$fail(expected) {\n\t      if (peg$currPos < peg$maxFailPos) { return; }\n\t\n\t      if (peg$currPos > peg$maxFailPos) {\n\t        peg$maxFailPos = peg$currPos;\n\t        peg$maxFailExpected = [];\n\t      }\n\t\n\t      peg$maxFailExpected.push(expected);\n\t    }\n\t\n\t    function peg$buildException(message, expected, found, location) {\n\t      function cleanupExpected(expected) {\n\t        var i = 1;\n\t\n\t        expected.sort(function(a, b) {\n\t          if (a.description < b.description) {\n\t            return -1;\n\t          } else if (a.description > b.description) {\n\t            return 1;\n\t          } else {\n\t            return 0;\n\t          }\n\t        });\n\t\n\t        while (i < expected.length) {\n\t          if (expected[i - 1] === expected[i]) {\n\t            expected.splice(i, 1);\n\t          } else {\n\t            i++;\n\t          }\n\t        }\n\t      }\n\t\n\t      function buildMessage(expected, found) {\n\t        function stringEscape(s) {\n\t          function hex(ch) { return ch.charCodeAt(0).toString(16).toUpperCase(); }\n\t\n\t          return s\n\t            .replace(/\\\\/g,   '\\\\\\\\')\n\t            .replace(/\"/g,    '\\\\\"')\n\t            .replace(/\\x08/g, '\\\\b')\n\t            .replace(/\\t/g,   '\\\\t')\n\t            .replace(/\\n/g,   '\\\\n')\n\t            .replace(/\\f/g,   '\\\\f')\n\t            .replace(/\\r/g,   '\\\\r')\n\t            .replace(/[\\x00-\\x07\\x0B\\x0E\\x0F]/g, function(ch) { return '\\\\x0' + hex(ch); })\n\t            .replace(/[\\x10-\\x1F\\x80-\\xFF]/g,    function(ch) { return '\\\\x'  + hex(ch); })\n\t            .replace(/[\\u0100-\\u0FFF]/g,         function(ch) { return '\\\\u0' + hex(ch); })\n\t            .replace(/[\\u1000-\\uFFFF]/g,         function(ch) { return '\\\\u'  + hex(ch); });\n\t        }\n\t\n\t        var expectedDescs = new Array(expected.length),\n\t            expectedDesc, foundDesc, i;\n\t\n\t        for (i = 0; i < expected.length; i++) {\n\t          expectedDescs[i] = expected[i].description;\n\t        }\n\t\n\t        expectedDesc = expected.length > 1\n\t          ? expectedDescs.slice(0, -1).join(\", \")\n\t              + \" or \"\n\t              + expectedDescs[expected.length - 1]\n\t          : expectedDescs[0];\n\t\n\t        foundDesc = found ? \"\\\"\" + stringEscape(found) + \"\\\"\" : \"end of input\";\n\t\n\t        return \"Expected \" + expectedDesc + \" but \" + foundDesc + \" found.\";\n\t      }\n\t\n\t      if (expected !== null) {\n\t        cleanupExpected(expected);\n\t      }\n\t\n\t      return new peg$SyntaxError(\n\t        message !== null ? message : buildMessage(expected, found),\n\t        expected,\n\t        found,\n\t        location\n\t      );\n\t    }\n\t\n\t    function peg$parseProgram() {\n\t      var s0;\n\t\n\t      s0 = peg$parseE1();\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseE1() {\n\t      var s0, s1, s2, s3, s4;\n\t\n\t      s0 = peg$currPos;\n\t      s1 = [];\n\t      s2 = peg$currPos;\n\t      s3 = peg$parseE2();\n\t      if (s3 !== peg$FAILED) {\n\t        s4 = peg$parseAndOrOperator();\n\t        if (s4 !== peg$FAILED) {\n\t          s3 = [s3, s4];\n\t          s2 = s3;\n\t        } else {\n\t          peg$currPos = s2;\n\t          s2 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s2;\n\t        s2 = peg$FAILED;\n\t      }\n\t      while (s2 !== peg$FAILED) {\n\t        s1.push(s2);\n\t        s2 = peg$currPos;\n\t        s3 = peg$parseE2();\n\t        if (s3 !== peg$FAILED) {\n\t          s4 = peg$parseAndOrOperator();\n\t          if (s4 !== peg$FAILED) {\n\t            s3 = [s3, s4];\n\t            s2 = s3;\n\t          } else {\n\t            peg$currPos = s2;\n\t            s2 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s2;\n\t          s2 = peg$FAILED;\n\t        }\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        s2 = peg$parse_();\n\t        if (s2 !== peg$FAILED) {\n\t          s3 = peg$parseE2();\n\t          if (s3 !== peg$FAILED) {\n\t            peg$savedPos = s0;\n\t            s1 = peg$c0(s1, s3);\n\t            s0 = s1;\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseE2() {\n\t      var s0;\n\t\n\t      s0 = peg$parseEquals();\n\t      if (s0 === peg$FAILED) {\n\t        s0 = peg$parseNotEquals();\n\t        if (s0 === peg$FAILED) {\n\t          s0 = peg$parseParens();\n\t          if (s0 === peg$FAILED) {\n\t            s0 = peg$parseOutOfSet();\n\t            if (s0 === peg$FAILED) {\n\t              s0 = peg$parseNeg();\n\t              if (s0 === peg$FAILED) {\n\t                s0 = peg$parseCourseElement();\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseParens() {\n\t      var s0, s1, s2, s3, s4, s5;\n\t\n\t      s0 = peg$currPos;\n\t      if (input.charCodeAt(peg$currPos) === 40) {\n\t        s1 = peg$c1;\n\t        peg$currPos++;\n\t      } else {\n\t        s1 = peg$FAILED;\n\t        if (peg$silentFails === 0) { peg$fail(peg$c2); }\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        s2 = peg$parse_();\n\t        if (s2 !== peg$FAILED) {\n\t          s3 = peg$parseE1();\n\t          if (s3 !== peg$FAILED) {\n\t            s4 = peg$parse_();\n\t            if (s4 !== peg$FAILED) {\n\t              if (input.charCodeAt(peg$currPos) === 41) {\n\t                s5 = peg$c3;\n\t                peg$currPos++;\n\t              } else {\n\t                s5 = peg$FAILED;\n\t                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n\t              }\n\t              if (s5 !== peg$FAILED) {\n\t                peg$savedPos = s0;\n\t                s1 = peg$c5(s3);\n\t                s0 = s1;\n\t              } else {\n\t                peg$currPos = s0;\n\t                s0 = peg$FAILED;\n\t              }\n\t            } else {\n\t              peg$currPos = s0;\n\t              s0 = peg$FAILED;\n\t            }\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseEquals() {\n\t      var s0, s1, s2, s3, s4, s5;\n\t\n\t      s0 = peg$currPos;\n\t      s1 = peg$parseCourseElement();\n\t      if (s1 !== peg$FAILED) {\n\t        s2 = peg$parse_();\n\t        if (s2 !== peg$FAILED) {\n\t          if (input.charCodeAt(peg$currPos) === 61) {\n\t            s3 = peg$c6;\n\t            peg$currPos++;\n\t          } else {\n\t            s3 = peg$FAILED;\n\t            if (peg$silentFails === 0) { peg$fail(peg$c7); }\n\t          }\n\t          if (s3 !== peg$FAILED) {\n\t            s4 = peg$parse_();\n\t            if (s4 !== peg$FAILED) {\n\t              s5 = peg$parseStatus();\n\t              if (s5 !== peg$FAILED) {\n\t                peg$savedPos = s0;\n\t                s1 = peg$c8(s1, s5);\n\t                s0 = s1;\n\t              } else {\n\t                peg$currPos = s0;\n\t                s0 = peg$FAILED;\n\t              }\n\t            } else {\n\t              peg$currPos = s0;\n\t              s0 = peg$FAILED;\n\t            }\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseNotEquals() {\n\t      var s0, s1, s2, s3, s4, s5;\n\t\n\t      s0 = peg$currPos;\n\t      s1 = peg$parseCourseElement();\n\t      if (s1 !== peg$FAILED) {\n\t        s2 = peg$parse_();\n\t        if (s2 !== peg$FAILED) {\n\t          if (input.substr(peg$currPos, 2) === peg$c9) {\n\t            s3 = peg$c9;\n\t            peg$currPos += 2;\n\t          } else {\n\t            s3 = peg$FAILED;\n\t            if (peg$silentFails === 0) { peg$fail(peg$c10); }\n\t          }\n\t          if (s3 !== peg$FAILED) {\n\t            s4 = peg$parse_();\n\t            if (s4 !== peg$FAILED) {\n\t              s5 = peg$parseStatus();\n\t              if (s5 !== peg$FAILED) {\n\t                peg$savedPos = s0;\n\t                s1 = peg$c11(s1, s5);\n\t                s0 = s1;\n\t              } else {\n\t                peg$currPos = s0;\n\t                s0 = peg$FAILED;\n\t              }\n\t            } else {\n\t              peg$currPos = s0;\n\t              s0 = peg$FAILED;\n\t            }\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseNeg() {\n\t      var s0, s1, s2, s3;\n\t\n\t      s0 = peg$currPos;\n\t      if (input.charCodeAt(peg$currPos) === 126) {\n\t        s1 = peg$c12;\n\t        peg$currPos++;\n\t      } else {\n\t        s1 = peg$FAILED;\n\t        if (peg$silentFails === 0) { peg$fail(peg$c13); }\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        s2 = peg$parse_();\n\t        if (s2 !== peg$FAILED) {\n\t          s3 = peg$parseE2();\n\t          if (s3 !== peg$FAILED) {\n\t            peg$savedPos = s0;\n\t            s1 = peg$c14(s3);\n\t            s0 = s1;\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseOutOfSet() {\n\t      var s0, s1, s2;\n\t\n\t      s0 = peg$currPos;\n\t      s1 = peg$parseOutOfSetTimes();\n\t      if (s1 === peg$FAILED) {\n\t        s1 = null;\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        s2 = peg$parseSet();\n\t        if (s2 !== peg$FAILED) {\n\t          peg$savedPos = s0;\n\t          s1 = peg$c15(s1, s2);\n\t          s0 = s1;\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseOutOfSetTimes() {\n\t      var s0, s1, s2, s3, s4;\n\t\n\t      s0 = peg$currPos;\n\t      s1 = peg$parseInteger();\n\t      if (s1 !== peg$FAILED) {\n\t        s2 = peg$parse_();\n\t        if (s2 !== peg$FAILED) {\n\t          if (input.charCodeAt(peg$currPos) === 42) {\n\t            s3 = peg$c16;\n\t            peg$currPos++;\n\t          } else {\n\t            s3 = peg$FAILED;\n\t            if (peg$silentFails === 0) { peg$fail(peg$c17); }\n\t          }\n\t          if (s3 !== peg$FAILED) {\n\t            s4 = peg$parse_();\n\t            if (s4 !== peg$FAILED) {\n\t              peg$savedPos = s0;\n\t              s1 = peg$c18(s1);\n\t              s0 = s1;\n\t            } else {\n\t              peg$currPos = s0;\n\t              s0 = peg$FAILED;\n\t            }\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseSet() {\n\t      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\t\n\t      s0 = peg$currPos;\n\t      if (input.charCodeAt(peg$currPos) === 123) {\n\t        s1 = peg$c19;\n\t        peg$currPos++;\n\t      } else {\n\t        s1 = peg$FAILED;\n\t        if (peg$silentFails === 0) { peg$fail(peg$c20); }\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        s2 = peg$parse_();\n\t        if (s2 !== peg$FAILED) {\n\t          s3 = peg$parseEquals();\n\t          if (s3 === peg$FAILED) {\n\t            s3 = peg$parseNotEquals();\n\t            if (s3 === peg$FAILED) {\n\t              s3 = peg$parseCourseElement();\n\t            }\n\t          }\n\t          if (s3 !== peg$FAILED) {\n\t            s4 = peg$parse_();\n\t            if (s4 !== peg$FAILED) {\n\t              s5 = [];\n\t              s6 = peg$currPos;\n\t              if (input.charCodeAt(peg$currPos) === 44) {\n\t                s7 = peg$c21;\n\t                peg$currPos++;\n\t              } else {\n\t                s7 = peg$FAILED;\n\t                if (peg$silentFails === 0) { peg$fail(peg$c22); }\n\t              }\n\t              if (s7 !== peg$FAILED) {\n\t                s8 = peg$parse_();\n\t                if (s8 !== peg$FAILED) {\n\t                  s9 = peg$parseEquals();\n\t                  if (s9 === peg$FAILED) {\n\t                    s9 = peg$parseNotEquals();\n\t                    if (s9 === peg$FAILED) {\n\t                      s9 = peg$parseCourseElement();\n\t                    }\n\t                  }\n\t                  if (s9 !== peg$FAILED) {\n\t                    s7 = [s7, s8, s9];\n\t                    s6 = s7;\n\t                  } else {\n\t                    peg$currPos = s6;\n\t                    s6 = peg$FAILED;\n\t                  }\n\t                } else {\n\t                  peg$currPos = s6;\n\t                  s6 = peg$FAILED;\n\t                }\n\t              } else {\n\t                peg$currPos = s6;\n\t                s6 = peg$FAILED;\n\t              }\n\t              while (s6 !== peg$FAILED) {\n\t                s5.push(s6);\n\t                s6 = peg$currPos;\n\t                if (input.charCodeAt(peg$currPos) === 44) {\n\t                  s7 = peg$c21;\n\t                  peg$currPos++;\n\t                } else {\n\t                  s7 = peg$FAILED;\n\t                  if (peg$silentFails === 0) { peg$fail(peg$c22); }\n\t                }\n\t                if (s7 !== peg$FAILED) {\n\t                  s8 = peg$parse_();\n\t                  if (s8 !== peg$FAILED) {\n\t                    s9 = peg$parseEquals();\n\t                    if (s9 === peg$FAILED) {\n\t                      s9 = peg$parseNotEquals();\n\t                      if (s9 === peg$FAILED) {\n\t                        s9 = peg$parseCourseElement();\n\t                      }\n\t                    }\n\t                    if (s9 !== peg$FAILED) {\n\t                      s7 = [s7, s8, s9];\n\t                      s6 = s7;\n\t                    } else {\n\t                      peg$currPos = s6;\n\t                      s6 = peg$FAILED;\n\t                    }\n\t                  } else {\n\t                    peg$currPos = s6;\n\t                    s6 = peg$FAILED;\n\t                  }\n\t                } else {\n\t                  peg$currPos = s6;\n\t                  s6 = peg$FAILED;\n\t                }\n\t              }\n\t              if (s5 !== peg$FAILED) {\n\t                s6 = peg$parse_();\n\t                if (s6 !== peg$FAILED) {\n\t                  if (input.charCodeAt(peg$currPos) === 125) {\n\t                    s7 = peg$c23;\n\t                    peg$currPos++;\n\t                  } else {\n\t                    s7 = peg$FAILED;\n\t                    if (peg$silentFails === 0) { peg$fail(peg$c24); }\n\t                  }\n\t                  if (s7 !== peg$FAILED) {\n\t                    peg$savedPos = s0;\n\t                    s1 = peg$c25(s3, s5);\n\t                    s0 = s1;\n\t                  } else {\n\t                    peg$currPos = s0;\n\t                    s0 = peg$FAILED;\n\t                  }\n\t                } else {\n\t                  peg$currPos = s0;\n\t                  s0 = peg$FAILED;\n\t                }\n\t              } else {\n\t                peg$currPos = s0;\n\t                s0 = peg$FAILED;\n\t              }\n\t            } else {\n\t              peg$currPos = s0;\n\t              s0 = peg$FAILED;\n\t            }\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseInteger() {\n\t      var s0, s1, s2;\n\t\n\t      s0 = peg$currPos;\n\t      s1 = [];\n\t      if (peg$c26.test(input.charAt(peg$currPos))) {\n\t        s2 = input.charAt(peg$currPos);\n\t        peg$currPos++;\n\t      } else {\n\t        s2 = peg$FAILED;\n\t        if (peg$silentFails === 0) { peg$fail(peg$c27); }\n\t      }\n\t      if (s2 !== peg$FAILED) {\n\t        while (s2 !== peg$FAILED) {\n\t          s1.push(s2);\n\t          if (peg$c26.test(input.charAt(peg$currPos))) {\n\t            s2 = input.charAt(peg$currPos);\n\t            peg$currPos++;\n\t          } else {\n\t            s2 = peg$FAILED;\n\t            if (peg$silentFails === 0) { peg$fail(peg$c27); }\n\t          }\n\t        }\n\t      } else {\n\t        s1 = peg$FAILED;\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        peg$savedPos = s0;\n\t        s1 = peg$c28();\n\t      }\n\t      s0 = s1;\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseCourseElement() {\n\t      var s0, s1, s2;\n\t\n\t      s0 = peg$currPos;\n\t      s1 = [];\n\t      if (peg$c29.test(input.charAt(peg$currPos))) {\n\t        s2 = input.charAt(peg$currPos);\n\t        peg$currPos++;\n\t      } else {\n\t        s2 = peg$FAILED;\n\t        if (peg$silentFails === 0) { peg$fail(peg$c30); }\n\t      }\n\t      if (s2 !== peg$FAILED) {\n\t        while (s2 !== peg$FAILED) {\n\t          s1.push(s2);\n\t          if (peg$c29.test(input.charAt(peg$currPos))) {\n\t            s2 = input.charAt(peg$currPos);\n\t            peg$currPos++;\n\t          } else {\n\t            s2 = peg$FAILED;\n\t            if (peg$silentFails === 0) { peg$fail(peg$c30); }\n\t          }\n\t        }\n\t      } else {\n\t        s1 = peg$FAILED;\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        s0 = input.substring(s0, peg$currPos);\n\t      } else {\n\t        s0 = s1;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseAndOrOperator() {\n\t      var s0, s1, s2, s3;\n\t\n\t      s0 = peg$currPos;\n\t      s1 = peg$parse_();\n\t      if (s1 !== peg$FAILED) {\n\t        if (input.charCodeAt(peg$currPos) === 38) {\n\t          s2 = peg$c31;\n\t          peg$currPos++;\n\t        } else {\n\t          s2 = peg$FAILED;\n\t          if (peg$silentFails === 0) { peg$fail(peg$c32); }\n\t        }\n\t        if (s2 === peg$FAILED) {\n\t          if (input.charCodeAt(peg$currPos) === 124) {\n\t            s2 = peg$c33;\n\t            peg$currPos++;\n\t          } else {\n\t            s2 = peg$FAILED;\n\t            if (peg$silentFails === 0) { peg$fail(peg$c34); }\n\t          }\n\t        }\n\t        if (s2 !== peg$FAILED) {\n\t          s3 = peg$parse_();\n\t          if (s3 !== peg$FAILED) {\n\t            peg$savedPos = s0;\n\t            s1 = peg$c35(s2);\n\t            s0 = s1;\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parseStatus() {\n\t      var s0, s1, s2;\n\t\n\t      s0 = peg$currPos;\n\t      if (input.substr(peg$currPos, 1).toLowerCase() === peg$c36) {\n\t        s1 = input.charAt(peg$currPos);\n\t        peg$currPos++;\n\t      } else {\n\t        s1 = peg$FAILED;\n\t        if (peg$silentFails === 0) { peg$fail(peg$c37); }\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        if (input.substr(peg$currPos, 5).toLowerCase() === peg$c38) {\n\t          s2 = input.substr(peg$currPos, 5);\n\t          peg$currPos += 5;\n\t        } else {\n\t          s2 = peg$FAILED;\n\t          if (peg$silentFails === 0) { peg$fail(peg$c39); }\n\t        }\n\t        if (s2 === peg$FAILED) {\n\t          s2 = null;\n\t        }\n\t        if (s2 !== peg$FAILED) {\n\t          peg$savedPos = s0;\n\t          s1 = peg$c40();\n\t          s0 = s1;\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t      } else {\n\t        peg$currPos = s0;\n\t        s0 = peg$FAILED;\n\t      }\n\t      if (s0 === peg$FAILED) {\n\t        s0 = peg$currPos;\n\t        if (input.substr(peg$currPos, 1).toLowerCase() === peg$c41) {\n\t          s1 = input.charAt(peg$currPos);\n\t          peg$currPos++;\n\t        } else {\n\t          s1 = peg$FAILED;\n\t          if (peg$silentFails === 0) { peg$fail(peg$c42); }\n\t        }\n\t        if (s1 !== peg$FAILED) {\n\t          if (input.substr(peg$currPos, 8).toLowerCase() === peg$c43) {\n\t            s2 = input.substr(peg$currPos, 8);\n\t            peg$currPos += 8;\n\t          } else {\n\t            s2 = peg$FAILED;\n\t            if (peg$silentFails === 0) { peg$fail(peg$c44); }\n\t          }\n\t          if (s2 === peg$FAILED) {\n\t            s2 = null;\n\t          }\n\t          if (s2 !== peg$FAILED) {\n\t            peg$savedPos = s0;\n\t            s1 = peg$c45();\n\t            s0 = s1;\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t        } else {\n\t          peg$currPos = s0;\n\t          s0 = peg$FAILED;\n\t        }\n\t        if (s0 === peg$FAILED) {\n\t          s0 = peg$currPos;\n\t          if (input.substr(peg$currPos, 1).toLowerCase() === peg$c46) {\n\t            s1 = input.charAt(peg$currPos);\n\t            peg$currPos++;\n\t          } else {\n\t            s1 = peg$FAILED;\n\t            if (peg$silentFails === 0) { peg$fail(peg$c47); }\n\t          }\n\t          if (s1 !== peg$FAILED) {\n\t            if (input.substr(peg$currPos, 5).toLowerCase() === peg$c48) {\n\t              s2 = input.substr(peg$currPos, 5);\n\t              peg$currPos += 5;\n\t            } else {\n\t              s2 = peg$FAILED;\n\t              if (peg$silentFails === 0) { peg$fail(peg$c49); }\n\t            }\n\t            if (s2 === peg$FAILED) {\n\t              s2 = null;\n\t            }\n\t            if (s2 !== peg$FAILED) {\n\t              peg$savedPos = s0;\n\t              s1 = peg$c50();\n\t              s0 = s1;\n\t            } else {\n\t              peg$currPos = s0;\n\t              s0 = peg$FAILED;\n\t            }\n\t          } else {\n\t            peg$currPos = s0;\n\t            s0 = peg$FAILED;\n\t          }\n\t          if (s0 === peg$FAILED) {\n\t            s0 = peg$currPos;\n\t            if (input.substr(peg$currPos, 1).toLowerCase() === peg$c51) {\n\t              s1 = input.charAt(peg$currPos);\n\t              peg$currPos++;\n\t            } else {\n\t              s1 = peg$FAILED;\n\t              if (peg$silentFails === 0) { peg$fail(peg$c52); }\n\t            }\n\t            if (s1 !== peg$FAILED) {\n\t              if (input.substr(peg$currPos, 9).toLowerCase() === peg$c53) {\n\t                s2 = input.substr(peg$currPos, 9);\n\t                peg$currPos += 9;\n\t              } else {\n\t                s2 = peg$FAILED;\n\t                if (peg$silentFails === 0) { peg$fail(peg$c54); }\n\t              }\n\t              if (s2 === peg$FAILED) {\n\t                s2 = null;\n\t              }\n\t              if (s2 !== peg$FAILED) {\n\t                peg$savedPos = s0;\n\t                s1 = peg$c55();\n\t                s0 = s1;\n\t              } else {\n\t                peg$currPos = s0;\n\t                s0 = peg$FAILED;\n\t              }\n\t            } else {\n\t              peg$currPos = s0;\n\t              s0 = peg$FAILED;\n\t            }\n\t            if (s0 === peg$FAILED) {\n\t              s0 = peg$currPos;\n\t              if (input.substr(peg$currPos, 1).toLowerCase() === peg$c56) {\n\t                s1 = input.charAt(peg$currPos);\n\t                peg$currPos++;\n\t              } else {\n\t                s1 = peg$FAILED;\n\t                if (peg$silentFails === 0) { peg$fail(peg$c57); }\n\t              }\n\t              if (s1 !== peg$FAILED) {\n\t                if (input.substr(peg$currPos, 6).toLowerCase() === peg$c58) {\n\t                  s2 = input.substr(peg$currPos, 6);\n\t                  peg$currPos += 6;\n\t                } else {\n\t                  s2 = peg$FAILED;\n\t                  if (peg$silentFails === 0) { peg$fail(peg$c59); }\n\t                }\n\t                if (s2 === peg$FAILED) {\n\t                  s2 = null;\n\t                }\n\t                if (s2 !== peg$FAILED) {\n\t                  peg$savedPos = s0;\n\t                  s1 = peg$c60();\n\t                  s0 = s1;\n\t                } else {\n\t                  peg$currPos = s0;\n\t                  s0 = peg$FAILED;\n\t                }\n\t              } else {\n\t                peg$currPos = s0;\n\t                s0 = peg$FAILED;\n\t              }\n\t              if (s0 === peg$FAILED) {\n\t                s0 = peg$currPos;\n\t                if (input.substr(peg$currPos, 1).toLowerCase() === peg$c61) {\n\t                  s1 = input.charAt(peg$currPos);\n\t                  peg$currPos++;\n\t                } else {\n\t                  s1 = peg$FAILED;\n\t                  if (peg$silentFails === 0) { peg$fail(peg$c62); }\n\t                }\n\t                if (s1 !== peg$FAILED) {\n\t                  if (input.substr(peg$currPos, 12).toLowerCase() === peg$c63) {\n\t                    s2 = input.substr(peg$currPos, 12);\n\t                    peg$currPos += 12;\n\t                  } else {\n\t                    s2 = peg$FAILED;\n\t                    if (peg$silentFails === 0) { peg$fail(peg$c64); }\n\t                  }\n\t                  if (s2 === peg$FAILED) {\n\t                    s2 = null;\n\t                  }\n\t                  if (s2 !== peg$FAILED) {\n\t                    peg$savedPos = s0;\n\t                    s1 = peg$c65();\n\t                    s0 = s1;\n\t                  } else {\n\t                    peg$currPos = s0;\n\t                    s0 = peg$FAILED;\n\t                  }\n\t                } else {\n\t                  peg$currPos = s0;\n\t                  s0 = peg$FAILED;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t    function peg$parse_() {\n\t      var s0, s1, s2;\n\t\n\t      peg$silentFails++;\n\t      s0 = peg$currPos;\n\t      s1 = [];\n\t      if (peg$c67.test(input.charAt(peg$currPos))) {\n\t        s2 = input.charAt(peg$currPos);\n\t        peg$currPos++;\n\t      } else {\n\t        s2 = peg$FAILED;\n\t        if (peg$silentFails === 0) { peg$fail(peg$c68); }\n\t      }\n\t      while (s2 !== peg$FAILED) {\n\t        s1.push(s2);\n\t        if (peg$c67.test(input.charAt(peg$currPos))) {\n\t          s2 = input.charAt(peg$currPos);\n\t          peg$currPos++;\n\t        } else {\n\t          s2 = peg$FAILED;\n\t          if (peg$silentFails === 0) { peg$fail(peg$c68); }\n\t        }\n\t      }\n\t      if (s1 !== peg$FAILED) {\n\t        s0 = input.substring(s0, peg$currPos);\n\t      } else {\n\t        s0 = s1;\n\t      }\n\t      peg$silentFails--;\n\t      if (s0 === peg$FAILED) {\n\t        s1 = peg$FAILED;\n\t        if (peg$silentFails === 0) { peg$fail(peg$c66); }\n\t      }\n\t\n\t      return s0;\n\t    }\n\t\n\t\n\t        function leftAssoc(rest, val) {\n\t            if (!rest.length) return val;\n\t            var last = rest.pop();\n\t            return {left:leftAssoc(rest, last[0]), op:last[1], right:val};\n\t        }\n\t\n\t\n\t    peg$result = peg$startRuleFunction();\n\t\n\t    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n\t      return peg$result;\n\t    } else {\n\t      if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n\t        peg$fail({ type: \"end\", description: \"end of input\" });\n\t      }\n\t\n\t      throw peg$buildException(\n\t        null,\n\t        peg$maxFailExpected,\n\t        peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n\t        peg$maxFailPos < input.length\n\t          ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n\t          : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n\t      );\n\t    }\n\t  }\n\t\n\t  return {\n\t    SyntaxError: peg$SyntaxError,\n\t    parse:       peg$parse\n\t  };\n\t})();\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tfunction join(parts, sep) {\n\t    if (sep === void 0) { sep = \"/\"; }\n\t    var i = 0;\n\t    var j = \"\";\n\t    var separator = sep || '/';\n\t    var replace = new RegExp(separator + '{1,}', 'g');\n\t    for (i = 0; i < parts.length; i++) {\n\t        if (parts[i] === \"\") {\n\t            continue;\n\t        }\n\t        if (j !== \"\") {\n\t            j += sep;\n\t        }\n\t        j += parts[i];\n\t    }\n\t    return j.replace(replace, separator);\n\t}\n\texports.join = join;\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar AllInOneStorage = (function () {\n\t    function AllInOneStorage(config, allScos) {\n\t        this.cachedData = null;\n\t        this.config = config;\n\t        this.allScos = allScos;\n\t    }\n\t    AllInOneStorage.prototype.load = function (options) {\n\t        var me = this;\n\t        if (!this.cachedData) {\n\t            reqwest({\n\t                url: this.config.getDataUrl(),\n\t                method: this.config.getDataAjaxMethod(),\n\t                headers: this.config.getDataHeaders(),\n\t                type: \"json\",\n\t                async: true,\n\t                crossOrigin: this.config.storageAllowCORS(),\n\t                withCredentials: this.config.storageUseWithCredentials(),\n\t                data: {\n\t                    \"activityId\": this.config.courseId(),\n\t                    \"studentId\": this.config.studentId(),\n\t                    \"timestamp\": new Date().getTime()\n\t                },\n\t                success: function (resp) {\n\t                    if (typeof (resp) == \"undefined\" || !resp ||\n\t                        \"responseText\" in resp ||\n\t                        \"responseXML\" in resp) {\n\t                        resp = {};\n\t                    }\n\t                    me.cachedData = resp;\n\t                    me.allScos.importData(me.cachedData);\n\t                    options.callback(true);\n\t                },\n\t                error: function (request, status, error) {\n\t                    console.log(\"error in get ajax\" + request + \",\" + status + \",\" + error);\n\t                    options.callback(false);\n\t                }\n\t            });\n\t        }\n\t        else {\n\t            me.allScos.importData(me.cachedData);\n\t            options.callback(true);\n\t        }\n\t    };\n\t    AllInOneStorage.prototype.save = function (data, options) {\n\t        var async = true;\n\t        if (!options) {\n\t            options = {};\n\t        }\n\t        if (options.forceSync) {\n\t            async = false;\n\t        }\n\t        if (!options.eventType) {\n\t            options.eventType = \"save\";\n\t        }\n\t        if (!options.scoName) {\n\t            options.scoName = \"\";\n\t        }\n\t        reqwest({\n\t            url: this.config.setDataUrl(),\n\t            method: this.config.setDataAjaxMethod(),\n\t            headers: this.config.setDataHeaders(),\n\t            async: async,\n\t            crossOrigin: this.config.storageAllowCORS(),\n\t            withCredentials: this.config.storageUseWithCredentials(),\n\t            data: {\n\t                \"action\": options.eventType,\n\t                \"currentSco\": options.scoName,\n\t                \"data\": JSON.stringify(this.allScos.exportData(this.config)),\n\t                \"activityId\": this.config.courseId(),\n\t                \"studentId\": this.config.studentId(),\n\t                \"timestamp\": new Date().getTime()\n\t            },\n\t            success: function (msg) {\n\t            },\n\t            error: function (msg) {\n\t                console.log(\"There was an error saving your data: \" + msg);\n\t            }\n\t        });\n\t    };\n\t    return AllInOneStorage;\n\t}());\n\texports.AllInOneStorage = AllInOneStorage;\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar render_1 = __webpack_require__(18);\n\tvar TableOfContents = (function () {\n\t    function TableOfContents(config, events) {\n\t        this.config = config;\n\t        this.events = events;\n\t        this.events.statusChange.add(this.statusChanged, this);\n\t    }\n\t    TableOfContents.prototype.render = function (resourcesByIref, itemTree) {\n\t        return this._render(resourcesByIref, itemTree);\n\t    };\n\t    TableOfContents.prototype.updateCurrentActivity = function (id) {\n\t        var i;\n\t        var activityId = 'toc-' + id;\n\t        var curList = Array.prototype.slice.call(document.getElementById(\"toc\").getElementsByClassName(\"current\"));\n\t        for (i = 0; i < curList.length; i++) {\n\t            render_1.DomRender.removeClass(curList[i], \"current\");\n\t        }\n\t        var el = document.getElementById(activityId);\n\t        render_1.DomRender.addClass(el, \"current\");\n\t    };\n\t    TableOfContents.prototype.updateActivityStatus = function (id, status) {\n\t        var activityId = 'toc-' + id, newClass = \"\";\n\t        if (status === \"\") {\n\t            return;\n\t        }\n\t        switch (status) {\n\t            case \"completed\":\n\t            case \"browsed\":\n\t                newClass = \"completed\";\n\t                break;\n\t            case \"incomplete\":\n\t                newClass = \"incomplete\";\n\t                break;\n\t            case \"unknown\":\n\t                newClass = \"unknown\";\n\t                break;\n\t            case \"passed\":\n\t                newClass = \"passed\";\n\t                break;\n\t            case \"failed\":\n\t                newClass = \"failed\";\n\t                break;\n\t            case \"not attempted\":\n\t            case undefined:\n\t                newClass = \"not_attempted\";\n\t                break;\n\t        }\n\t        if (newClass && document.getElementById(activityId)) {\n\t            var el = document.getElementById(activityId);\n\t            render_1.DomRender.removeClass(el, \"completed\");\n\t            render_1.DomRender.removeClass(el, \"browsed\");\n\t            render_1.DomRender.removeClass(el, \"incomplete\");\n\t            render_1.DomRender.removeClass(el, \"unknown\");\n\t            render_1.DomRender.removeClass(el, \"passed\");\n\t            render_1.DomRender.removeClass(el, \"failed\");\n\t            render_1.DomRender.removeClass(el, \"not_attempted\");\n\t            render_1.DomRender.addClass(el, newClass);\n\t        }\n\t    };\n\t    TableOfContents.prototype.updateSelectability = function (item) {\n\t        var el = document.getElementById(\"toc-\" + item.identifier);\n\t        if (item.isSelectable) {\n\t            render_1.DomRender.removeClass(el, \"disable\");\n\t        }\n\t        else {\n\t            render_1.DomRender.addClass(el, \"disable\");\n\t        }\n\t    };\n\t    TableOfContents.prototype.statusChanged = function (newStatus) {\n\t        this.updateActivityStatus(this.currentScoId, newStatus);\n\t        this.updateCurrentActivity(this.currentScoId);\n\t    };\n\t    TableOfContents.prototype._render = function (resourcesByIref, item) {\n\t        var s = '<ul>', i, href = '', klass = '', doClick = \"\", canNavigate = false;\n\t        if (item.hasOwnProperty('identifierRef')) {\n\t            if (resourcesByIref.hasOwnProperty(item.identifierRef)) {\n\t                href = resourcesByIref[item.identifierRef].href;\n\t                canNavigate = true;\n\t            }\n\t        }\n\t        if (item.hasOwnProperty('identifier')) {\n\t            klass = item.identifier;\n\t        }\n\t        s += '<li id=\"toc-' + klass + '\">';\n\t        if (href && canNavigate) {\n\t            doClick = ' onclick=\"ssla.navigateByIdentifier(\\'' + item.identifier + '\\'); return false;\"';\n\t            s += '<a href=\"#\" ' + doClick + '>' + item.title + '</a>';\n\t        }\n\t        else {\n\t            s += '<div style=\"font-weight: bold\">' + item.title + '</div>';\n\t        }\n\t        for (i = 0; i < item.children.length; i++) {\n\t            s += this._render(resourcesByIref, item.children[i]);\n\t        }\n\t        s += '</li>';\n\t        s += '</ul>';\n\t        return s;\n\t    };\n\t    return TableOfContents;\n\t}());\n\texports.TableOfContents = TableOfContents;\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar DomRender = (function () {\n\t    function DomRender() {\n\t    }\n\t    DomRender.hasClass = function (ele, cls) {\n\t        return ele.className.match(new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)'));\n\t    };\n\t    DomRender.addClass = function (ele, cls) {\n\t        if (!this.hasClass(ele, cls))\n\t            ele.className += \" \" + cls;\n\t    };\n\t    DomRender.removeClass = function (ele, cls) {\n\t        if (this.hasClass(ele, cls)) {\n\t            var reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n\t            ele.className = ele.className.replace(reg, ' ');\n\t        }\n\t    };\n\t    return DomRender;\n\t}());\n\texports.DomRender = DomRender;\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar signals_1 = __webpack_require__(20);\n\tvar SSLAApiEvents = (function () {\n\t    function SSLAApiEvents() {\n\t        this.preInitialize = new signals_1.Signal();\n\t        this.postInitialize = new signals_1.Signal();\n\t        this.preFinish = new signals_1.Signal();\n\t        this.postFinish = new signals_1.Signal();\n\t        this.preCommit = new signals_1.Signal();\n\t        this.postCommit = new signals_1.Signal();\n\t        this.preGetValue = new signals_1.Signal();\n\t        this.postGetValue = new signals_1.Signal();\n\t        this.preSetValue = new signals_1.Signal();\n\t        this.postSetValue = new signals_1.Signal();\n\t        this.preGetLastError = new signals_1.Signal();\n\t        this.postGetLastError = new signals_1.Signal();\n\t        this.preGetErrorString = new signals_1.Signal();\n\t        this.postGetErrorString = new signals_1.Signal();\n\t        this.preGetDiagnostic = new signals_1.Signal();\n\t        this.postGetDiagnostic = new signals_1.Signal();\n\t        this.statusChange = new signals_1.Signal();\n\t    }\n\t    return SSLAApiEvents;\n\t}());\n\texports.SSLAApiEvents = SSLAApiEvents;\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = signals;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Statement = (function () {\n\t    function Statement(sco, fn, args, ret, error) {\n\t        this.sco = sco;\n\t        this.fn = fn;\n\t        this.args = args;\n\t        this.ret = ret;\n\t        this.error = error;\n\t        this.startTime = new Date().getTime();\n\t    }\n\t    Statement.prototype.end = function () {\n\t        this.endTime = new Date().getTime();\n\t    };\n\t    return Statement;\n\t}());\n\tvar ScormLog = (function () {\n\t    function ScormLog(events) {\n\t        this.currentStatement = null;\n\t        this.events = events;\n\t        this.statements = [];\n\t        this.registerEvents();\n\t    }\n\t    ScormLog.prototype.add = function (fn, args, ret, error) {\n\t        this.start(fn, args);\n\t        this.finish(ret, error);\n\t    };\n\t    ScormLog.prototype.pre = function (cmd, args) {\n\t        this.start(cmd, args);\n\t    };\n\t    ScormLog.prototype.post = function (cmd, args, ret, err) {\n\t        this.finish(ret, err);\n\t    };\n\t    ScormLog.prototype.registerEvents = function () {\n\t        this.events.preInitialize.add(this.pre, this);\n\t        this.events.postInitialize.add(this.post, this);\n\t        this.events.preFinish.add(this.pre, this);\n\t        this.events.postFinish.add(this.post, this);\n\t        this.events.preCommit.add(this.pre, this);\n\t        this.events.postCommit.add(this.post, this);\n\t        this.events.preGetValue.add(this.pre, this);\n\t        this.events.postGetValue.add(this.post, this);\n\t        this.events.preSetValue.add(this.pre, this);\n\t        this.events.postSetValue.add(this.post, this);\n\t        this.events.preGetLastError.add(this.pre, this);\n\t        this.events.postGetLastError.add(this.post, this);\n\t        this.events.preGetErrorString.add(this.pre, this);\n\t        this.events.postGetErrorString.add(this.post, this);\n\t        this.events.preGetDiagnostic.add(this.pre, this);\n\t        this.events.postGetDiagnostic.add(this.post, this);\n\t    };\n\t    ScormLog.prototype.setSco = function (sco) {\n\t        this.currentSco = sco;\n\t    };\n\t    ScormLog.prototype.start = function (fn, args) {\n\t        this.currentStatement = new Statement(this.currentSco, fn, args);\n\t        this.statements.push(this.currentStatement);\n\t    };\n\t    ScormLog.prototype.finish = function (ret, error) {\n\t        this.currentStatement.end();\n\t        this.currentStatement = null;\n\t    };\n\t    return ScormLog;\n\t}());\n\texports.ScormLog = ScormLog;\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar openConfig;\n\tvar openManifest;\n\tvar openUrl;\n\tfunction openPage(location, windowName, settings) {\n\t    var popUp;\n\t    popUp = window.open(location, windowName, settings);\n\t    if (popUp == null || typeof (popUp) == 'undefined') {\n\t    }\n\t    else {\n\t        popUp.focus();\n\t        var pollTimer = window.setInterval(function () {\n\t            var behavior;\n\t            var behaviorCustomFn;\n\t            if (popUp.closed !== false) {\n\t                window.clearInterval(pollTimer);\n\t                if (openManifest.navigableScoInOrderTraversal.length == 1) {\n\t                    behavior = openConfig.closePopupSingleScoBehavior();\n\t                    behaviorCustomFn = openConfig.closePopupSingleScoCustomFunction();\n\t                }\n\t                else {\n\t                    behavior = openConfig.closePopupMultiScoBehavior();\n\t                    behaviorCustomFn = openConfig.closePopupMultiScoCustomFunction();\n\t                }\n\t                if (behavior == \"\") {\n\t                }\n\t                else if (behavior == \"exit\") {\n\t                    parent.ssla.ssla.exit();\n\t                }\n\t                else if (behavior == \"message\") {\n\t                    alert(\"TODO message();\");\n\t                }\n\t                else if (behavior == \"custom\") {\n\t                    if (!behaviorCustomFn) {\n\t                        console.log(\"No exit custom behavior function defined in config.\");\n\t                    }\n\t                    else {\n\t                        behaviorCustomFn();\n\t                    }\n\t                }\n\t                else {\n\t                    console.log(\"Unrecognized exit behavior:\", behavior);\n\t                }\n\t            }\n\t        }, 200);\n\t    }\n\t    return popUp;\n\t}\n\t;\n\tfunction tryPopup(path, popupSettings) {\n\t    return openPage(path, \"sco_win\", popupSettings);\n\t}\n\tfunction makePopup() {\n\t    return tryPopup(openUrl, openConfig.popupWindowParams());\n\t}\n\tfunction popupManually() {\n\t    updateUserText();\n\t    return makePopup();\n\t}\n\texports.popupManually = popupManually;\n\tfunction updateCenterContent(s) {\n\t    var handle = setInterval(function () {\n\t        try {\n\t            jca_course_player.document.getElementById(\"content\").innerHTML = s;\n\t            clearInterval(handle);\n\t        }\n\t        catch (e) { }\n\t    }, 10);\n\t}\n\tfunction updateUserText() {\n\t    updateCenterContent(openConfig.popupMainContentMessageAfterOpen());\n\t}\n\tfunction openSco(url, config, manifest) {\n\t    var win;\n\t    openConfig = config;\n\t    openManifest = manifest;\n\t    openUrl = url;\n\t    if (openConfig.openContentIn() == \"popup\") {\n\t        win = makePopup();\n\t        if (!win) {\n\t            updateCenterContent(openConfig.popupMainContentMessageFailed());\n\t        }\n\t        else {\n\t            updateUserText();\n\t        }\n\t    }\n\t    else {\n\t        jca_course_player.document.location.replace(openUrl);\n\t    }\n\t}\n\texports.openSco = openSco;\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar SSLAPlugin = (function () {\n\t    function SSLAPlugin() {\n\t        this.config = null;\n\t        this.ctd = null;\n\t    }\n\t    return SSLAPlugin;\n\t}());\n\texports.SSLAPlugin = SSLAPlugin;\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar config_1 = __webpack_require__(25);\n\tvar url_1 = __webpack_require__(10);\n\texports.UrlVarService = url_1.UrlVarService;\n\tvar detector_1 = __webpack_require__(26);\n\tvar open_1 = __webpack_require__(22);\n\texports.popupManually = open_1.popupManually;\n\tvar version_1 = __webpack_require__(27);\n\tvar open_2 = __webpack_require__(22);\n\tvar SSLA = (function () {\n\t    function SSLA() {\n\t        this.config = null;\n\t        this.ctd = null;\n\t        this.plugins = {};\n\t        this.version = version_1.VERSION;\n\t        this.popupManually = open_2.popupManually;\n\t        this.config = new config_1.SSLAConfiguration();\n\t        this.ctd = new detector_1.CourseTypeDetector();\n\t    }\n\t    SSLA.prototype.exit = function () {\n\t        switch (this.config.exitAction()) {\n\t            case \"none\":\n\t                break;\n\t            case \"close\":\n\t                try {\n\t                    window.close();\n\t                }\n\t                catch (e) {\n\t                }\n\t                ;\n\t                try {\n\t                    top.window.close();\n\t                }\n\t                catch (e) {\n\t                }\n\t                ;\n\t                break;\n\t            case \"referrer\":\n\t                window.location.href = document.referrer;\n\t                break;\n\t            case \"url\":\n\t                window.location.href = this.config.exitUrl();\n\t                break;\n\t            case \"custom\":\n\t                if (this.config.exitFn()) {\n\t                    this.config.exitFn()();\n\t                }\n\t                else {\n\t                    console.log(\"No function specified for exit type custom for exitFn.\");\n\t                }\n\t                break;\n\t            default:\n\t                console.log(\"Exit behavior configuration option invalid:\", this.config.exitAction());\n\t        }\n\t    };\n\t    SSLA.prototype.initCourseType = function (courseType) {\n\t        if (courseType === \"scorm\") {\n\t            if (!this.plugins[\"scorm\"]) {\n\t                alert(\"No SCORM plugin installed.  Please contact administrative support.\");\n\t            }\n\t            else {\n\t                this.plugins[\"scorm\"].start();\n\t            }\n\t        }\n\t        else if (courseType === \"xapi\") {\n\t            if (!this.plugins[\"xapi\"]) {\n\t                alert(\"No XAPI plugin installed.  Please contact administrative support.\");\n\t            }\n\t            else {\n\t                this.plugins[\"xapi\"].start();\n\t            }\n\t        }\n\t        else if (courseType === \"aicc\") {\n\t            if (!this.plugins[\"aicc\"]) {\n\t                alert(\"No AICC plugin installed.  Please contact administrative support.\");\n\t            }\n\t            else {\n\t                this.plugins[\"aicc\"].start();\n\t            }\n\t        }\n\t        else {\n\t            alert(\"Could not find any manifest file for supported course types in the specified folder.  Please check the directory containing your course and try again.\\n\" +\n\t                \"Course types supported by this build: \" + Object.keys(this.plugins).join(\",\") + \"\\n\");\n\t        }\n\t    };\n\t    SSLA.prototype.registerPlugin = function (name, plugin) {\n\t        this.plugins[name] = plugin;\n\t        plugin.config = this.config;\n\t        plugin.ctd = this.ctd;\n\t        if (name == \"scorm\") {\n\t            this.scorm = plugin;\n\t        }\n\t    };\n\t    SSLA.prototype.start = function () {\n\t        if (this.config.pluginLoadDetection() && this.config.pluginMode() != \"\") {\n\t            alert(\"Configuration issue: pluginLoadDetection = true cannot be used with pluginMode.  System will now exit.\");\n\t            return;\n\t        }\n\t        else if (!this.config.pluginLoadDetection() && this.config.pluginMode() == \"\") {\n\t            alert(\"Configuration issue: pluginLoadDetection = false must have a specified pluginMode.  System will now exit.\");\n\t            return;\n\t        }\n\t        if (this.config.pluginLoadDetection()) {\n\t            this.ctd.identify(this.config, this.plugins, this.initCourseType.bind(this));\n\t        }\n\t        else {\n\t            var plugin = this.plugins[this.config.pluginMode()];\n\t            if (!plugin) {\n\t                alert(\"Plugin mode could not be found: \" + this.config.pluginMode());\n\t                return;\n\t            }\n\t            plugin.start();\n\t        }\n\t    };\n\t    return SSLA;\n\t}());\n\texports.SSLA = SSLA;\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Path = __webpack_require__(15);\n\tvar url_1 = __webpack_require__(10);\n\tvar BasicConfiguration = (function () {\n\t    function BasicConfiguration() {\n\t    }\n\t    BasicConfiguration.prototype.autoLaunchFirstSco = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.courseBaseHtmlPath = function () {\n\t        return \"\";\n\t    };\n\t    BasicConfiguration.prototype.courseId = function () {\n\t        return url_1.UrlVarService.get(\"courseId\");\n\t    };\n\t    BasicConfiguration.prototype.courseDirectory = function () {\n\t        if (url_1.UrlVarService.get(\"courseDirectory\").charAt(0) === \"/\") {\n\t            return url_1.UrlVarService.get(\"courseDirectory\");\n\t        }\n\t        return Path.join([this.courseBaseHtmlPath(), url_1.UrlVarService.get(\"courseDirectory\")]);\n\t    };\n\t    BasicConfiguration.prototype.closePopupSingleScoBehavior = function () {\n\t        return \"exit\";\n\t    };\n\t    BasicConfiguration.prototype.closePopupMultiScoBehavior = function () {\n\t        return \"\";\n\t    };\n\t    BasicConfiguration.prototype.closePopupSingleScoCustomFunction = function () {\n\t        return null;\n\t    };\n\t    BasicConfiguration.prototype.closePopupMultiScoCustomFunction = function () {\n\t        return null;\n\t    };\n\t    BasicConfiguration.prototype.exitAction = function () {\n\t        return \"referrer\";\n\t    };\n\t    BasicConfiguration.prototype.exitFn = function () {\n\t        return null;\n\t    };\n\t    BasicConfiguration.prototype.exitUrl = function () {\n\t        return \"blank_unloading.htm\";\n\t    };\n\t    BasicConfiguration.prototype.getCredit = function () {\n\t        return url_1.UrlVarService.get(\"credit\");\n\t    };\n\t    BasicConfiguration.prototype.getDataAjaxMethod = function () {\n\t        return \"POST\";\n\t    };\n\t    BasicConfiguration.prototype.getDataHeaders = function () {\n\t        return {};\n\t    };\n\t    BasicConfiguration.prototype.getDataUrl = function () {\n\t        return \"/trackAllInOne/get\";\n\t    };\n\t    BasicConfiguration.prototype.getMode = function () {\n\t        return url_1.UrlVarService.get(\"mode\");\n\t    };\n\t    BasicConfiguration.prototype.layoutUpdater = function () {\n\t        return null;\n\t    };\n\t    BasicConfiguration.prototype.navigationType = function () {\n\t        return \"\";\n\t    };\n\t    BasicConfiguration.prototype.openContentIn = function () {\n\t        return \"inline\";\n\t    };\n\t    BasicConfiguration.prototype.pluginLoadDetection = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.pluginMode = function () {\n\t        return \"\";\n\t    };\n\t    BasicConfiguration.prototype.popupMainContentMessageAfterOpen = function () {\n\t        return 'Your course has been opened in a popup.  When you have completed your course, please make another selection from the tree, press exit or close this window.';\n\t    };\n\t    BasicConfiguration.prototype.popupMainContentMessageFailed = function () {\n\t        return 'Your course window did not pop open correctly.<br>  <a onclick=\"parent.ssla.ssla.popupManually()\" href=\"#\">Click here to open the course.</a>';\n\t    };\n\t    BasicConfiguration.prototype.popupWindowParams = function () {\n\t        return \"status=1,toolbar=1,scrollbars=1,resizable=1,alwaysRaised=1\";\n\t    };\n\t    BasicConfiguration.prototype.returnToLastScoOnLaunch = function () {\n\t        return false;\n\t    };\n\t    BasicConfiguration.prototype.saveDataOnCommit = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.saveDataOnSetValue = function () {\n\t        return false;\n\t    };\n\t    BasicConfiguration.prototype.scoreAllowChangeAfterCompleted = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.scoreAllowChangeAfterFailed = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.scoreAllowChangeAfterPassed = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.scoreAllowReduce = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.scoreRollupCustomFunction = function () {\n\t        return null;\n\t    };\n\t    BasicConfiguration.prototype.scoreRollupIncludeScosWithNoScore = function () {\n\t        return false;\n\t    };\n\t    BasicConfiguration.prototype.scormManifestFilename = function () {\n\t        return \"imsmanifest.xml\";\n\t    };\n\t    BasicConfiguration.prototype.scormManifestRawXml = function () {\n\t        return \"\";\n\t    };\n\t    BasicConfiguration.prototype.scormManifestUseRawXml = function () {\n\t        return false;\n\t    };\n\t    BasicConfiguration.prototype.setDataAjaxMethod = function () {\n\t        return \"POST\";\n\t    };\n\t    BasicConfiguration.prototype.setDataHeaders = function () {\n\t        return {};\n\t    };\n\t    BasicConfiguration.prototype.setDataUrl = function () {\n\t        return \"/trackAllInOne/set\";\n\t    };\n\t    BasicConfiguration.prototype.singleScoView = function () {\n\t        return \"\";\n\t    };\n\t    BasicConfiguration.prototype.statusAllowChangeAfterCompleted = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.statusAllowChangeAfterFailed = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.statusAllowChangeAfterPassed = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.statusRollupCustomFunction = function () {\n\t        return null;\n\t    };\n\t    BasicConfiguration.prototype.storageAdapter = function () {\n\t        return null;\n\t    };\n\t    BasicConfiguration.prototype.storageAllowCORS = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.storageUseWithCredentials = function () {\n\t        return true;\n\t    };\n\t    BasicConfiguration.prototype.studentId = function () {\n\t        return url_1.UrlVarService.get(\"studentId\");\n\t    };\n\t    BasicConfiguration.prototype.studentName = function () {\n\t        return url_1.UrlVarService.get(\"studentName\");\n\t    };\n\t    BasicConfiguration.prototype.xapiEndpoint = function () {\n\t        return \"\";\n\t    };\n\t    BasicConfiguration.prototype.xapiManifestFilename = function () {\n\t        return \"tincan.xml\";\n\t    };\n\t    BasicConfiguration.prototype.xapiRegistration = function () {\n\t        return \"\";\n\t    };\n\t    return BasicConfiguration;\n\t}());\n\tvar SSLAConfiguration = (function () {\n\t    function SSLAConfiguration() {\n\t        this.internalConfig = new BasicConfiguration();\n\t    }\n\t    SSLAConfiguration.prototype.isFunction = function (obj) {\n\t        return !!(obj && obj.constructor && obj.call && obj.apply);\n\t    };\n\t    SSLAConfiguration.prototype.fromExt = function (fn) {\n\t        if (typeof window.sslaConfig !== \"undefined\" && typeof window.sslaConfig[fn] !== \"undefined\") {\n\t            if (this.isFunction(window.sslaConfig[fn])) {\n\t                return window.sslaConfig[fn]();\n\t            }\n\t            return window.sslaConfig[fn];\n\t        }\n\t        return this.internalConfig[fn]();\n\t    };\n\t    SSLAConfiguration.prototype.autoLaunchFirstSco = function () {\n\t        return this.fromExt(\"autoLaunchFirstSco\");\n\t    };\n\t    SSLAConfiguration.prototype.closePopupSingleScoBehavior = function () {\n\t        return this.fromExt(\"closePopupSingleScoBehavior\");\n\t    };\n\t    SSLAConfiguration.prototype.closePopupMultiScoBehavior = function () {\n\t        return this.fromExt(\"closePopupMultiScoBehavior\");\n\t    };\n\t    SSLAConfiguration.prototype.closePopupSingleScoCustomFunction = function () {\n\t        return this.fromExt(\"closePopupSingleScoCustomFunction\");\n\t    };\n\t    SSLAConfiguration.prototype.closePopupMultiScoCustomFunction = function () {\n\t        return this.fromExt(\"closePopupMultiScoCustomFunction\");\n\t    };\n\t    SSLAConfiguration.prototype.courseBaseHtmlPath = function () {\n\t        return this.fromExt(\"courseBaseHtmlPath\");\n\t    };\n\t    SSLAConfiguration.prototype.courseId = function () {\n\t        return this.fromExt(\"courseId\");\n\t    };\n\t    SSLAConfiguration.prototype.courseDirectory = function () {\n\t        return this.fromExt(\"courseDirectory\");\n\t    };\n\t    SSLAConfiguration.prototype.exitAction = function () {\n\t        return this.fromExt(\"exitAction\");\n\t    };\n\t    SSLAConfiguration.prototype.exitFn = function () {\n\t        return this.fromExt(\"exitFn\");\n\t    };\n\t    SSLAConfiguration.prototype.exitUrl = function () {\n\t        return this.fromExt(\"exitUrl\");\n\t    };\n\t    SSLAConfiguration.prototype.getCredit = function () {\n\t        return this.fromExt(\"getCredit\");\n\t    };\n\t    SSLAConfiguration.prototype.getDataAjaxMethod = function () {\n\t        return this.fromExt(\"getDataAjaxMethod\");\n\t    };\n\t    SSLAConfiguration.prototype.getDataHeaders = function () {\n\t        return this.fromExt(\"getDataHeaders\");\n\t    };\n\t    SSLAConfiguration.prototype.getDataUrl = function () {\n\t        return this.fromExt(\"getDataUrl\");\n\t    };\n\t    SSLAConfiguration.prototype.getMode = function () {\n\t        return this.fromExt(\"getMode\");\n\t    };\n\t    SSLAConfiguration.prototype.layoutUpdater = function () {\n\t        return this.fromExt(\"layoutUpdater\");\n\t    };\n\t    SSLAConfiguration.prototype.navigationType = function () {\n\t        return this.fromExt(\"navigationType\");\n\t    };\n\t    SSLAConfiguration.prototype.openContentIn = function () {\n\t        return this.fromExt(\"openContentIn\");\n\t    };\n\t    SSLAConfiguration.prototype.pluginLoadDetection = function () {\n\t        return this.fromExt(\"pluginLoadDetection\");\n\t    };\n\t    SSLAConfiguration.prototype.pluginMode = function () {\n\t        return this.fromExt(\"pluginMode\");\n\t    };\n\t    SSLAConfiguration.prototype.popupMainContentMessageAfterOpen = function () {\n\t        return this.fromExt(\"popupMainContentMessageAfterOpen\");\n\t    };\n\t    SSLAConfiguration.prototype.popupMainContentMessageFailed = function () {\n\t        return this.fromExt(\"popupMainContentMessageFailed\");\n\t    };\n\t    SSLAConfiguration.prototype.popupWindowParams = function () {\n\t        return this.fromExt(\"popupWindowParams\");\n\t    };\n\t    SSLAConfiguration.prototype.returnToLastScoOnLaunch = function () {\n\t        return this.fromExt(\"returnToLastScoOnLaunch\");\n\t    };\n\t    SSLAConfiguration.prototype.saveDataOnCommit = function () {\n\t        return this.fromExt(\"saveDataOnCommit\");\n\t    };\n\t    SSLAConfiguration.prototype.saveDataOnSetValue = function () {\n\t        return this.fromExt(\"saveDataOnSetValue\");\n\t    };\n\t    SSLAConfiguration.prototype.scoreAllowChangeAfterCompleted = function () {\n\t        return this.fromExt(\"scoreAllowChangeAfterCompleted\");\n\t    };\n\t    SSLAConfiguration.prototype.scoreAllowChangeAfterFailed = function () {\n\t        return this.fromExt(\"scoreAllowChangeAfterFailed\");\n\t    };\n\t    SSLAConfiguration.prototype.scoreAllowChangeAfterPassed = function () {\n\t        return this.fromExt(\"scoreAllowChangeAfterPassed\");\n\t    };\n\t    SSLAConfiguration.prototype.scoreAllowReduce = function () {\n\t        return this.fromExt(\"scoreAllowReduce\");\n\t    };\n\t    SSLAConfiguration.prototype.scoreRollupCustomFunction = function () {\n\t        return this.fromExt(\"scoreRollupCustomFunction\");\n\t    };\n\t    SSLAConfiguration.prototype.scoreRollupIncludeScosWithNoScore = function () {\n\t        return this.fromExt(\"scoreRollupIncludeScosWithNoScore\");\n\t    };\n\t    SSLAConfiguration.prototype.scormManifestFilename = function () {\n\t        return this.fromExt(\"scormManifestFilename\");\n\t    };\n\t    SSLAConfiguration.prototype.scormManifestRawXml = function () {\n\t        return this.fromExt(\"scormManifestRawXml\");\n\t    };\n\t    SSLAConfiguration.prototype.scormManifestUseRawXml = function () {\n\t        return this.fromExt(\"scormManifestUseRawXml\");\n\t    };\n\t    SSLAConfiguration.prototype.setDataAjaxMethod = function () {\n\t        return this.fromExt(\"setDataAjaxMethod\");\n\t    };\n\t    SSLAConfiguration.prototype.setDataHeaders = function () {\n\t        return this.fromExt(\"setDataHeaders\");\n\t    };\n\t    SSLAConfiguration.prototype.setDataUrl = function () {\n\t        return this.fromExt(\"setDataUrl\");\n\t    };\n\t    SSLAConfiguration.prototype.singleScoView = function () {\n\t        return this.fromExt(\"singleScoView\");\n\t    };\n\t    SSLAConfiguration.prototype.statusAllowChangeAfterCompleted = function () {\n\t        return this.fromExt(\"statusAllowChangeAfterCompleted\");\n\t    };\n\t    SSLAConfiguration.prototype.statusAllowChangeAfterFailed = function () {\n\t        return this.fromExt(\"statusAllowChangeAfterFailed\");\n\t    };\n\t    SSLAConfiguration.prototype.statusAllowChangeAfterPassed = function () {\n\t        return this.fromExt(\"statusAllowChangeAfterPassed\");\n\t    };\n\t    SSLAConfiguration.prototype.statusRollupCustomFunction = function () {\n\t        return this.fromExt(\"statusRollupCustomFunction\");\n\t    };\n\t    SSLAConfiguration.prototype.storageAdapter = function () {\n\t        return this.fromExt(\"storageAdapter\");\n\t    };\n\t    SSLAConfiguration.prototype.storageAllowCORS = function () {\n\t        return this.fromExt(\"storageAllowCORS\");\n\t    };\n\t    SSLAConfiguration.prototype.storageUseWithCredentials = function () {\n\t        return this.fromExt(\"storageUseWithCredentials\");\n\t    };\n\t    SSLAConfiguration.prototype.studentId = function () {\n\t        return this.fromExt(\"studentId\");\n\t    };\n\t    SSLAConfiguration.prototype.studentName = function () {\n\t        return this.fromExt(\"studentName\");\n\t    };\n\t    SSLAConfiguration.prototype.xapiEndpoint = function () {\n\t        return this.fromExt(\"xapiEndpoint\");\n\t    };\n\t    SSLAConfiguration.prototype.xapiManifestFilename = function () {\n\t        return this.fromExt(\"xapiManifestFilename\");\n\t    };\n\t    SSLAConfiguration.prototype.xapiRegistration = function () {\n\t        return this.fromExt(\"xapiRegistration\");\n\t    };\n\t    return SSLAConfiguration;\n\t}());\n\texports.SSLAConfiguration = SSLAConfiguration;\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Path = __webpack_require__(15);\n\tvar CourseTypeDetector = (function () {\n\t    function CourseTypeDetector() {\n\t        this.callbackAttempted = false;\n\t        this.checkedAICC = false;\n\t        this.checkedSCORM = false;\n\t        this.checkedXAPI = false;\n\t        this.isAICC = false;\n\t        this.isSCORM = false;\n\t        this.isXAPI = false;\n\t    }\n\t    CourseTypeDetector.prototype.attemptAICC = function (courseDirectory, manifestFilename) {\n\t        this.checkedAICC = true;\n\t        this.finishIfAllChecked();\n\t    };\n\t    CourseTypeDetector.prototype.attemptXAPI = function (courseDirectory, manifestFilename) {\n\t        var me = this;\n\t        reqwest({\n\t            url: Path.join([courseDirectory, manifestFilename]),\n\t            type: 'xml'\n\t        })\n\t            .then(function (resp) {\n\t            me.isXAPI = true;\n\t            me.xapiContents = resp;\n\t        })\n\t            .always(function (resp) {\n\t            me.checkedXAPI = true;\n\t            me.finishIfAllChecked();\n\t        });\n\t    };\n\t    CourseTypeDetector.prototype.attemptSCORM = function (courseDirectory, manifestFilename) {\n\t        var me = this;\n\t        reqwest({\n\t            url: Path.join([courseDirectory, manifestFilename]),\n\t            type: 'xml'\n\t        })\n\t            .then(function (resp) {\n\t            me.isSCORM = true;\n\t            me.scormContents = resp;\n\t        })\n\t            .always(function (resp) {\n\t            me.checkedSCORM = true;\n\t            me.finishIfAllChecked();\n\t        });\n\t    };\n\t    CourseTypeDetector.prototype.finishIfAllChecked = function () {\n\t        if (this.callbackAttempted) {\n\t            return;\n\t        }\n\t        if (this.isSCORM) {\n\t            this.callbackAttempted = true;\n\t            this.callbackOnDecision(\"scorm\");\n\t        }\n\t        else if (this.isXAPI) {\n\t            this.callbackAttempted = true;\n\t            this.callbackOnDecision(\"xapi\");\n\t        }\n\t        else if (this.isAICC) {\n\t            this.callbackAttempted = true;\n\t            this.callbackOnDecision(\"aicc\");\n\t        }\n\t        else if (this.checkedSCORM && this.checkedXAPI && this.checkedAICC) {\n\t            this.callbackOnDecision(\"\");\n\t        }\n\t    };\n\t    CourseTypeDetector.prototype.identify = function (config, availablePlugins, callbackOnDecision) {\n\t        this.callbackOnDecision = callbackOnDecision;\n\t        if (availablePlugins[\"aicc\"]) {\n\t            this.attemptAICC(config.courseDirectory(), \"\");\n\t        }\n\t        else {\n\t            this.checkedAICC = true;\n\t        }\n\t        if (availablePlugins[\"scorm\"]) {\n\t            this.attemptSCORM(config.courseDirectory(), config.scormManifestFilename());\n\t        }\n\t        else {\n\t            this.checkedSCORM = true;\n\t        }\n\t        if (availablePlugins[\"xapi\"]) {\n\t            this.attemptXAPI(config.courseDirectory(), config.xapiManifestFilename());\n\t        }\n\t        else {\n\t            this.checkedXAPI = true;\n\t        }\n\t    };\n\t    return CourseTypeDetector;\n\t}());\n\texports.CourseTypeDetector = CourseTypeDetector;\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\texports.VERSION = \"3.4.0+\";\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// ssla/js/ssla.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9ca2c310b4ad1259417b","import {Scorm2004Plugin} from \"./2004/app\"\nimport {SSLA} from \"./app\";\n//import {XAPIPlugin} from \"./xapi/app\";\nimport {VERSION} from \"./version\";\n\nexport function start() {\n    ssla.start();\n}\n\nexport function navigate(type: string) {\n    if (type === \"next\") {\n        scormPlugin.loadScoByIndex(scormPlugin.currentScoIndex + 1);\n    }\n    else if (type === \"previous\") {\n        scormPlugin.loadScoByIndex(scormPlugin.currentScoIndex - 1);\n    }\n    else if (type === \"exit\") {\n        ssla.exit();\n    }\n}\n\nexport function navigateByIdentifier(id: string) {\n    scormPlugin.loadScoByIdentifier(id);\n}\n\nexport function finish() {\n    scormPlugin.endPreviousSco();\n}\n\nlet scormPlugin = new Scorm2004Plugin();\n//let xapiPlugin = new XAPIPlugin();\nexport let ssla = new SSLA();\nssla.registerPlugin(\"scorm\", scormPlugin);\n// ssla.registerPlugin(\"xapi\", xapiPlugin);\nexport let version = VERSION;\n\n\n// WEBPACK FOOTER //\n// ./src/app_12_2004.ts","import * as Scorm12Api from \"../12/api12\";\nimport * as Scorm2004Api from \"./api2004\";\nimport {ScoNavItem, Manifest} from \"../manifest\";\nimport * as Path from \"../path\";\nimport * as Storage from \"../storage\";\nimport {TableOfContents} from \"../toc\";\nexport {UrlVarService} from \"../url\";\nimport {ScormPlugin} from \"../scorm/plugin\";\n\n\nexport class Scorm2004Plugin extends ScormPlugin {\n    public API: Scorm12Api.Scorm12Api = null;\n    public API_1484_11: Scorm2004Api.Scorm2004Api = null;\n\n    initializeApi(scoNav: ScoNavItem): void {\n        if (this.manifest.schemaVersionMain === \"1.2\") {\n            let i = this.scosData.scos[scoNav.identifier];\n            i.set(\"cmi.core.student_id\", this.config.studentId());\n            i.set(\"cmi.core.student_name\", this.config.studentName());\n            i.set(\"cmi.launch_data\", scoNav.dataFromLms);\n            i.set(\"cmi.student_data.mastery_score\", scoNav.masteryScore);\n            i.set(\"cmi.student_data.max_time_allowed\", scoNav.maxTimeAllowed);\n            i.set(\"cmi.student_data.time_limit_action\", scoNav.timeLimitAction);\n            i.set(\"cmi.core.credit\", this.config.getCredit());\n            i.set(\"cmi.core.mode\", this.config.getMode());\n\n            this.API = new Scorm12Api.Scorm12Api(scoNav.identifier, (<Scorm12Api.Sco12Data>this.scosData.scos[scoNav.identifier]), this.events, this.config);\n            this.API.addSaveCallback(this.storage.save, this.storage);\n            (<any>window).API = this.API;\n        }\n        else if (this.manifest.schemaVersionMain === \"2004\") {\n            let i = this.scosData.scos[scoNav.identifier];\n            i.set(\"cmi.learner_id\", this.config.studentId());\n            i.set(\"cmi.learner_name\", this.config.studentName());\n            i.set(\"cmi.launch_data\", scoNav.dataFromLms);\n            i.set(\"cmi.max_time_allowed\", scoNav.maxTimeAllowed);\n            i.set(\"cmi.time_limit_action\", scoNav.timeLimitAction);\n            i.set(\"cmi.credit\", this.config.getCredit());\n            i.set(\"cmi.mode\", this.config.getMode());\n\n            this.API_1484_11 = new Scorm2004Api.Scorm2004Api(scoNav.identifier, (<Scorm2004Api.Sco2004Data>this.scosData.scos[scoNav.identifier]), this.events, this.config);\n            this.API_1484_11.addSaveCallback(this.storage.save, this.storage);\n            (<any>window).API_1484_11 = this.API_1484_11;\n        }\n        else {\n            alert(\"Manifest schema version unrecognized: \" + this.manifest.schemaVersionMain);\n        }\n    }\n\n    endPreviousSco(): void {\n        if (this.currentSco) {\n            this.scosData.scos[this.currentSco.identifier].stopViewing();\n            if (this.manifest.schemaVersionMain === \"1.2\") {\n                this.API.LMSFinish(\"\");\n            }\n            else if (this.manifest.schemaVersionMain === \"2004\") {\n                this.API_1484_11.Terminate(\"\");\n            }\n        }\n    }\n\n    initializeScosData(): void {\n        let i: number;\n        // Now that we know the version, build the data structure that uses it.\n        if (this.manifest.schemaVersionMain === \"1.2\") {\n            this.scosData = new Scorm12Api.AllScos12Data();\n            for (i = 0; i < this.manifest.scoInOrderTraversal.length; i++) {\n                this.scosData.scos[this.manifest.scoInOrderTraversal[i].identifier] = new Scorm12Api.Sco12Data();\n            }\n        }\n        else if (this.manifest.schemaVersionMain === \"2004\") {\n            this.scosData = new Scorm2004Api.AllScos2004Data();\n            for (i = 0; i < this.manifest.scoInOrderTraversal.length; i++) {\n                this.scosData.scos[this.manifest.scoInOrderTraversal[i].identifier] = new Scorm2004Api.Sco2004Data();\n            }\n        }\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/2004/app.ts","import {Scorm12DataModel} from \"./dm12\";\nimport * as Sco from \"../sco\";\nimport ScoVar = Sco.ScoVar;\nimport {SSLAApiEvents} from \"../events\";\nimport {SSLAConfiguration} from \"../config\";\n\nconst API_FALSE = \"false\";\nconst API_TRUE = \"true\";\n\n\nexport class Sco12Data extends Sco.ScoData {\n    interactionCount: number = 0;\n    objectiveCount: number = 0;\n    interactionObjectiveCount: { [interactionIndex: string]: number; } = {};\n    correctResponsesCount: { [interactionIndex: string]: number; } = {};\n\n    fillDefaults() {\n        this.data[\"cmi.core.lesson_status\"] = new ScoVar(\"not attempted\");\n        this.data[\"cmi.suspend_data\"] = new ScoVar(\"\");\n        this.data[\"cmi.core.lesson_location\"] = new ScoVar(\"\");\n        this.data[\"cmi.core.session_time\"] = new ScoVar(\"0000:00:00\");\n        this.data[\"cmi.core.total_time\"] = new ScoVar(\"0000:00:00\");\n        // This is to initialize the data model element for the first attempt only, after the first attempt it will no longer be ab-initio\n        this.data[\"cmi.core.entry\"] = new ScoVar(\"ab-initio\");\n        this.data[\"cmi.core.score.raw\"] = new ScoVar(\"\");\n        this.data[\"cmi.core.score.min\"] = new ScoVar(\"\");\n        this.data[\"cmi.core.score.max\"] = new ScoVar(\"\");\n        this.data[\"cmi.comments\"] = new ScoVar(\"\");\n        this.data[\"cmi.comments_from_lms\"] = new ScoVar(\"No comment\");\n        this.data[\"cmi.student_preference.audio\"] = new ScoVar(\"\");\n        this.data[\"cmi.student_preference.language\"] = new ScoVar(\"\");\n        this.data[\"cmi.student_preference.speed\"] = new ScoVar(\"\");\n        this.data[\"cmi.student_preference.text\"] = new ScoVar(\"\");\n\n        this.data[\"cmi.core.student_name\"] = new ScoVar(\"\");\n        this.data[\"cmi.core.student_id\"] = new ScoVar(\"\");\n        this.data[\"cmi.launch_data\"] = new ScoVar(\"\");\n        this.data[\"cmi.student_data.mastery_score\"] = new ScoVar(\"\");\n        this.data[\"cmi.student_data.max_time_allowed\"] = new ScoVar(\"\");\n        this.data[\"cmi.student_data.time_limit_action\"] = new ScoVar(\"\");\n        this.data[\"cmi.core.credit\"] = new ScoVar(\"credit\");\n        this.data[\"cmi.core.lesson_mode\"] = new ScoVar(\"normal\");\n    }\n\n    canImportKey(key:string): boolean {\n        if (key == \"cmi.core.session_time\") {\n            return false;\n        }\n        return true;\n    }\n\n    getScore(): string {\n        return <string>this.data[\"cmi.core.score.raw\"].get();\n    }\n\n    getSessionTime(): string {\n        return <string>this.data[\"cmi.core.session_time\"].get();\n    }\n\n    getStatus(): string {\n        return <string>this.data[\"cmi.core.lesson_status\"].get();\n    }\n\n    getTotalTime(): string {\n        return <string>this.data[\"cmi.core.total_time\"].get();\n    }\n\n    populateMaxes(): void {\n        let i: number,\n            dme: string;\n        this.interactionCount = this.getMaxIndex(\"cmi.interactions.\") + 1;\n        this.updateInteractionCountDme();\n        this.objectiveCount = this.getMaxIndex(\"cmi.objectives.\") + 1;\n        this.updateObjectiveCountDme();\n        for (i = 0; i < this.interactionCount; i++) {\n            dme = \"cmi.interactions.\" + i + \".objectives.\";\n            this.interactionObjectiveCount[i] = this.getMaxIndex(dme) + 1;\n            this.updateInteractionObjectiveCountDme(i);\n        }\n        for (i = 0; i < this.interactionCount; i++) {\n            dme = \"cmi.interactions.\" + i + \".correct_responses.\";\n            this.correctResponsesCount[i] = this.getMaxIndex(dme) + 1;\n            this.updateCorrectResponsesCountDme(i);\n        }\n    }\n\n    set(dme: string, value: string) {\n        super.set(dme, value);\n        let dmeParts: string[] = dme.split(\".\");\n        if (dmeParts[1] === \"interactions\") {\n            this.interactionCount = Math.max(Number(dmeParts[2]) + 1, this.interactionCount);\n            this.updateInteractionCountDme();\n            if (dmeParts[3] === \"objectives\") {\n                this.interactionObjectiveCount[dmeParts[2]] = Math.max(Number(dmeParts[4]) + 1, this.interactionObjectiveCount[dmeParts[2]]);\n                this.updateInteractionObjectiveCountDme(Number(dmeParts[2]));\n            }\n            else {\n                // Make sure that the counts are always updated if a new item has been added.\n                this.updateInteractionObjectiveCountDme(Number(dmeParts[2]));\n            }\n\n            if (dmeParts[3] === \"correct_responses\") {\n                this.correctResponsesCount[dmeParts[2]] = Math.max(Number(dmeParts[4]) + 1, this.correctResponsesCount[dmeParts[2]]);\n                this.updateCorrectResponsesCountDme(Number(dmeParts[2]));\n            }\n            else {\n                // Make sure that the counts are always updated if a new item has been added.\n                this.updateCorrectResponsesCountDme(Number(dmeParts[2]));\n            }\n        }\n        else if (dmeParts[1] === \"objectives\") {\n            this.objectiveCount = Math.max(Number(dmeParts[2]) + 1, this.objectiveCount);\n            this.updateObjectiveCountDme();\n        }\n    }\n\n    protected updateInteractionCountDme() {\n        this.data[\"cmi.interactions._count\"] = new ScoVar(this.interactionCount);\n    }\n\n    protected updateObjectiveCountDme() {\n        this.data[\"cmi.objectives._count\"] = new ScoVar(this.objectiveCount);\n    }\n\n    protected updateInteractionObjectiveCountDme(index: number) {\n        if (!this.interactionObjectiveCount[index]) {\n            this.interactionObjectiveCount[index] = 0;\n        }\n        this.data[\"cmi.interactions.\" + index + \".objectives._count\"] = new ScoVar(this.interactionObjectiveCount[index]);\n    }\n\n    protected updateCorrectResponsesCountDme(index: number) {\n        if (!this.correctResponsesCount[index]) {\n            this.correctResponsesCount[index] = 0;\n        }\n        this.data[\"cmi.interactions.\" + index + \".correct_responses._count\"] = new ScoVar(this.correctResponsesCount[index]);\n    }\n}\n\n\nexport class AllScos12Data extends Sco.AllScosData {\n    addTimes(one:string, two:string): string {\n        return Scorm12TimeManager.addTime(one, two);\n    }\n\n    makeNewScoData(): Sco.ScoData {\n        return new Sco12Data();\n    }\n}\n\n\nclass Scorm12TimeManager {\n    public static addTime(one:string, two:string):string {\n        if (!one) {\n            return \"\";\n        }\n        if (!two) {\n            two = \"0000:00:00\";\n        }\n        var splitSession = one.split(\":\");\n        var totalTime: string = two;\n        var splitTotal = totalTime.split(\":\");\n        var carryOver: number = 0;\n\n        //Add seconds together\n        var seconds: number = Number(splitTotal[2]) + Number(splitSession[2]);\n        if (seconds > 60) {\n            carryOver = Math.floor(seconds / 60);\n            seconds = seconds - (carryOver * 60);\n        }\n\n        var minutes: number = Number(splitTotal[1]) + Number(splitSession[1]) + carryOver;\n        carryOver = 0;\n        if (minutes > 60) {\n            carryOver = Math.floor(minutes / 60);\n            minutes = minutes - (carryOver * 60);\n        }\n\n        var hours: number = Number(splitTotal[0]) + Number(splitSession[0]) + carryOver;\n        if (hours > 9999) {\n            hours = 9999;\n        }\n\n        var padLength: number = 2;\n        var hoursStr: string = this.padTime(hours.toString(), padLength);\n        var minutesStr: string = this.padTime(minutes.toString(), padLength);\n\n        if (splitTotal[2].indexOf(\".\") > -1 || splitSession[2].indexOf(\".\") > -1) {\n            padLength = 5;\n        }\n\n        var secondsStr: string = this.padTime(seconds.toString(), padLength);\n        var timeString: string = hoursStr + \":\" + minutesStr + \":\" + secondsStr;\n        return timeString;\n    }\n\n    private static padTime(str: string, padValue: number) {\n        var zeroes: string = \"0000\";\n        if (str === \"\") {\n            return zeroes.substr(0, padValue);\n        }\n\n        if (str.length < padValue) {\n            var num: number = padValue - str.length;\n            str = zeroes.substr(0, num) + str;\n            return str;\n        }\n\n        return str;\n    }\n}\n\n\nexport class Scorm12Api {\n    protected config: SSLAConfiguration;\n    protected dataModel: Scorm12DataModel;\n    public sco: Sco12Data;\n    public scoName: string;\n    protected error: string = \"0\";\n    protected events: SSLAApiEvents = null;\n    protected saveCallbacks: any[] = [];\n\n    constructor(scoName: string, scoData: Sco12Data, events: SSLAApiEvents, config: SSLAConfiguration) {\n        this.scoName = scoName;\n        this.sco = scoData;\n        this.dataModel = new Scorm12DataModel();\n        this.events = events;\n        this.config = config;\n\n        // Initialize data model properties.\n        this.sco.start = false;\n        this.sco.end = false;\n    }\n\n    private storeTime(session_time: string) {\n        if (!session_time) {\n            return;\n        }\n        let timeString:string = Scorm12TimeManager.addTime(session_time, <string>this.sco.get(\"cmi.core.total_time\"));\n        this.sco.set(\"cmi.core.total_time\", timeString);\n    }\n\n    public addSaveCallback(callbackFn: any, scope: any) {\n        this.saveCallbacks.push([callbackFn, scope]);\n    }\n\n    protected callSave(eventType: string, becauseFinish: boolean) {\n        var i: number;\n        for (i = 0; i < this.saveCallbacks.length; i++) {\n            this.saveCallbacks[i][0].call(this.saveCallbacks[i][1], \"\", {\n                eventType: eventType,\n                scoName: this.scoName,\n                sco: this.sco,\n                forceSync: becauseFinish\n            });\n        }\n    }\n\n    protected initialize(empty: string): string {\n        if (empty !== \"\") {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        // Don't call initialize twice.\n        if (this.sco.start) {\n            this.error = \"101\";\n            return API_FALSE;\n        }\n        // Don't call initialize after finish.\n        if (this.sco.end) {\n            this.error = \"101\";\n            return API_FALSE;\n        }\n\n        this.sco.start = true;\n        this.error = \"0\";\n\n        // TODO: Support config.setInitializeToLMS.\n        // TODO: Offer immediate save?\n        return API_TRUE;\n    }\n\n    protected finish(requiredEmpty: string): string {\n        if (requiredEmpty !== \"\") {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        if (!this.sco.start) {\n            this.error = \"301\";\n            return API_FALSE;\n        }\n        if (this.sco.end) {\n            this.error = \"301\";\n            return API_FALSE;\n        }\n        // TODO: Support config.completeContentOnExit.\n\n        // Update course status if a mastery score exists.\n        var masteryScore: string = <string>this.sco.get(\"cmi.student_data.mastery_score\");\n        if (masteryScore !== \"\") {\n            var rawScore: string = <string>this.sco.get(\"cmi.core.score.raw\");\n            if (rawScore !== \"\") {\n                if (parseInt(rawScore, 10) >= parseInt(masteryScore, 10)) {\n                    this.sco.set(\"cmi.core.lesson_status\", \"passed\");\n                }\n                else {\n                    this.sco.set(\"cmi.core.lesson_status\", \"failed\");\n                }\n            }\n        }\n\n        var sessionTime: string = <string>this.sco.get(\"cmi.core.session_time\");\n        this.storeTime(sessionTime);\n\n        // Update entry status based on current exit.\n        if (this.sco.get(\"cmi.core.exit\") === \"suspend\") {\n            this.sco.set(\"cmi.core.entry\", \"resume\");\n        }\n        else {\n            this.sco.set(\"cmi.core.entry\", \"\");\n        }\n\n        // TODO: Support config.setFinishToLMS.\n        this.sco.end = true;\n        this.error = \"0\";\n        this.callSave(\"finish\", true);\n        return API_TRUE;\n    }\n\n    protected getValue(dme: string): string | number {\n        if (!this.sco.start) {\n            this.error = \"301\";\n            return \"\";\n        }\n        if (this.sco.end) {\n            this.error = \"301\";\n            return \"\";\n        }\n        if (dme === undefined || dme === null) {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        dme = String(dme);\n\n        // Ensure the element is in the SCORM data model.\n        let dm = this.dataModel.matchElement(dme);\n        if (!dm) {\n            this.error = \"201\";\n            return \"\";\n        }\n        // Ensure the element is not write-only.\n        if (dm.d === \"W\") {\n            this.error = \"404\";\n            return \"\";\n        }\n\n        this.error = \"0\";\n        if (dm.t === \"Fixed\") {\n            return dm.v;\n        }\n        return this.sco.get(dme);\n    }\n\n    protected setValue(dme: string, value: string): string {\n        let actuallySet: boolean = true;\n\n        if (!this.sco.start) {\n            this.error = \"301\";\n            return API_FALSE;\n        }\n        if (this.sco.end) {\n            this.error = \"301\";\n            return API_FALSE;\n        }\n        if (dme === undefined || dme === null) {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        dme = String(dme);\n        if (value === undefined || value === null) {\n            value = \"\";\n        }\n        value = String(value);\n\n        // Ensure the element is in the SCORM data model.\n        let dm = this.dataModel.matchElement(dme);\n        if (!dm) {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        // Ensure the element is not read-only.\n        if (dm.d === \"R\") {\n            this.error = \"403\";\n            return API_FALSE;\n        }\n\n        // cmi.comments has to be concatenated to the existing value.\n        if (dme === \"cmi.comments\") {\n            value = this.sco.get(\"cmi.comments\") + value;\n        }\n\n        let validResult: boolean;\n        // Coerce into a string.\n        let v: string = \"\" + value;\n        if (dm.t === \"CMIDecimal\") {\n            validResult = this.dataModel.validateDecimal(v, dm.min, dm.max);\n        }\n        else if (dm.t === \"CMIFeedback\") {\n            validResult = this.dataModel.validateFeedback(v);\n        }\n        else if (dm.t === \"CMIIdentifier\") {\n            validResult = this.dataModel.validateIdentifier(v);\n        }\n        else if (dm.t === \"CMIInteger\") {\n            validResult = this.dataModel.validateIntegerUnsigned(v, dm.min, dm.max);\n        }\n        else if (dm.t === \"CMISInteger\") {\n            validResult = this.dataModel.validateIntegerSigned(v, dm.min, dm.max);\n        }\n        else if (dm.t === \"OneOf\") {\n            validResult = this.dataModel.validateOneOf(dm.c, v);\n        }\n        else if (dm.t === \"CMIResult\") {\n            validResult = this.dataModel.validateResult(v);\n        }\n        else if (dm.t === \"CMIString\") {\n            validResult = this.dataModel.validateString(v, dm.l);\n        }\n        else if (dm.t === \"CMITime\") {\n            validResult = this.dataModel.validateTime(v);\n        }\n        else if (dm.t === \"CMITimespan\") {\n            validResult = this.dataModel.validateTimespan(v);\n        }\n        else {\n            console.log(\"Unrecognized data validation type.\", dm.t);\n            this.error = \"101\";\n            return API_FALSE;\n        }\n        if (!validResult) {\n            this.error = \"405\";\n            return API_FALSE;\n        }\n\n        // Check the array types to make sure they don't overflow bounds.\n        let dmeParts: string[] = dme.split(\".\");\n        if (dmeParts[1] === \"interactions\") {\n            if (Number(dmeParts[2]) > this.sco.interactionCount) {\n                this.error = \"201\";\n                return API_FALSE;\n            }\n            if (dmeParts[3] === \"objectives\") {\n                if (Number(dmeParts[4]) > this.sco.interactionObjectiveCount[dmeParts[2]]) {\n                    this.error = \"201\";\n                    return API_FALSE;\n                }\n            }\n            if (dmeParts[3] === \"correct_responses\") {\n                if (Number(dmeParts[4]) > this.sco.correctResponsesCount[dmeParts[2]]) {\n                    this.error = \"201\";\n                    return API_FALSE;\n                }\n            }\n        }\n        if (dmeParts[1] === \"objectives\") {\n            if (Number(dmeParts[2]) > this.sco.objectiveCount) {\n                this.error = \"201\";\n                return API_FALSE;\n            }\n        }\n\n        // Custom score handling logic.\n        if (dme == \"cmi.core.score.raw\") {\n            let rawScore:string = <string>this.sco.get(\"cmi.core.score.raw\");\n            let rawStatus:string = <string>this.sco.get(\"cmi.core.lesson_status\");\n\n            if (\n                rawScore !== \"\" &&\n                (\n                    (rawStatus == \"completed\" && !this.config.scoreAllowChangeAfterCompleted()) ||\n                    (rawStatus == \"passed\" && !this.config.scoreAllowChangeAfterPassed()) ||\n                    (rawStatus == \"failed\" && !this.config.scoreAllowChangeAfterFailed())\n                )\n            ) {\n                // Don't set the score if a terminal status has occurred and the paired configuration option is set.\n                actuallySet = false;\n            }\n            else if (!this.config.scoreAllowReduce()) {\n                if (rawScore !== \"\" && Number(rawScore) > Number(value)) {\n                    // Don't set the score if it would be reduced.\n                    actuallySet = false;\n                }\n            }\n        }\n\n        // Custom status handling logic.\n        if (dme == \"cmi.core.lesson_status\") {\n            let rawStatus:string = <string>this.sco.get(\"cmi.core.lesson_status\");\n            if (\n                (rawStatus == \"completed\" && !this.config.statusAllowChangeAfterCompleted()) ||\n                (rawStatus == \"passed\" && !this.config.statusAllowChangeAfterPassed()) ||\n                (rawStatus == \"failed\" && !this.config.statusAllowChangeAfterFailed())\n            ) {\n                // Don't set the status if a terminal status has occurred and the paired configuration option is set.\n                actuallySet = false;\n            }\n        }\n\n        // TODO: All the rest of the set validation.\n\n        this.error = \"0\";\n        if (actuallySet) {\n            this.sco.set(dme, v);\n            if (dme === \"cmi.core.lesson_status\") {\n                this.events.statusChange.dispatch(v);\n            }\n            if (this.config.saveDataOnSetValue()) {\n                this.callSave(\"setValue\", false);\n            }\n        }\n        return API_TRUE;\n    }\n\n    protected commit(requiredEmpty: string): string {\n        if (requiredEmpty !== \"\") {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        if (!this.sco.start) {\n            this.error = \"301\";\n            return API_FALSE;\n        }\n        if (this.sco.end) {\n            this.error = \"301\";\n            return API_FALSE;\n        }\n\n        this.error = \"0\";\n        if (this.config.saveDataOnCommit()) {\n            this.callSave(\"commit\", false);\n        }\n        return API_TRUE;\n    }\n\n    protected getLastError() {\n        return this.error;\n    }\n\n    protected getErrorString(errorCode: string): string {\n        let errors: { [error: string]: string; } = {\n            \"0\": \"No error\",\n            \"101\": \"General Exception\",\n            \"201\": \"Invalid argument error\",\n            \"202\": \"Element cannot have children\",\n            \"203\": \"Element not an array.\",\n            \"301\": \"Not initialized\",\n            \"401\": \"Not implemented error\",\n            \"402\": \"Invalid set value, element is a keyword\",\n            \"403\": \"Element is read only\",\n            \"404\": \"Element is write only\",\n            \"405\": \"Incorrect Data Type\"\n        };\n        if (errors[errorCode]) {\n            return errors[errorCode];\n        }\n        return \"\";\n    }\n\n    protected getDiagnostic(errorCode: string): string {\n        return this.error;\n    }\n\n    public LMSInitialize(empty: string): string {\n        let ret: string;\n        this.events.preInitialize.dispatch(\"LMSInitialize\", [empty]);\n        ret = this.initialize(empty);\n        this.events.postInitialize.dispatch(\"LMSInitialize\", [empty], ret, this.error);\n        return ret;\n    }\n\n    public LMSFinish(empty: string): string {\n        let ret: string;\n        this.events.preFinish.dispatch(\"LMSFinish\", [empty]);\n        ret = this.finish(empty);\n        this.events.postFinish.dispatch(\"LMSFinish\", [empty], ret, this.error);\n        return ret;\n    }\n\n    public LMSGetValue(dme: string): string | number {\n        let ret: string | number;\n        this.events.preGetValue.dispatch(\"LMSGetValue\", [dme]);\n        ret = this.getValue(dme);\n        this.events.postGetValue.dispatch(\"LMSGetValue\", [dme], ret, this.error);\n        return ret;\n    }\n\n    public LMSSetValue(dme: string, value: string): string {\n        let ret: string;\n        this.events.preSetValue.dispatch(\"LMSSetValue\", [dme, value]);\n        ret = this.setValue(dme, value);\n        this.events.postSetValue.dispatch(\"LMSSetValue\", [dme, value], ret, this.error);\n        return ret;\n    }\n\n    public LMSCommit(requiredEmpty: string): string {\n        let ret: string;\n        this.events.preCommit.dispatch(\"LMSCommit\", [requiredEmpty]);\n        ret = this.commit(requiredEmpty);\n        this.events.postCommit.dispatch(\"LMSCommit\", [requiredEmpty], ret, this.error);\n        return ret;\n    }\n\n    public LMSGetLastError(): string {\n        let ret: string;\n        this.events.preGetLastError.dispatch(\"LMSGetLastError\", []);\n        ret = this.getLastError();\n        this.events.postGetLastError.dispatch(\"LMSGetLastError\", [], ret, this.error);\n        return ret;\n    }\n\n    public LMSGetErrorString(errorCode: string): string {\n        let ret: string;\n        this.events.preGetErrorString.dispatch(\"LMSGetErrorString\", [errorCode]);\n        ret = this.getErrorString(errorCode);\n        this.events.postGetLastError.dispatch(\"LMSGetErrorString\", [errorCode], ret, this.error);\n        return ret;\n    }\n\n    public LMSGetDiagnostic(errorCode: string): string {\n        let ret: string;\n        this.events.preGetDiagnostic.dispatch(\"LMSGetDiagnostic\", [errorCode]);\n        ret = this.getDiagnostic(errorCode);\n        this.events.postGetDiagnostic.dispatch(\"LMSGetDiagnostic\", [errorCode], ret, this.error);\n        return ret;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/12/api12.ts","import {ScormBaseDataModel} from \"../dm\";\n\nexport class Scorm12DataModel extends ScormBaseDataModel {\n    // Element definition: {d: read/write, t: data type, v: hardcoded value}\n    protected statusChoices:any = [\"passed\", \"completed\", \"failed\", \"incomplete\", \"browsed\"];\n    protected objStatusChoices:any = [\"not attempted\", \"passed\", \"completed\", \"failed\", \"incomplete\", \"browsed\"];\n    protected validElements:any = {\n        \"cmi.comments_from_lms\": {d: \"R\", t: \"CMIString\", l: 4096},\n        \"cmi.comments\": {d: \"RW\", t: \"CMIString\", l: 4096},\n        \"cmi.core._children\": {d: \"R\", t: \"Fixed\", v: \"student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time\"},\n        \"cmi.core.credit\": {d: \"R\", t: \"OneOf\", c: [\"credit\", \"no-credit\"]},\n        \"cmi.core.entry\": {d: \"R\", t: \"OneOf\", c: [\"\", \"ab-initio\", \"resume\"]},\n        \"cmi.core.exit\": {d: \"W\", t: \"OneOf\", c: [\"\", \"time-out\", \"logout\", \"suspend\"]},\n        \"cmi.core.lesson_location\": {d: \"RW\", t: \"CMIString\", l: 255},\n        \"cmi.core.lesson_mode\": {d: \"R\", t: \"OneOf\", c: [\"browse\", \"normal\", \"review\"]},\n        \"cmi.core.lesson_status\": {d: \"RW\", t: \"OneOf\", c: this.statusChoices},\n        \"cmi.core.score._children\": {d: \"R\", t: \"Fixed\", v: \"raw,min,max\"},\n        \"cmi.core.score.max\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi.core.score.min\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi.core.score.raw\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi.core.session_time\": {d: \"W\", t: \"CMITimespan\"},\n        \"cmi.core.student_id\": {d: \"R\", t: \"CMIString\", l: 255},\n        \"cmi.core.student_name\": {d: \"R\", t: \"CMIString\", l: 255},\n        \"cmi.core.total_time\": {d: \"R\", t: \"CMITimespan\"},\n        \"cmi.launch_data\": {d: \"R\", t: \"CMIString\", l: 4096},\n        \"cmi.student_data._children\": {d: \"R\", t: \"Fixed\", v: \"mastery_score,max_time_allowed,time_limit_action\"},\n        \"cmi.student_data.mastery_score\": {d: \"R\", t: \"Score\"},\n        \"cmi.student_data.max_time_allowed\": {d: \"R\", t: \"CMITimespan\"},\n        \"cmi.student_data.time_limit_action\": {d: \"R\", t: \"OneOf\", c: [\"exit,message\", \"exit,no message\", \"continue,message\", \"continue,no message\"]},\n        \"cmi.student_preference._children\": {d: \"R\", t: \"Fixed\", v: \"audio,language,speed,text\"},\n        \"cmi.student_preference.audio\": {d: \"RW\", t: \"CMISInteger\", min: -1, max: 100},\n        \"cmi.student_preference.language\": {d: \"RW\", t: \"CMIString\", l: 255},\n        \"cmi.student_preference.speed\": {d: \"RW\", t: \"CMISInteger\", min: -100, max: 100},\n        \"cmi.student_preference.text\": {d: \"RW\", t: \"CMISInteger\", min: -1, max: 1},\n        \"cmi.suspend_data\": {d: \"RW\", t: \"CMIString\", l: 4096},\n        \"cmi.interactions._children\": {d: \"R\", t: \"Fixed\", v: \"id,objectives,time,type,correct_responses,weighting,student_response,result,latency\"},\n        \"cmi.interactions._count\": {d: \"R\", t: \"CMIInteger\"},\n        \"cmi.objectives._children\": {d: \"R\", t: \"Fixed\", v: \"id,score,status\"},\n        \"cmi.objectives._count\": {d: \"R\", t: \"CMIInteger\"}\n    };\n    protected validRegexElements:any = {\n        \"cmi\\\\.interactions.\\\\d+\\\\.id\": {d: \"W\", t: \"CMIIdentifier\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.time\": {d: \"W\", t: \"CMITime\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.type\": {d: \"W\", t: \"OneOf\", c: [\"true-false\", \"choice\", \"fill-in\", \"matching\", \"performance\", \"sequencing\", \"likert\", \"numeric\"]},\n        \"cmi\\\\.interactions.\\\\d+\\\\.weighting\": {d: \"W\", t: \"CMIDecimal\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.student_response\": {d: \"W\", t: \"CMIFeedback\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.result\": {d: \"W\", t: \"CMIResult\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.latency\": {d: \"W\", t: \"CMITimespan\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.objectives\\\\._count\": {d: \"R\", t: \"CMIInteger\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.objectives\\\\._children\": {d: \"R\", t: \"Fixed\", v: \"id\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.objectives.\\\\d+\\\\.id\": {d: \"W\", t: \"CMIIdentifier\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses\\\\._count\": {d: \"R\", t: \"CMIInteger\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses\\\\._children\": {d: \"R\", t: \"Fixed\", v: \"pattern\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses.\\\\d+\\\\.pattern\": {d: \"W\", t: \"CMIFeedback\"},\n        \"cmi\\\\.objectives.\\\\d+\\\\.id\": {d: \"RW\", t: \"CMIIdentifier\"},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\._children\": {d: \"R\", t: \"Fixed\", v: \"raw,min,max\"},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.raw\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.max\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.min\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi\\\\.objectives.\\\\d+\\\\.status\": {d: \"RW\", t: \"OneOf\", c: this.objStatusChoices}\n    };\n\n    validateResult(value:string):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n        let res = value.match(/^correct$|^wrong$|^unanticipated$|^neutral$|^([0-9]{0,3})?(\\.[0-9]{1,2})?$/);\n        if (res && res.length) {\n            return true;\n        }\n        return false;\n    }\n\n    validateTime(value:string):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n        let res = value.match(/^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(\\.[0-9]{1,2})?$/);\n        if (res && res.length) {\n            return true;\n        }\n        return false;\n    }\n\n    validateTimespan(value:string):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n        let res = value.match(/^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(\\.[0-9]{1,2})?$/);\n        if (res && res.length) {\n            return true;\n        }\n        return false;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/12/dm12.ts","export class ScormBaseDataModel {\n    protected validElements:any;\n    protected validRegexElements:any\n\n    matchElement(element:string):any {\n        if (this.validElements[element]) {\n            return this.validElements[element];\n        }\n        let regexKeys = Object.keys(this.validRegexElements);\n        for (var i=0; i < regexKeys.length; i++) {\n            if (element.match(new RegExp(\"^\" + regexKeys[i] + \"$\"))) {\n                return this.validRegexElements[regexKeys[i]];\n            }\n        }\n        return null;\n    }\n\n    validateDecimal(value:string, min:number, max:number):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n\n        // let res = value.match(/^-?([0-9]{0,3})(\\.[0-9]{1,2})?$/);\n        // if (!res || !res.length) {\n        //     return false;\n        // }\n\n        let v:number = parseInt(value, 10);\n        if (isNaN(v)) {\n            return false;\n        }\n\n        if (typeof min !== undefined) {\n            if (v < min) {\n                return false;\n            }\n        }\n        if (typeof max !== undefined) {\n            if (v > max) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    validateFeedback(value:string):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n        let res = value.match(/^.{0,255}/);\n        if (res && res.length) {\n            return true;\n        }\n        return false;\n    }\n\n    validateIdentifier(value:string):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n        let res = value.match(/^\\w{1,255}$/);\n        if (res && res.length) {\n            return true;\n        }\n        return false;\n    }\n\n    validateIntegerSigned(value:string, min:number, max:number):boolean {\n        let v:number = parseInt(value, 10);\n        if (isNaN(v)) {\n            return false;\n        }\n        if (v <= -32768 || v >= 32768) {\n            return false;\n        }\n        if (typeof min !== undefined) {\n            if (v < min) {\n                return false;\n            }\n        }\n        if (typeof max !== undefined) {\n            if (v > max) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    validateIntegerUnsigned(value:string, min:number, max:number):boolean {\n        let v:number = parseInt(value, 10);\n        if (isNaN(v)) {\n            return false;\n        }\n        if (v <= 0 || v >= 65536) {\n            return false;\n        }\n        if (typeof min !== undefined) {\n            if (v < min) {\n                return false;\n            }\n        }\n        if (typeof max !== undefined) {\n            if (v > max) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    validateOneOf(oneOf:string[], value:string):boolean {\n        let i:number;\n        for (i=0; i < oneOf.length; i++) {\n            if (oneOf[i] === value) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    validateString(value:string, length:number):boolean {\n        return value.length <= length;\n    }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dm.ts","import {rollupAllScoScores} from \"./score_rollup\";\nimport {rollupAllScoStatuses} from \"./status_rollup\";\nimport {SSLAConfiguration} from \"./config\";\n\nexport type ScoFlatData = {\n    status: string;\n    score: string;\n    sessionTime: string;\n    totalTime: string;\n    sessionWallTime: number;\n    totalWallTime: number;\n    lastOpenedAt: number;\n    lastClosedAt: number;\n    data: {[dme:string]:string|number};\n};\nexport type ScosFlatData = {\n    status: string;\n    score: string;\n    sessionTime: string;\n    totalTime: string;\n    currentSco: string;\n    sessionWallTime: number;\n    totalWallTime: number;\n    lastOpenedAt: number;\n    lastClosedAt: number;\n    scos: {[scoName:string]:ScoFlatData;}\n}\n\n\nexport class ScoVar {\n    protected _value:number|string = \"\";\n    protected dirty:boolean = false;\n    protected wasSet:boolean = false;\n\n    constructor(v:string|number=\"\") {\n        this._value = v;\n    }\n\n    get():number|string {\n        return this._value;\n    }\n\n    set(d:number|string) {\n        if (d === undefined || d === null) {\n            d = \"\";\n        }\n        if (typeof d !== \"number\") {\n            d = String(d);\n        }\n        if (this._value !== d) {\n            this.dirty = true;\n        }\n        this._value = d;\n        this.wasSet = true;\n    }\n\n    isDirty():boolean {\n        return this.dirty;\n    }\n\n    isSet():boolean {\n        return this.wasSet;\n    }\n}\n\n\nexport abstract class ScoData {\n    public start:boolean = false;\n    public end:boolean = false;\n    protected data:{[dme:string]:ScoVar;};\n    protected dirty:boolean = false;\n    protected wasSet:boolean = false;\n    protected totalWallTimeAtStart:number = 0;\n    protected currentWallTimeStart:number = 0;\n    protected currentWallTimeEnd:number = 0;\n\n    constructor() {\n        this.start = false;\n        this.end = false;\n        this.data = {};\n        this.fillDefaults();\n        this.populateMaxes();\n    }\n\n    fillDefaults() {\n    }\n\n    abstract canImportKey(key:string):boolean;\n    abstract getScore():string;\n    abstract getSessionTime():string;\n    abstract getStatus():string;\n    abstract getTotalTime():string;\n    abstract populateMaxes():void;\n\n    getMaxIndex(prefix:string):number {\n        // Prefix must end in a \".\" or else this method will not work correctly.\n        let i:number,\n            prefixLen:number = prefix.length,\n            dmeSplit:string[],\n            maxIndex = -1,\n            dmes:string[] = this.keys(),\n            n:number;\n        for (i=0; i < dmes.length; i++) {\n            if (dmes[i].substring(0, prefixLen) === prefix) {\n                dmeSplit = dmes[i].substring(prefixLen).split(\".\");\n                n = Number(dmeSplit[0]);\n                if (!isNaN(n)) {\n                    maxIndex = Math.max(n, maxIndex);\n                }\n            }\n        }\n        return maxIndex;\n    }\n\n    exportData():ScoFlatData {\n        let flatData:{[dme:string]:string|number;} = {};\n        let scoFlat:ScoFlatData = {\n            status: this.getStatus(),\n            score: this.getScore(),\n            sessionTime: this.getSessionTime(),\n            totalTime: this.getTotalTime(),\n            sessionWallTime: 0,\n            totalWallTime: 0,\n            lastOpenedAt: this.currentWallTimeStart,\n            lastClosedAt: this.currentWallTimeEnd,\n            data: flatData\n        };\n\n        // If we've ended the session, use the known session time.  Otherwise calculate from current time against\n        // the last session start time, to give us as close to a current point as we can.\n        // This differs from SCORM logic, where these values are generally only updated at the end of the SCO.\n        if (this.currentWallTimeEnd) {\n            scoFlat.sessionWallTime = this.currentWallTimeEnd - this.currentWallTimeStart;\n        }\n        else if (this.currentWallTimeStart) {\n            scoFlat.sessionWallTime = new Date().getTime() - this.currentWallTimeStart;\n        }\n        scoFlat.totalWallTime = this.totalWallTimeAtStart + scoFlat.sessionWallTime;\n\n        let k:string;\n        for (k in this.data) {\n            if (this.data.hasOwnProperty(k)) {\n                flatData[k] = this.data[k].get();\n            }\n        }\n        return scoFlat;\n    };\n\n    importData(unflattenData:ScoFlatData) {\n        let k:string;\n        for (k in unflattenData.data) {\n            if (unflattenData.data.hasOwnProperty(k)) {\n                if (this.canImportKey(k)) {\n                    // Intentionally prevent dirty/isSet flag setting on import.\n                    this.data[k] = new ScoVar(unflattenData.data[k]);\n                }\n            }\n        }\n        this.populateMaxes();\n        this.totalWallTimeAtStart = 0;\n        if (unflattenData.totalWallTime) {\n            this.totalWallTimeAtStart = unflattenData.totalWallTime;\n        }\n    }\n\n    get(dme:string):string|number {\n        if (!this.data[dme]) {\n            return \"\";\n        }\n        return this.data[dme].get();\n    }\n\n    set(dme:string, value:string) {\n        if (!this.data[dme]) {\n            this.data[dme] = new ScoVar();\n        }\n        this.data[dme].set(value);\n        this.dirty = this.dirty || this.data[dme].isDirty();\n        this.wasSet = true;\n    }\n\n    isDirty():boolean {\n        return this.dirty;\n    }\n\n    isSet():boolean {\n        return this.wasSet;\n    }\n\n    keys():string[] {\n        return Object.keys(this.data);\n    }\n\n    startViewing():void {\n        this.currentWallTimeStart = new Date().getTime();\n        this.currentWallTimeEnd = 0;\n    }\n\n    stopViewing():void {\n        this.currentWallTimeEnd = new Date().getTime();\n    }\n}\n\n\nexport abstract class AllScosData {\n    public scos:{[scoName:string]:ScoData;} = {};\n    public currentScoId:string = null;\n    protected sessionTime:string = \"\";\n    protected totalTime:string = \"\";\n    protected currentWallTimeStart:number = 0;\n    protected currentWallTimeEnd:number = 0;\n    protected totalWallTimeAtStart:number = 0;\n\n    abstract addTimes(one:string, two:string): string;\n    abstract makeNewScoData():ScoData;\n\n    exportData(config:SSLAConfiguration):ScosFlatData {\n        let d:ScosFlatData = {\n            status: \"\",\n            score: \"\",\n            sessionTime: \"\",\n            totalTime: \"\",\n            sessionWallTime: 0,\n            totalWallTime: 0,\n            lastOpenedAt: this.currentWallTimeStart,\n            lastClosedAt: this.currentWallTimeEnd,\n            currentSco: this.currentScoId,\n            scos: {}\n        };\n        let k:string;\n\n        // If we've ended the session, use the known session time.  Otherwise calculate from current time against\n        // the last session start time, to give us as close to a current point as we can.\n        // This differs from SCORM logic, where these values are generally only updated at the end of the SCO.\n        if (this.currentWallTimeEnd) {\n            d.sessionWallTime = this.currentWallTimeEnd - this.currentWallTimeStart;\n        }\n        else {\n            d.sessionWallTime = new Date().getTime() - this.currentWallTimeStart;\n        }\n        d.totalWallTime = this.totalWallTimeAtStart + d.sessionWallTime;\n\n        for (k in this.scos) {\n            if (this.scos.hasOwnProperty(k)) {\n                d.scos[k] = this.scos[k].exportData();\n                d.sessionTime = this.addTimes(this.scos[k].getSessionTime(), d.sessionTime);\n                d.totalTime = this.addTimes(this.scos[k].getTotalTime(), d.totalTime);\n            }\n        }\n        d.status = rollupAllScoStatuses(this, config);\n        d.score = rollupAllScoScores(this, config);\n        return d;\n    };\n\n    importData(unflattenData:ScosFlatData) {\n        let k:string;\n        this.currentScoId = unflattenData.currentSco;\n        for (k in unflattenData.scos) {\n            if (unflattenData.scos.hasOwnProperty(k)) {\n                this.scos[k] = this.makeNewScoData();\n                this.scos[k].importData(unflattenData.scos[k]);\n            }\n        }\n        this.totalWallTimeAtStart = 0;\n        if (unflattenData.totalWallTime) {\n            this.totalWallTimeAtStart = unflattenData.totalWallTime;\n        }\n        this.sessionTime = \"\";\n        this.totalTime = \"\";\n        if (unflattenData.totalTime) {\n            this.totalTime = unflattenData.totalTime;\n        }\n    }\n\n    startViewing():void {\n        this.currentWallTimeStart = new Date().getTime();\n        this.currentWallTimeEnd = 0;\n    }\n\n    updateSessionViewing():void {\n        this.currentWallTimeEnd = new Date().getTime();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sco.ts","import {AllScosData} from \"./sco\";\nimport {SSLAConfiguration} from \"./config\";\n\nexport function rollupAllScoScores(allScos:AllScosData, config:SSLAConfiguration):string {\n    if (config.scoreRollupCustomFunction()) {\n        return config.scoreRollupCustomFunction()(allScos, config);\n    }\n\n    let rollupScore: number = 0;\n    let tempScore: string = \"\";\n    let contributingScos: number = 0;\n    let k:string;\n    for (k in allScos.scos) {\n        if (allScos.scos.hasOwnProperty(k)) {\n            tempScore = allScos.scos[k].getScore();\n            if (tempScore !== \"\") {\n                rollupScore += Number(tempScore);\n                contributingScos += 1;\n            }\n            else if (config.scoreRollupIncludeScosWithNoScore()) {\n                contributingScos += 1;\n            }\n        }\n    }\n\n    if (contributingScos == 0) {\n        return \"\";\n    }\n    return String(rollupScore / contributingScos);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/score_rollup.ts","import {AllScosData} from \"./sco\";\nimport {SSLAConfiguration} from \"./config\";\n\nexport function rollupAllScoStatuses(allScos:AllScosData, config:SSLAConfiguration):string {\n    if (config.statusRollupCustomFunction()) {\n        return config.statusRollupCustomFunction()(allScos, config);\n    }\n\n    let rollupStatus:string = \"\";\n    let scoStatus:string = \"\";\n    let k:string;\n    for (k in allScos.scos) {\n        if (allScos.scos.hasOwnProperty(k)) {\n            scoStatus = allScos.scos[k].getStatus();\n            if (scoStatus !== \"\") {\n                switch (rollupStatus) {\n                    case \"\":\n                        rollupStatus = scoStatus;\n                        break;\n                    case \"not attempted\":\n                        switch (scoStatus) {\n                            case \"not attempted\":\n                                break;\n                            case \"incomplete\":\n                                rollupStatus = \"incomplete\";\n                                break;\n                            case \"failed\":\n                                rollupStatus = \"failed\";\n                                break;\n                            case \"completed\":\n                            case \"passed\":\n                                rollupStatus = \"incomplete\";\n                                break;\n                        }\n                        break;\n                    case \"incomplete\":\n                        switch (scoStatus) {\n                            case \"not attempted\":\n                            case \"incomplete\":\n                                break;\n                            case \"failed\":\n                                rollupStatus = scoStatus;\n                                break;\n                            case \"completed\":\n                            case \"passed\":\n                                break;\n                        }\n                        break;\n                    case \"failed\":\n                        // Cannot break out of failed state.\n                        break;\n                    case \"completed\":\n                        switch (scoStatus) {\n                            case \"not attempted\":\n                            case \"incomplete\":\n                                rollupStatus = \"incomplete\";\n                                break;\n                            case \"failed\":\n                                rollupStatus = scoStatus;\n                                break;\n                            case \"completed\":\n                                break;\n                            case \"passed\":\n                                // Passed trumps completed.\n                                rollupStatus = scoStatus;\n                        }\n                        break;\n                    case \"passed\":\n                        switch (scoStatus) {\n                            case \"not attempted\":\n                            case \"incomplete\":\n                                rollupStatus = \"incomplete\";\n                                break;\n                            case \"failed\":\n                                rollupStatus = scoStatus;\n                                break;\n                            case \"completed\":\n                                break;\n                            case \"passed\":\n                                break;\n                        }\n                        break;\n                }\n            }\n        }\n    }\n\n    return rollupStatus;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/status_rollup.ts","import {Scorm2004DataModel} from \"./dm2004\";\nimport * as Sco from \"../sco\";\nimport ScoVar = Sco.ScoVar;\nimport {SSLAApiEvents} from \"../events\";\nimport {SSLAConfiguration} from \"../config\";\n\nconst API_FALSE = \"false\";\nconst API_TRUE = \"true\";\n\ninterface TimeStampMap {\n    [key: string]: number;\n}\n\n\nexport class Sco2004Data extends Sco.ScoData {\n    interactionCount: number = 0;\n    objectiveCount: number = 0;\n    interactionObjectiveCount: { [interactionIndex: string]: number; } = {};\n    correctResponsesCount: { [interactionIndex: string]: number; } = {};\n\n    fillDefaults() {\n        this.data[\"cmi.completion_status\"] = new ScoVar(\"not attempted\");\n        this.data[\"cmi.success_status\"] = new ScoVar(\"unknown\");\n        this.data[\"cmi.suspend_data\"] = new ScoVar(\"\");\n        this.data[\"cmi.location\"] = new ScoVar(\"\");\n        this.data[\"cmi.session_time\"] = new ScoVar(\"PT0S\");\n        this.data[\"cmi.total_time\"] = new ScoVar(\"PT0S\");\n        // This is to initialize the data model element for the first attempt only, after the first attempt it will no longer be ab-initio\n        this.data[\"cmi.entry\"] = new ScoVar(\"ab-initio\");\n        this.data[\"cmi.score.scaled\"] = new ScoVar(\"\");\n        this.data[\"cmi.score.raw\"] = new ScoVar(\"\");\n        this.data[\"cmi.score.min\"] = new ScoVar(\"\");\n        this.data[\"cmi.score.max\"] = new ScoVar(\"\");\n        this.data[\"cmi.learner_preference.audio_level\"] = new ScoVar(\"0\");\n        this.data[\"cmi.learner_preference.language\"] = new ScoVar(\"\");\n        this.data[\"cmi.learner_preference.delivery_speed\"] = new ScoVar(\"0\");\n        this.data[\"cmi.learner_preference.audio_captioning\"] = new ScoVar(\"0\");\n\n        this.data[\"cmi.learner_name\"] = new ScoVar(\"\");\n        this.data[\"cmi.learner_id\"] = new ScoVar(\"\");\n        this.data[\"cmi.launch_data\"] = new ScoVar(\"\");\n        this.data[\"cmi.max_time_allowed\"] = new ScoVar(\"\");\n        this.data[\"cmi.time_limit_action\"] = new ScoVar(\"\");\n        this.data[\"cmi.credit\"] = new ScoVar(\"credit\");\n        this.data[\"cmi.mode\"] = new ScoVar(\"normal\");\n    }\n\n    canImportKey(key:string): boolean {\n        if (key == \"cmi.session_time\") {\n            return false;\n        }\n        return true;\n    }\n\n    getScore(): string {\n        // TODO: Control logic in config?\n        let score: string = <string>this.data[\"cmi.score.raw\"].get();\n        if (score === \"\") {\n            score = <string>this.data[\"cmi.score.scaled\"].get();\n        }\n        return score;\n    }\n\n    getSessionTime(): string {\n        return <string>this.data[\"cmi.session_time\"].get();\n    }\n\n    getStatus(): string {\n        // TODO: Control logic in config?\n        let success: string = <string>this.data[\"cmi.success_status\"].get();\n        let complete: string = <string>this.data[\"cmi.completion_status\"].get();\n        if (complete === \"incomplete\") {\n            return complete;\n        }\n        if (success === \"passed\" || success === \"failed\") {\n            return success;\n        }\n        return complete;\n    }\n\n    getTotalTime(): string {\n        return <string>this.data[\"cmi.total_time\"].get();\n    }\n\n    populateMaxes(): void {\n        let i: number,\n            dme: string;\n        this.interactionCount = this.getMaxIndex(\"cmi.interactions.\") + 1;\n        this.updateInteractionCountDme();\n        this.objectiveCount = this.getMaxIndex(\"cmi.objectives.\") + 1;\n        this.updateObjectiveCountDme();\n        for (i = 0; i < this.interactionCount; i++) {\n            dme = \"cmi.interactions.\" + i + \".objectives.\";\n            this.interactionObjectiveCount[i] = this.getMaxIndex(dme) + 1;\n            this.updateInteractionObjectiveCountDme(i);\n        }\n        for (i = 0; i < this.interactionCount; i++) {\n            dme = \"cmi.interactions.\" + i + \".correct_responses.\";\n            this.correctResponsesCount[i] = this.getMaxIndex(dme) + 1;\n            this.updateCorrectResponsesCountDme(i);\n        }\n    }\n\n    set(dme: string, value: string) {\n        super.set(dme, value);\n        let dmeParts: string[] = dme.split(\".\");\n        if (dmeParts[1] === \"interactions\") {\n            this.interactionCount = Math.max(Number(dmeParts[2]) + 1, this.interactionCount);\n            this.updateInteractionCountDme();\n            if (dmeParts[3] === \"objectives\") {\n                this.interactionObjectiveCount[dmeParts[2]] = Math.max(Number(dmeParts[4]) + 1, this.interactionObjectiveCount[dmeParts[2]]);\n                this.updateInteractionObjectiveCountDme(Number(dmeParts[2]));\n            }\n            else {\n                // Make sure that the counts are always updated if a new item has been added.\n                this.updateInteractionObjectiveCountDme(Number(dmeParts[2]));\n            }\n\n            if (dmeParts[3] === \"correct_responses\") {\n                this.correctResponsesCount[dmeParts[2]] = Math.max(Number(dmeParts[4]) + 1, this.correctResponsesCount[dmeParts[2]]);\n                this.updateCorrectResponsesCountDme(Number(dmeParts[2]));\n            }\n            else {\n                // Make sure that the counts are always updated if a new item has been added.\n                this.updateCorrectResponsesCountDme(Number(dmeParts[2]));\n            }\n        }\n        else if (dmeParts[1] === \"objectives\") {\n            this.objectiveCount = Math.max(Number(dmeParts[2]) + 1, this.objectiveCount);\n            this.updateObjectiveCountDme();\n        }\n    }\n\n    protected updateInteractionCountDme() {\n        this.data[\"cmi.interactions._count\"] = new ScoVar(this.interactionCount);\n    }\n\n    protected updateObjectiveCountDme() {\n        this.data[\"cmi.objectives._count\"] = new ScoVar(this.objectiveCount);\n    }\n\n    protected updateInteractionObjectiveCountDme(index: number) {\n        if (!this.interactionObjectiveCount[index]) {\n            this.interactionObjectiveCount[index] = 0;\n        }\n        this.data[\"cmi.interactions.\" + index + \".objectives._count\"] = new ScoVar(this.interactionObjectiveCount[index]);\n    }\n\n    protected updateCorrectResponsesCountDme(index: number) {\n        if (!this.correctResponsesCount[index]) {\n            this.correctResponsesCount[index] = 0;\n        }\n        this.data[\"cmi.interactions.\" + index + \".correct_responses._count\"] = new ScoVar(this.correctResponsesCount[index]);\n    }\n}\n\n\nexport class AllScos2004Data extends Sco.AllScosData {\n    addTimes(one:string, two:string): string {\n        return Scorm2004TimeManager.addTime(one, two);\n    }\n\n    makeNewScoData(): Sco.ScoData {\n        return new Sco2004Data();\n    }\n}\n\n\nclass Scorm2004TimeManager {\n    public static dm:Scorm2004DataModel = new Scorm2004DataModel();\n\n    public static addTime(one:string, two:string):string {\n        if (!one) {\n            return \"\";\n        }\n        if (!two) {\n            //Skip aaallll of this if the total time is currently 0\n            return one;\n        }\n        // If the SCO was somehow initialized with invalid data, zero it out.\n        if (!this.dm.validateTimespan(two)) {\n            two = \"PT0S\";\n        }\n        var splitSession = one.split(\"P\");\n        var splitTotal = two.split(\"P\");\n        var hasTimeBlock = one.indexOf(\"T\") > -1 || two.indexOf(\"T\") > -1;\n        var sessionTime = this.parseTimestamp(splitSession[1]);\n        var totalTime = this.parseTimestamp(splitTotal[1]);\n        var timeString: string = \"P\";\n        var calendarValues: string[] = [\"yearVal\", \"monthVal\", \"dayVal\"];\n        var timeValues: string[] = [\"hourVal\", \"minVal\"];\n\n        for (var i: number = 0; i < calendarValues.length; i++) {\n            timeString += this.addValuesToTimeString(calendarValues[i], sessionTime, totalTime);\n        }\n\n        if (hasTimeBlock) {\n            timeString += \"T\";\n\n            for (var i: number = 0; i < timeValues.length; i++) {\n                timeString += this.addValuesToTimeString(timeValues[i], sessionTime, totalTime);\n            }\n\n            if (sessionTime[\"secVal\"] || totalTime[\"secVal\"]) {\n                if (sessionTime[\"secVal\"] && totalTime[\"secVal\"]) {\n                    //Only adding the seconds with roll over because that's all we actually have to do\n                    var seconds: number = sessionTime[\"secVal\"] + totalTime[\"secVal\"];\n                    var decimalVal = seconds % 1;\n\n                    if (decimalVal !== 0 && decimalVal > 0.99) {\n                        seconds = (seconds - decimalVal) + (Math.round(decimalVal * 100) / 100);\n                    }\n                    totalTime[\"secVal\"] = seconds;\n                }\n\n                if (!totalTime[\"secVal\"]) {\n                    totalTime[\"secVal\"] = sessionTime[\"secVal\"];\n                }\n\n                timeString += totalTime[\"secVal\"].toString() + \"S\";\n            }\n        }\n\n        if (timeString == \"P\" || timeString == \"PT\") {\n            // Change too short invalid formats to smallest possible valid time.\n            timeString = \"PT0S\";\n        }\n        return timeString;\n    }\n\n    private static addValuesToTimeString(arrayValue: string, sessionTime: TimeStampMap, totalTime: TimeStampMap) {\n        var timeString = \"\";\n\n        if (sessionTime[arrayValue] || totalTime[arrayValue]) {\n\n            if (sessionTime[arrayValue] && totalTime[arrayValue]) {\n                totalTime[arrayValue] = sessionTime[arrayValue] + totalTime[arrayValue];\n            }\n\n            if (!totalTime[arrayValue]) {\n                totalTime[arrayValue] = sessionTime[arrayValue];\n            }\n\n            //The first letter of the timeString is needed to fit the specification (i.e. \"year\" is \"Y\"\n            var firstChar = arrayValue.charAt(0).toUpperCase();\n\n            timeString = totalTime[arrayValue].toString() + firstChar;\n        }\n\n        return timeString;\n    }\n\n    private static parseTimestamp(str: string) {\n        var timeIndex = str.indexOf(\"T\");\n        var timeValues: TimeStampMap = {};\n        var date = str;\n        var timeBlock = \"\";\n\n        if (timeIndex > -1 ) {\n            date = str.substring(0, timeIndex);\n            timeBlock = str.substring(timeIndex + 1, str.length);\n        }\n\n        var yearMatch = date.match(/(\\d+Y|Y)/);\n        var monthMatch = date.match(/(\\d+M|M)/);\n        var dayMatch = date.match(/(\\d+D|D)/);\n\n        var hourMatch = timeBlock.match(/(\\d+H|H)/);\n        var minuteMatch = timeBlock.match(/(\\d+M|M)/);\n        var secondMatch = timeBlock.match(/(\\d+([.]\\d{1,2})?S|S)/);\n\n        if (yearMatch != null) {\n            timeValues[\"yearVal\"] = Number(yearMatch[0].replace(\"Y\", \"\"));\n        }\n\n        if (monthMatch != null) {\n            timeValues[\"monthVal\"] = Number(monthMatch[0].replace(\"M\", \"\"));\n        }\n\n        if (dayMatch != null) {\n            timeValues[\"dayVal\"] = Number(dayMatch[0].replace(\"D\", \"\"));\n        }\n\n        if (hourMatch != null) {\n            timeValues[\"hourVal\"] = Number(hourMatch[0].replace(\"H\", \"\"));\n        }\n\n        if (minuteMatch != null) {\n            timeValues[\"minVal\"] = Number(minuteMatch[0].replace(\"M\", \"\"));\n        }\n\n        if (secondMatch != null) {\n            timeValues[\"secVal\"] = Number(secondMatch[0].replace(\"S\", \"\"));\n        }\n\n        return timeValues;\n    }\n}\n\nexport class Scorm2004Api {\n    protected config: SSLAConfiguration;\n    protected dataModel: Scorm2004DataModel;\n    public sco: Sco2004Data;\n    public scoName: string;\n    protected error: string = \"0\";\n    protected events: SSLAApiEvents = null;\n    protected saveCallbacks: any[] = [];\n\n    constructor(scoName: string, scoData: Sco2004Data, events: SSLAApiEvents, config: SSLAConfiguration) {\n        this.scoName = scoName;\n        this.sco = scoData;\n        this.dataModel = new Scorm2004DataModel();\n        this.events = events;\n        this.config = config;\n\n        // Initialize data model properties.\n        this.sco.start = false;\n        this.sco.end = false;\n    }\n\n    private storeTime(session_time: string) {\n        if (!session_time) {\n            return;\n        }\n        let timeString:string = Scorm2004TimeManager.addTime(session_time, <string>this.sco.get(\"cmi.total_time\"));\n        this.sco.set(\"cmi.total_time\", timeString);\n    }\n\n    public addSaveCallback(callbackFn: any, scope: any) {\n        this.saveCallbacks.push([callbackFn, scope]);\n    }\n\n    protected callSave(eventType: string, becauseFinish: boolean) {\n        var i: number;\n        for (i = 0; i < this.saveCallbacks.length; i++) {\n            this.saveCallbacks[i][0].call(this.saveCallbacks[i][1], \"\", {\n                eventType: eventType,\n                scoName: this.scoName,\n                sco: this.sco,\n                forceSync: becauseFinish\n            });\n        }\n    }\n\n    protected initialize(empty: string): string {\n        if (empty !== \"\") {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        // Don't call initialize after finish.\n        if (this.sco.end) {\n            this.error = \"104\";\n            return API_FALSE;\n        }\n        // Don't call initialize twice.\n        if (this.sco.start) {\n            this.error = \"103\";\n            return API_FALSE;\n        }\n\n        this.sco.start = true;\n        this.error = \"0\";\n\n        // TODO: Support config.setInitializeToLMS.\n        // TODO: Offer immediate save?\n        return API_TRUE;\n    }\n\n    protected finish(requiredEmpty: string): string {\n        if (requiredEmpty !== \"\") {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        if (!this.sco.start) {\n            this.error = \"112\";\n            return API_FALSE;\n        }\n        if (this.sco.end) {\n            this.error = \"113\";\n            return API_FALSE;\n        }\n        // TODO: Support config.completeContentOnExit.\n\n        var sessionTime: string = <string>this.sco.get(\"cmi.session_time\");\n        this.storeTime(sessionTime);\n\n        // Update entry status based on current exit.\n        if (this.sco.get(\"cmi.exit\") === \"suspend\") {\n            this.sco.set(\"cmi.entry\", \"resume\");\n        }\n        else {\n            this.sco.set(\"cmi.entry\", \"\");\n        }\n\n        // TODO: Support config.setFinishToLMS.\n        this.sco.end = true;\n        this.error = \"0\";\n        this.callSave(\"finish\", true);\n        return API_TRUE;\n    }\n\n    protected getValue(dme: string): string | number {\n        if (!this.sco.start) {\n            this.error = \"122\";\n            return \"\";\n        }\n        if (this.sco.end) {\n            this.error = \"123\";\n            return \"\";\n        }\n        if (dme === undefined || dme === null) {\n            this.error = \"301\";\n            return API_FALSE;\n        }\n        dme = String(dme);\n\n        // Ensure the element is in the SCORM data model.\n        let dm = this.dataModel.matchElement(dme);\n        if (!dm) {\n            this.error = \"401\";\n            return \"\";\n        }\n        // Ensure the element is not write-only.\n        if (dm.d === \"W\") {\n            this.error = \"405\";\n            return \"\";\n        }\n\n        this.error = \"0\";\n        if (dm.t === \"Fixed\") {\n            return dm.v;\n        }\n        return this.sco.get(dme);\n    }\n\n    protected setValue(dme: string, value: string): string {\n        let actuallySet: boolean = true;\n\n        if (!this.sco.start) {\n            this.error = \"132\";\n            return API_FALSE;\n        }\n        if (this.sco.end) {\n            this.error = \"133\";\n            return API_FALSE;\n        }\n        if (dme === undefined || dme === null) {\n            this.error = \"351\";\n            return API_FALSE;\n        }\n        dme = String(dme);\n        if (value === undefined || value === null) {\n            value = \"\";\n        }\n        value = String(value);\n\n        // Ensure the element is in the SCORM data model.\n        let dm = this.dataModel.matchElement(dme);\n        if (!dm) {\n            this.error = \"401\";\n            return API_FALSE;\n        }\n        // Ensure the element is not read-only.\n        if (dm.d === \"R\") {\n            this.error = \"404\";\n            return API_FALSE;\n        }\n\n        let validResult: boolean;\n        // Coerce into a string.\n        let v: string = \"\" + value;\n        if (dm.t === \"CMIDecimal\") {\n            validResult = this.dataModel.validateDecimal(v, dm.min, dm.max);\n        }\n        else if (dm.t === \"CMIFeedback\") {\n            validResult = this.dataModel.validateFeedback(v);\n        }\n        else if (dm.t === \"CMIIdentifier\") {\n            validResult = this.dataModel.validateIdentifier(v);\n        }\n        else if (dm.t === \"CMIInteger\") {\n            validResult = this.dataModel.validateIntegerUnsigned(v, dm.min, dm.max);\n        }\n        else if (dm.t === \"CMISInteger\") {\n            validResult = this.dataModel.validateIntegerSigned(v, dm.min, dm.max);\n        }\n        else if (dm.t === \"OneOf\") {\n            validResult = this.dataModel.validateOneOf(dm.c, v);\n        }\n        else if (dm.t === \"CMIResult\") {\n            validResult = this.dataModel.validateResult(v);\n        }\n        else if (dm.t === \"CMIString\") {\n            validResult = this.dataModel.validateString(v, dm.l);\n        }\n        else if (dm.t === \"CMITime\") {\n            validResult = this.dataModel.validateTime(v);\n        }\n        else if (dm.t === \"CMITimespan\") {\n            validResult = this.dataModel.validateTimespan(v);\n        }\n        else {\n            this.error = \"351\";\n            return API_FALSE;\n        }\n        if (!validResult) {\n            // TODO: Distinguish between 406 and 407.\n            this.error = \"406\";\n            return API_FALSE;\n        }\n\n        // Check the array types to make sure they don't overflow bounds.\n        let dmeParts: string[] = dme.split(\".\");\n        if (dmeParts[1] === \"interactions\") {\n            if (Number(dmeParts[2]) > this.sco.interactionCount) {\n                this.error = \"408\";\n                return API_FALSE;\n            }\n            if (dmeParts[3] === \"objectives\") {\n                if (Number(dmeParts[4]) > this.sco.interactionObjectiveCount[dmeParts[2]]) {\n                    this.error = \"408\";\n                    return API_FALSE;\n                }\n            }\n            if (dmeParts[3] === \"correct_responses\") {\n                if (Number(dmeParts[4]) > this.sco.correctResponsesCount[dmeParts[2]]) {\n                    this.error = \"408\";\n                    return API_FALSE;\n                }\n            }\n        }\n        if (dmeParts[1] === \"objectives\") {\n            if (Number(dmeParts[2]) > this.sco.objectiveCount) {\n                this.error = \"408\";\n                return API_FALSE;\n            }\n        }\n\n        // Custom score handling logic.\n        if (dme == \"cmi.score.raw\") {\n            let rawScore:string = <string>this.sco.get(\"cmi.score.raw\");\n            let rawCompletionStatus:string = <string>this.sco.get(\"cmi.completion_status\");\n            let rawSuccessStatus:string = <string>this.sco.get(\"cmi.success_status\");\n\n            if (\n                rawScore !== \"\" &&\n                (\n                    (rawCompletionStatus == \"completed\" && !this.config.scoreAllowChangeAfterCompleted()) ||\n                    (rawSuccessStatus == \"passed\" && !this.config.scoreAllowChangeAfterPassed()) ||\n                    (rawSuccessStatus == \"failed\" && !this.config.scoreAllowChangeAfterFailed())\n                )\n            ) {\n                // Don't set the score if a terminal status has occurred and the paired configuration option is set.\n                actuallySet = false;\n            }\n            else if (!this.config.scoreAllowReduce()) {\n                if (rawScore !== \"\" && Number(rawScore) > Number(value)) {\n                    // Don't set the score if it would be reduced.\n                    actuallySet = false;\n                }\n            }\n        }\n        else if (dme == \"cmi.score.scaled\") {\n            let rawScore:string = <string>this.sco.get(\"cmi.score.scaled\");\n            let rawCompletionStatus:string = <string>this.sco.get(\"cmi.completion_status\");\n            let rawSuccessStatus:string = <string>this.sco.get(\"cmi.success_status\");\n\n            if (\n                rawScore !== \"\" &&\n                (\n                    (rawCompletionStatus == \"completed\" && !this.config.scoreAllowChangeAfterCompleted()) ||\n                    (rawSuccessStatus == \"passed\" && !this.config.scoreAllowChangeAfterPassed()) ||\n                    (rawSuccessStatus == \"failed\" && !this.config.scoreAllowChangeAfterFailed())\n                )\n            ) {\n                // Don't set the score if a terminal status has occurred and the paired configuration option is set.\n                actuallySet = false;\n            }\n            else if (!this.config.scoreAllowReduce()) {\n                if (rawScore !== \"\" && Number(rawScore) > Number(value)) {\n                    // Don't set the score if it would be reduced.\n                    actuallySet = false;\n                }\n            }\n        }\n\n        if (dme == \"cmi.success_status\") {\n            let rawStatus:string = <string>this.sco.get(\"cmi.success_status\");\n            if (\n                (rawStatus == \"passed\" && !this.config.statusAllowChangeAfterPassed()) ||\n                (rawStatus == \"failed\" && !this.config.statusAllowChangeAfterFailed())\n            ) {\n                // Don't set the status if a terminal status has occurred and the paired configuration option is set.\n                actuallySet = false;\n            }\n        }\n        else if (dme == \"cmi.completion_status\") {\n            let rawStatus:string = <string>this.sco.get(\"cmi.completion_status\");\n            if (\n                (rawStatus == \"completed\" && !this.config.statusAllowChangeAfterCompleted())\n            ) {\n                // Don't set the status if a terminal status has occurred and the paired configuration option is set.\n                actuallySet = false;\n            }\n        }\n\n        // TODO: All the rest of the set validation.\n\n        this.error = \"0\";\n        if (actuallySet) {\n            this.sco.set(dme, v);\n            if (dme === \"cmi.completion_status\" || dme === \"cmi.lesson_status\") {\n                this.events.statusChange.dispatch(v);\n            }\n            if (this.config.saveDataOnSetValue()) {\n                this.callSave(\"setValue\", false);\n            }\n        }\n        return API_TRUE;\n    }\n\n    protected commit(requiredEmpty: string): string {\n        if (requiredEmpty !== \"\") {\n            this.error = \"201\";\n            return API_FALSE;\n        }\n        if (!this.sco.start) {\n            this.error = \"142\";\n            return API_FALSE;\n        }\n        if (this.sco.end) {\n            this.error = \"143\";\n            return API_FALSE;\n        }\n\n        this.error = \"0\";\n        if (this.config.saveDataOnCommit()) {\n            this.callSave(\"commit\", false);\n        }\n        return API_TRUE;\n    }\n\n    protected getLastError() {\n        return this.error;\n    }\n\n    protected getErrorString(errorCode: string): string {\n        let errors: { [error: string]: string; } = {\n            \"0\": \"No error\",\n            \"101\": \"General Exception\",\n            \"102\": \"General Initialization Failure\",\n            \"103\": \"Already Initialized\",\n            \"104\": \"Content Instance Terminated\",\n            \"111\": \"General Termination Failure\",\n            \"112\": \"Termination Before Initialization\",\n            \"113\": \"Termination After Termination\",\n            \"122\": \"Retrieve Data Before Initialization\",\n            \"123\": \"Retrieve Data After Termination\",\n            \"132\": \"Store Data Before Initialization\",\n            \"133\": \"Store Data After Termination\",\n            \"142\": \"Commit Before Initialization\",\n            \"143\": \"Commit After Termination\",\n            \"201\": \"General Argument Error\",\n            \"301\": \"General Get Failure\",\n            \"351\": \"General Set Failure\",\n            \"391\": \"General Commit Failure\",\n            \"401\": \"Undefined Data Model Element\",\n            \"402\": \"Unimplemented Data Model Element\",\n            \"403\": \"Data Model Element Value Not Initialized\",\n            \"404\": \"Data Model Element Is Read Only\",\n            \"405\": \"Data Model Element Is Write Only\",\n            \"406\": \"Data Model Element Type Mismatch\",\n            \"407\": \"Data Model Element Value Out Of Range\",\n            \"408\": \"Data Model Dependency Not Established\"\n        };\n        if (errors[errorCode]) {\n            return errors[errorCode];\n        }\n        return \"\";\n    }\n\n    protected getDiagnostic(errorCode: string): string {\n        return this.error;\n    }\n\n    public Initialize(empty: string): string {\n        let ret: string;\n        this.events.preInitialize.dispatch(\"Initialize\", [empty]);\n        ret = this.initialize(empty);\n        this.events.postInitialize.dispatch(\"Initialize\", [empty], ret, this.error);\n        return ret;\n    }\n\n    public Terminate(empty: string): string {\n        let ret: string;\n        this.events.preFinish.dispatch(\"Terminate\", [empty]);\n        ret = this.finish(empty);\n        this.events.postFinish.dispatch(\"Terminate\", [empty], ret, this.error);\n        return ret;\n    }\n\n    public GetValue(dme: string): string | number {\n        let ret: string | number;\n        this.events.preGetValue.dispatch(\"GetValue\", [dme]);\n        ret = this.getValue(dme);\n        this.events.postGetValue.dispatch(\"GetValue\", [dme], ret, this.error);\n        return ret;\n    }\n\n    public SetValue(dme: string, value: string): string {\n        let ret: string;\n        this.events.preSetValue.dispatch(\"SetValue\", [dme, value]);\n        ret = this.setValue(dme, value);\n        this.events.postSetValue.dispatch(\"SetValue\", [dme, value], ret, this.error);\n        return ret;\n    }\n\n    public Commit(requiredEmpty: string): string {\n        let ret: string;\n        this.events.preCommit.dispatch(\"Commit\", [requiredEmpty]);\n        ret = this.commit(requiredEmpty);\n        this.events.postCommit.dispatch(\"Commit\", [requiredEmpty], ret, this.error);\n        return ret;\n    }\n\n    public GetLastError(): string {\n        let ret: string;\n        this.events.preGetLastError.dispatch(\"GetLastError\", []);\n        ret = this.getLastError();\n        this.events.postGetLastError.dispatch(\"GetLastError\", [], ret, this.error);\n        return ret;\n    }\n\n    public GetErrorString(errorCode: string): string {\n        let ret: string;\n        this.events.preGetErrorString.dispatch(\"GetErrorString\", [errorCode]);\n        ret = this.getErrorString(errorCode);\n        this.events.postGetLastError.dispatch(\"GetErrorString\", [errorCode], ret, this.error);\n        return ret;\n    }\n\n    public GetDiagnostic(errorCode: string): string {\n        let ret: string;\n        this.events.preGetDiagnostic.dispatch(\"GetDiagnostic\", [errorCode]);\n        ret = this.getDiagnostic(errorCode);\n        this.events.postGetDiagnostic.dispatch(\"GetDiagnostic\", [errorCode], ret, this.error);\n        return ret;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/2004/api2004.ts","import {ScormBaseDataModel} from \"../dm\";\n\nexport class Scorm2004DataModel extends ScormBaseDataModel {\n    // Element definition: {d: read/write, t: data type, v: hardcoded value, c: list of choices, l: length, min: min, max: max}\n    protected successStatusChoices:any = [\"passed\", \"failed\", \"unknown\"];\n    protected completionStatusChoices:any = [\"not attempted\", \"completed\", \"incomplete\", \"unknown\"];\n    protected validElements:any = {\n        \"cmi._version\": {d: \"R\", t: \"Fixed\", v: \"2004 4th Edition\"},\n        \"cmi.completion_status\": {d: \"RW\", t: \"OneOf\", c: this.completionStatusChoices},\n        \"cmi.completion_threshold\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 1},\n        \"cmi.credit\": {d: \"R\", t: \"OneOf\", c: [\"credit\", \"no-credit\"]},\n        \"cmi.entry\": {d: \"R\", t: \"OneOf\", c: [\"\", \"ab-initio\", \"resume\"]},\n        \"cmi.exit\": {d: \"W\", t: \"OneOf\", c: [\"\", \"time-out\", \"logout\", \"suspend\", \"normal\"]},\n        \"cmi.interactions._children\": {d: \"R\", t: \"Fixed\", v: \"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description\"},\n        \"cmi.interactions._count\": {d: \"R\", t: \"CMIInteger\"},\n        \"cmi.objectives._children\": {d: \"R\", t: \"Fixed\", v: \"id,score,success_status,completion_status,description,progress_measure\"},\n        \"cmi.objectives._count\": {d: \"R\", t: \"CMIInteger\"},\n        \"cmi.launch_data\": {d: \"R\", t: \"CMIString\", l: 4000},\n        \"cmi.learner_id\": {d: \"R\", t: \"CMIString\", l: 4000},\n        \"cmi.learner_name\": {d: \"R\", t: \"CMIString\", l: 250},\n        \"cmi.learner_preference._children\": {d: \"R\", t: \"Fixed\", v: \"audio_level,language,delivery_speed,audio_captioning\"},\n        \"cmi.learner_preference.audio_level\": {d: \"RW\", t: \"CMIDecimal\"},\n        \"cmi.learner_preference.language\": {d: \"RW\", t: \"CMIString\", l: 250},\n        \"cmi.learner_preference.delivery_speed\": {d: \"RW\", t: \"CMIDecimal\", min: 0},\n        \"cmi.learner_preference.audio_captioning\": {d: \"RW\", t: \"OneOf\", c: [\"-1\", \"0\", \"1\"]},\n        \"cmi.location\": {d: \"RW\", t: \"CMIString\", l: 1000},\n        \"cmi.max_time_allowed\": {d: \"R\", t: \"CMITimespan\"},\n        \"cmi.mode\": {d: \"R\", t: \"OneOf\", c: [\"browse\", \"normal\", \"review\"]},\n        \"cmi.progress_measure\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 1},\n        \"cmi.scaled_passing_score\": {d: \"RW\", t: \"CMIDecimal\", min: -1, max: 1},\n        \"cmi.score._children\": {d: \"R\", t: \"Fixed\", v: \"scaled,raw,min,max\"},\n        \"cmi.score.scaled\": {d: \"RW\", t: \"CMIDecimal\", min: -1, max: 1},\n        \"cmi.score.max\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi.score.min\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi.score.raw\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi.session_time\": {d: \"W\", t: \"CMITimespan\"},\n        \"cmi.success_status\": {d: \"RW\", t: \"OneOf\", c: this.successStatusChoices},\n        \"cmi.suspend_data\": {d: \"RW\", t: \"CMIString\", l: 64000},\n        \"cmi.time_limit_action\": {d: \"R\", t: \"OneOf\", c: [\"exit,message\", \"exit,no message\", \"continue,message\", \"continue,no message\"]},\n        \"cmi.total_time\": {d: \"R\", t: \"CMITimespan\"},\n        \"cmi._children\": {d: \"R\", t: \"Fixed\", v: \"_version,completion_status,completion_threshold,credit,entry,exit,interactions,objectives,launch_data,learner_id,learner_name,learner_preference,location,max_time_allowed,mode,progress_meausre,scaled_passing_score,score,session_time,success_status,suspend_data,time_limit_action,total_time\"},\n\n        \"cmi.comments_from_learner._children\": {d: \"R\", t: \"Fixed\", v: \"comment,location.timestamp\"},\n        \"cmi.comments_from_learner._count\": {d: \"R\", t: \"CMIInteger\"},\n        \"cmi.comments_from_lms._children\": {d: \"R\", t: \"Fixed\", v: \"comment,location.timestamp\"},\n        \"cmi.comments_from_lms._count\": {d: \"R\", t: \"CMIInteger\"},\n\n        // TODO: These aren't right, but we don't support sequencing so this is as good as it gets.\n        \"adl.nav.request\": {d: \"R\", t: \"Fixed\", v: \"\"},\n        \"adl.nav.request_valid.continue\": {d: \"R\", t: \"Fixed\", v: \"true\"},\n        \"adl.nav.request_valid.previous\": {d: \"R\", t: \"Fixed\", v: \"true\"},\n    };\n    protected validRegexElements:any = {\n        \"cmi\\\\.comments_from_learner.\\\\d+\\\\.comment\": {d: \"RW\", t: \"CMIString\", l: 4000},\n        \"cmi\\\\.comments_from_learner.\\\\d+\\\\.location\": {d: \"RW\", t: \"CMIString\", l: 250},\n        \"cmi\\\\.comments_from_learner.\\\\d+\\\\.timestamp\": {d: \"RW\", t: \"CMITimespan\"},\n        \"cmi\\\\.comments_from_lms.\\\\d+\\\\.comment\": {d: \"R\", t: \"CMIString\", l: 4000},\n        \"cmi\\\\.comments_from_lms.\\\\d+\\\\.location\": {d: \"R\", t: \"CMIString\", l: 250},\n        \"cmi\\\\.comments_from_lms.\\\\d+\\\\.timestamp\": {d: \"R\", t: \"CMITimespan\"},\n\n        \"cmi\\\\.interactions.\\\\d+\\\\.id\": {d: \"W\", t: \"CMIIdentifier\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.type\": {d: \"W\", t: \"OneOf\", c: [\"true-false\", \"choice\", \"fill-in\", \"long-fill-in\", \"matching\", \"performance\", \"sequencing\", \"likert\", \"numeric\", \"other\"]},\n        \"cmi\\\\.interactions.\\\\d+\\\\.timestamp\": {d: \"W\", t: \"CMITime2004\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.weighting\": {d: \"W\", t: \"CMIDecimal\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.learner_response\": {d: \"W\", t: \"CMIFeedback\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.result\": {d: \"W\", t: \"CMIResult\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.latency\": {d: \"W\", t: \"CMITimespan\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.description\": {d: \"W\", t: \"CMIString\", l: 250},\n        \"cmi\\\\.interactions.\\\\d+\\\\.objectives\\\\._count\": {d: \"R\", t: \"CMIInteger\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.objectives\\\\._children\": {d: \"R\", t: \"Fixed\", v: \"id\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.objectives.\\\\d+\\\\.id\": {d: \"W\", t: \"CMIIdentifier\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses\\\\._count\": {d: \"R\", t: \"CMIInteger\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses\\\\._children\": {d: \"R\", t: \"Fixed\", v: \"pattern\"},\n        \"cmi\\\\.interactions.\\\\d+\\\\.correct_responses.\\\\d+\\\\.pattern\": {d: \"W\", t: \"CMIFeedback\"},\n        \"cmi\\\\.objectives.\\\\d+\\\\.id\": {d: \"RW\", t: \"CMIIdentifier\"},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\._children\": {d: \"R\", t: \"Fixed\", v: \"scaled,raw,min,max\"},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.scaled\": {d: \"RW\", t: \"CMIDecimal\", min: -1, max: 1},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.raw\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.max\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi\\\\.objectives.\\\\d+\\\\.score\\\\.min\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 100},\n        \"cmi\\\\.objectives.\\\\d+\\\\.success_status\": {d: \"RW\", t: \"OneOf\", c: this.successStatusChoices},\n        \"cmi\\\\.objectives.\\\\d+\\\\.completion_status\": {d: \"RW\", t: \"OneOf\", c: this.completionStatusChoices},\n        \"cmi\\\\.objectives.\\\\d+\\\\.progress_measure\": {d: \"RW\", t: \"CMIDecimal\", min: 0, max: 1},\n        \"cmi\\\\.objectives.\\\\d+\\\\.description\": {d: \"RW\", t: \"CMIString\", l: 250},\n\n        // TODO: These aren't right, but we don't support sequencing so this is as good as it gets.\n        \"adl.nav.request_valid.choice\\\\..+\": {d: \"R\", t: \"Fixed\", v: \"true\"},\n    };\n\n    validateResult(value:string):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n        let res = value.match(/^correct$|^incorrect$|^unanticipated$|^neutral$|^([0-9]{0,3})?(\\.[0-9]{1,7})?$/);\n        if (res && res.length) {\n            return true;\n        }\n        return false;\n    }\n\n    validateTime(value:string):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n        let res = value.match(/^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(\\.[0-9]{1,2})?$/);\n        if (res && res.length) {\n            return true;\n        }\n        return false;\n    }\n\n    validateTimespan(value:string):boolean {\n        // A number that may have a decimal point. If not preceded by minus sign, the\n        // number is presumed positive. Examples: (2, 2.2, and -2.2).\n        let res = value.match(/^P(?=\\w*\\d)(?:\\d+Y|Y)?(?:\\d+M|M)?(?:\\d+D|D)?(?:T(?:\\d+H|H)?(?:\\d+M|M)?(?:\\d+(?:.\\d{1,2})?S|S)?)?$/);\n        if (res && res.length) {\n            return true;\n        }\n        return false;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/2004/dm2004.ts","export class UrlVarService {\n    static parsed:{[key:string]:string;} = null;\n    static get(key:string):string {\n        if (!UrlVarService.parsed) {\n            let query:any = window.location.search.substring(1),\n                vars:any,\n                i:number;\n            UrlVarService.parsed = {};\n            vars = query.split('&');\n            for (i=0; i < vars.length; i++) {\n                var pair = vars[i].split('=');\n                if (pair[0] !== \"\") {\n                    if (pair.length > 1) {\n                        UrlVarService.parsed[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n                    }\n                    else {\n                        UrlVarService.parsed[decodeURIComponent(pair[0])] = \"\";\n                    }\n                }\n            }\n        }\n        if (key in UrlVarService.parsed) {\n            return UrlVarService.parsed[key];\n        }\n        return \"\";\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/url.ts","import {ScoNavItem, Manifest} from \"../manifest\";\nimport * as Path from \"../path\";\nimport * as Sco from \"../sco\";\nimport * as Storage from \"../storage\";\nimport {TableOfContents} from \"../toc\";\nimport {SSLAApiEvents} from \"../events\";\nimport {ScormLog} from \"../scormlog\";\nimport {SSLAConfiguration} from \"../config\";\n\nimport {AiccScript} from \"../aiccscript_parser\";\nexport {UrlVarService} from \"../url\";\nimport {openSco} from \"../open\";\nimport {DomRender} from \"../render\";\nimport {SSLAPlugin} from \"../plugin\";\n\n\nexport abstract class ScormPlugin extends SSLAPlugin {\n    public events: SSLAApiEvents = null;\n    public config: SSLAConfiguration = null;\n    public manifest: Manifest;\n    public currentScoIndex: number = 0;\n    public currentSco: ScoNavItem = null;\n    public storage: Storage.StorageInterface;\n    public scormLog: ScormLog;\n    public scosData: Sco.AllScosData = null;\n    public toc: TableOfContents = null;\n\n    abstract endPreviousSco(): void;\n\n    abstract initializeApi(scoNav: ScoNavItem): void;\n\n    abstract initializeScosData(): void;\n\n    constructor() {\n        super();\n        this.events = new SSLAApiEvents();\n        this.events.statusChange.add(this.updateManifestSelectability, this);\n        this.scormLog = new ScormLog(this.events);\n    }\n\n    loadSco(scoNav: ScoNavItem, scoIndex: number): void {\n        this.endPreviousSco();\n        this.updateManifestSelectability();\n        this.initializeApi(scoNav);\n        this.currentScoIndex = scoIndex;\n        this.currentSco = scoNav;\n        this.toc.currentScoId = this.currentSco.identifier;\n        this.scosData.currentScoId = this.currentSco.identifier;\n        this.scosData.scos[this.currentSco.identifier].startViewing();\n        let launchUrl: string = this.manifest.scoLaunchUrl(scoNav);\n        openSco(Path.join([this.config.courseDirectory(), launchUrl]), this.config, this.manifest);\n        (<HTMLButtonElement>document.getElementById(\"prev\")).disabled = (this.currentScoIndex === 0) ? true : false;\n        (<HTMLButtonElement>document.getElementById(\"next\")).disabled = (this.manifest.navigableScoInOrderTraversal.length <= this.currentScoIndex + 1) ? true : false;\n        this.events.statusChange.dispatch(\"\");\n    }\n\n    loadScoByIndex(scoIndex: number): void {\n        if (scoIndex < 0 || this.manifest.navigableScoInOrderTraversal.length <= scoIndex) {\n            return;\n        }\n        let scoNav: ScoNavItem = this.manifest.navigableScoInOrderTraversal[scoIndex];\n        this.loadSco(scoNav, scoIndex);\n    }\n\n    loadScoByIdentifier(scoId: string): void {\n        let scoNav: ScoNavItem = this.manifest.scosByIdentifiers[scoId],\n            scoIndex: number = -1,\n            i: number;\n        for (i = 0; i < this.manifest.navigableScoInOrderTraversal.length; i++) {\n            if (this.manifest.navigableScoInOrderTraversal[i].identifier == scoNav.identifier) {\n                scoIndex = i;\n                break;\n            }\n        }\n        if (scoIndex === -1) {\n            alert(\"SCO not found.\")\n        }\n        this.loadSco(scoNav, scoIndex);\n    }\n\n    protected clearManifestAiccScriptParsers() {\n        let scos: ScoNavItem[] = this.manifest.navigableScoInOrderTraversal;\n        for (let i: number = 0; i < scos.length; i++) {\n            let scoNav: ScoNavItem = scos[i];\n            scoNav.aiccScriptParser = null;\n        }\n    }\n\n    performLayoutUpdate(): void {\n        if (this.config.layoutUpdater() != null) {\n            this.config.layoutUpdater()(this);\n        }\n        else {\n            this.standardLayoutUpdater();\n        }\n    }\n\n    setupNavigationType(): void {\n        let navigationType: string = this.config.navigationType();\n        let scos: ScoNavItem[] = this.manifest.navigableScoInOrderTraversal;\n        if (navigationType == \"\") {\n            // Do nothing, it's valid and doesn't override the manifest's behavior.\n        }\n        else {\n            // TODO: This should probably be a service/factory so it's less intrusive to add.\n            this.clearManifestAiccScriptParsers();\n            if (navigationType == \"lockstep\") {\n                for (let i: number = 1; i < scos.length; i++) {\n                    let scoNav: ScoNavItem = scos[i];\n                    let asp: AiccScript = new AiccScript();\n                    asp.parse(scos[i - 1].identifier);\n                    scoNav.aiccScriptParser = asp;\n                }\n            }\n            else if (navigationType == \"examaftercontent\") {\n                let scoNav: ScoNavItem = scos[scos.length - 1];\n                let idents: string[] = [];\n                for (let i: number = 0; i < scos.length - 1; i++) {\n                    idents.push(scos[i].identifier);\n                }\n                let asp: AiccScript = new AiccScript();\n                asp.parse(idents.join(\"&\"));\n                scoNav.aiccScriptParser = asp;\n            }\n            else if (navigationType == \"onlyonce\") {\n                for (let i: number = 0; i < scos.length; i++) {\n                    let scoNav: ScoNavItem = scos[i];\n                    let asp: AiccScript = new AiccScript();\n                    asp.parse(scoNav.identifier + \"=n\");\n                    scoNav.aiccScriptParser = asp;\n                }\n            }\n            else {\n                alert(\"Unrecognized nagivationType: \" + navigationType);\n            }\n        }\n    }\n\n    // TODO This probably belongs in an external class.\n    standardLayoutUpdater(): void {\n        let body: HTMLElement = document.body;\n        DomRender.removeClass(body, \"hide-menu\");\n        DomRender.removeClass(body, \"hide-toc\");\n        if (this.manifest.navigableScoInOrderTraversal.length == 1) {\n            if (this.config.singleScoView() == \"HIDE_ALL\" || this.config.singleScoView() == \"HIDE_NAV_BUTTONS\") {\n                DomRender.addClass(body, \"hide-menu\");\n            }\n            if (this.config.singleScoView() == \"HIDE_ALL\" || this.config.singleScoView() == \"HIDE_TREE\") {\n                DomRender.addClass(body, \"hide-toc\");\n            }\n        }\n    }\n\n    updateManifestSelectability(): void {\n        for (let i: number = 0; i < this.manifest.navigableScoInOrderTraversal.length; i++) {\n            let scoNav: ScoNavItem = this.manifest.navigableScoInOrderTraversal[i];\n            if (scoNav.aiccScriptParser != null) {\n                scoNav.isSelectable = scoNav.aiccScriptParser.evaluate(null, this.scosData);\n            }\n            this.toc.updateSelectability(scoNav);\n        }\n    }\n\n    onceLoaded(): void {\n        let i: string;\n        this.scosData.startViewing();\n        for (i in this.scosData.scos) {\n            this.toc.updateActivityStatus(i, this.scosData.scos[i].getStatus());\n        }\n        this.updateManifestSelectability();\n        // When attempting to return to last SCO on launch,\n        // verify that the current SCO ID still exists in the version of the course that's trying to be loaded.\n        // If it doesn't, we must fall through to a normal default launch.\n        if (this.config.returnToLastScoOnLaunch() && this.scosData.currentScoId && this.manifest.scosByIdentifiers[this.scosData.currentScoId]) {\n            this.loadScoByIdentifier(this.scosData.currentScoId);\n        }\n        else if (this.config.autoLaunchFirstSco()) {\n            this.loadScoByIndex(0);\n        }\n        (<any>window).DATA = this.scosData;\n    }\n\n    start() {\n        let p = document.getElementById(\"frame-here\");\n        let manifestLoaded: boolean;\n        let manifestParsed: boolean;\n        let tocHtml: string;\n        p.innerHTML = '<iframe id=\"jca_course_player\" name=\"jca_course_player\" frameborder=\"0\" width=\"100%\" height=\"100%\" src=\"blank.htm\" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>';\n        this.manifest = new Manifest();\n        if (this.config.scormManifestUseRawXml()) {\n            manifestLoaded = this.manifest.loadManifestFromString(this.config.scormManifestRawXml());\n        }\n        else {\n            manifestLoaded = this.manifest.loadManifestFromXmlDom(this.ctd.scormContents);\n        }\n        if (!manifestLoaded) {\n            alert(\"The manifest (\" + this.config.scormManifestFilename() + \") was not found or is unavailable.  Please check your settings and try again.  Reason: \" + this.manifest.lastError);\n            return;\n        }\n        manifestParsed = this.manifest.processManifest();\n        if (!manifestParsed) {\n            alert(\"The manifest did not parse correctly.  Reason: \" + this.manifest.lastError);\n            return;\n        }\n        this.setupNavigationType();\n        this.initializeScosData();\n\n        this.toc = new TableOfContents(this.config, this.events);\n        tocHtml = this.toc.render(this.manifest.resourcesByIdentifierRef, this.manifest.itemTree);\n        document.getElementById(\"toc\").innerHTML = tocHtml;\n\n        // We have all the pieces we need to control the layout of the screen.\n        this.performLayoutUpdate();\n\n        if (this.config.storageAdapter()) {\n            this.storage = new (this.config.storageAdapter())(this.config, this.scosData);\n        }\n        else {\n            this.storage = new Storage.AllInOneStorage(this.config, this.scosData);\n        }\n        this.storage.load({callback: this.onceLoaded.bind(this)});\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scorm/plugin.ts","import {AiccScript} from \"./aiccscript_parser\";\n\ndeclare namespace ParseXMLToObjectNamespace {\n    interface ParseXMLToObject {\n        http: any;\n        ParseXML: any;\n    }\n\n    class ParseXML {\n        setOutputArrayAll(): any;\n\n        parse(): any;\n\n        parseDocument(root: any): any;\n\n        parseString(data: string): any;\n    }\n}\ndeclare var ParseXMLToObject: ParseXMLToObjectNamespace.ParseXMLToObject;\n\n\nexport class Resource {\n    identifier: string;\n    href: string;\n}\n\n\nexport class ScoNavItem {\n    children: ScoNavItem[];\n    dataFromLms: string;\n    identifier: string;\n    identifierRef: string;\n    isSelectable: boolean = true;\n    isVisible: boolean = true;\n    masteryScore: string;\n    maxTimeAllowed: string;\n    parameters: string = \"\";\n    prerequisites: string;\n    timeLimitAction: string;\n    title: string;\n    aiccScriptParser: AiccScript = null;\n}\n\n\nexport class Manifest {\n    public firstScoId: string;\n    public lastError: string;\n    public scosByIdentifiers: { [scoId: string]: ScoNavItem; };\n    public scosByIdentifierRefs: { [scoId: string]: ScoNavItem; };\n    public itemTree: ScoNavItem;\n    // Only includes SCOs that can be directly reached by a user.\n    public navigableScoInOrderTraversal: ScoNavItem[];\n    protected rawManifest: any;\n    public resources: Resource[];\n    public resourcesByIdentifierRef: { [ref: string]: Resource; };\n    public schemaVersionMain: string;\n    public schemaVersionSub: string;\n    public scoInOrderTraversal: ScoNavItem[];\n\n    protected checkManifestProperty(base: any, property: any): boolean {\n        let k: string;\n        // Shortcut code.\n        if (base.hasOwnProperty(property) && base[property].length === 1) {\n            return true;\n        }\n        // The long way to find properties if there are case issues.\n        for (k in base) {\n            if (base.hasOwnProperty(k) && k.toLowerCase() === property.toLowerCase()) {\n                return base[k].length === 1\n            }\n        }\n        return false;\n    }\n\n    protected getManifestProperty(base: any, property: any): string {\n        let k: string;\n        // Shortcut code.\n        if (base.hasOwnProperty(property) && base[property].length === 1) {\n            if (Object.prototype.toString.call(base[property][0]) == '[object Object]') {\n                return base[property][0][\"#text\"][0].replace(/^\\s+|\\s+$/gm, '');\n            }\n            return base[property][0].replace(/^\\s+|\\s+$/gm, '');\n        }\n        // The long way to find properties if there are case issues.\n        for (k in base) {\n            if (base.hasOwnProperty(k) && k.toLowerCase() === property.toLowerCase()) {\n                return base[k][0].replace(/^\\s+|\\s+$/gm, '');\n            }\n        }\n    }\n\n    buildResources(resources: any) {\n        let i: number, res: any, buildResource: any;\n        this.resources = [];\n        this.resourcesByIdentifierRef = {};\n        if (resources.length > 0 && resources[0].hasOwnProperty('resource')) {\n            for (i = 0; i < resources[0]['resource'].length; i++) {\n                res = resources[0]['resource'][i];\n                buildResource = {};\n                this.resources.push(buildResource);\n                if (this.checkManifestProperty(res, 'identifier')) {\n                    buildResource['identifier'] = this.getManifestProperty(res, 'identifier');\n                    this.resourcesByIdentifierRef[buildResource['identifier']] = buildResource;\n                }\n                if (this.checkManifestProperty(res, 'href')) {\n                    buildResource['href'] = this.getManifestProperty(res, 'href');\n                }\n            }\n        }\n    }\n\n    protected isSco(item: ScoNavItem) {\n        if (item.identifierRef) {\n            return true;\n        }\n        return false;\n    }\n\n    _buildScoTree(itemNode: any): ScoNavItem {\n        let currentItem: ScoNavItem = new ScoNavItem(),\n            i: number;\n        if (this.checkManifestProperty(itemNode, \"identifier\")) {\n            currentItem.identifier = this.getManifestProperty(itemNode, \"identifier\");\n            this.scosByIdentifiers[currentItem.identifier] = currentItem;\n        }\n        if (this.checkManifestProperty(itemNode, \"identifierref\")) {\n            currentItem.identifierRef = this.getManifestProperty(itemNode, \"identifierref\");\n            this.scosByIdentifierRefs[currentItem.identifierRef] = currentItem;\n        }\n        if (this.checkManifestProperty(itemNode, \"title\")) {\n            currentItem.title = this.getManifestProperty(itemNode, \"title\");\n        }\n        if (this.checkManifestProperty(itemNode, \"isvisible\")) {\n            currentItem.isVisible = this.getManifestProperty(itemNode, \"isvisible\") === \"false\" ? false : true;\n        }\n        if (this.checkManifestProperty(itemNode, \"parameters\")) {\n            currentItem.parameters = this.getManifestProperty(itemNode, \"parameters\");\n        }\n        if (this.checkManifestProperty(itemNode, \"adlcp:datafromlms\")) {\n            currentItem.dataFromLms = this.getManifestProperty(itemNode, \"adlcp:datafromlms\");\n        }\n        if (this.checkManifestProperty(itemNode, \"adlcp:masteryscore\")) {\n            currentItem.masteryScore = this.getManifestProperty(itemNode, \"adlcp:masteryscore\");\n        }\n        if (this.checkManifestProperty(itemNode, \"adlcp:timelimitaction\")) {\n            currentItem.timeLimitAction = this.getManifestProperty(itemNode, \"adlcp:timelimitaction\");\n        }\n        if (this.checkManifestProperty(itemNode, \"adlcp:maxtimeallowed\")) {\n            currentItem.maxTimeAllowed = this.getManifestProperty(itemNode, \"adlcp:maxtimeallowed\");\n        }\n        if (this.checkManifestProperty(itemNode, \"adlcp:prerequisites\")) {\n            currentItem.prerequisites = this.getManifestProperty(itemNode, \"adlcp:prerequisites\");\n            // If the prerequisites type is \"aicc_script\", additionally process it.\n            if (\n                itemNode.hasOwnProperty(\"adlcp:prerequisites\") &&\n                itemNode[\"adlcp:prerequisites\"].length === 1 &&\n                Object.prototype.toString.call(itemNode[\"adlcp:prerequisites\"][0]) == '[object Object]' &&\n                itemNode[\"adlcp:prerequisites\"][0].hasOwnProperty(\"type\") &&\n                itemNode[\"adlcp:prerequisites\"][0].type == \"aicc_script\"\n            ) {\n                let asp: AiccScript = new AiccScript();\n                let parsed = asp.parse(currentItem.prerequisites);\n                if (parsed) {\n                    currentItem.aiccScriptParser = asp;\n                }\n            }\n        }\n\n        if (this.isSco(currentItem)) {\n            this.scoInOrderTraversal.push(currentItem);\n            // Visibility is not inherited from parent nodes.\n            // https://www.imsglobal.org/content/packaging/cpv1p1p3/imscp_bestv1p1p3.html#1518816\n            if (currentItem.isVisible) {\n                this.navigableScoInOrderTraversal.push(currentItem);\n            }\n            if (!this.firstScoId) {\n                this.firstScoId = currentItem.identifier;\n            }\n        }\n\n        currentItem.children = [];\n        if (itemNode.hasOwnProperty(\"item\") && itemNode.item.length > 0) {\n            for (i = 0; i < itemNode.item.length; i++) {\n                // Children are visibile only if \"parent\" and current items are visible.\n                currentItem.children.push(this._buildScoTree(itemNode.item[i]));\n            }\n        }\n        return currentItem;\n    }\n\n    buildScoTree(itemNode: any) {\n        this.scosByIdentifiers = {};\n        this.scosByIdentifierRefs = {};\n        this.firstScoId = null;\n        this.scoInOrderTraversal = [];\n        this.navigableScoInOrderTraversal = [];\n        this.itemTree = this._buildScoTree(itemNode);\n    }\n\n    loadManifestFromString(manifestStr: any): boolean {\n        var px = new ParseXMLToObject.ParseXML();\n        px.setOutputArrayAll();\n        this.rawManifest = px.parseString(manifestStr);\n        if (!this.rawManifest) {\n            this.lastError = \"Unable to load manifest.\";\n            return false;\n        }\n        return true;\n    }\n\n    loadManifestFromXmlDom(dom: any): boolean {\n        var px = new ParseXMLToObject.ParseXML();\n        px.setOutputArrayAll();\n        this.rawManifest = px.parseDocument(dom.documentElement);\n        if (!this.rawManifest) {\n            this.lastError = \"Unable to load manifest.\";\n            return false;\n        }\n        return true;\n    }\n\n    processManifest(): boolean {\n        let orgLen: number = 0;\n        this.processSchemaVersion(this.rawManifest);\n        if (this.schemaVersionMain !== \"1.2\" && this.schemaVersionMain !== \"2004\") {\n            this.lastError = \"Unsupported schemaversion: \" + this.schemaVersionMain;\n            return false;\n        }\n\n        if (!this.rawManifest.hasOwnProperty('manifest') || this.rawManifest['manifest'].length == 0) {\n            this.lastError = \"Invalid imsmanifest.xml, must be started with <manifest> tag\";\n            return false;\n        }\n        if (this.rawManifest['manifest'][0].hasOwnProperty('organizations') && this.rawManifest['manifest'][0]['organizations'].length > 0) {\n            if (this.rawManifest['manifest'][0]['organizations'][0].hasOwnProperty('organization')) {\n                orgLen = this.rawManifest['manifest'][0]['organizations'][0]['organization'].length;\n                if (orgLen > 1) {\n                    this.lastError = \"imsmanifest.xml parser does not currently support more than 1 <organization>.\"\n                    return false;\n                }\n                else if (orgLen == 1) {\n                    this.buildScoTree(this.rawManifest['manifest'][0]['organizations'][0]['organization'][0]);\n                }\n                else {\n                    this.lastError = \"imsmanifest.xml parser only found 0 <organization>s.\";\n                    return false;\n                }\n            }\n        }\n\n        if (this.rawManifest['manifest'][0].hasOwnProperty('resources')) {\n            this.buildResources(this.rawManifest['manifest'][0]['resources']);\n        }\n        return true;\n    }\n\n    scoLaunchUrl(sco: ScoNavItem): string {\n        let s: string = this.resourcesByIdentifierRef[sco.identifierRef].href;\n        if (sco.parameters !== \"\") {\n            // This algorithm is defined here:\n            // While first char of parameters is in\"?&\"\n            //   Clear first char of parameters\n            // If first char of parameters is \"#\"\n            //   If the URI contains \"#\"\n            //     Discard parameters\n            //   Else\n            //     Append parameters to the URI\n            //   Done processing URI\n            // If the URI contains \"?\"\n            //   Append \"&\" to the URI\n            // Else\n            //   Append \"?\" to the URI\n            // Append parameters to the URI\n            // Done processing the URI\n            let removePrefixes = /^[?&]*(.*)$/g;\n            let match = removePrefixes.exec(sco.parameters);\n            if (match.length == 0) {\n                return s;\n            }\n            let shorterParams = match[1];\n            // This is a deviation from the algorithm.  The algorithm states if there's only a # at the first character.\n            // We choose to do it if there's a # anywhere in the string.\n            // There's argument that a better solution would be to remove just the fragment and preserve the query strings.\n            // TODO Decide which technique described above is more right.\n            //if (shorterParams.charAt(0) == \"#\") {\n            if (shorterParams.indexOf(\"#\") !== -1) {\n                if (s.indexOf(\"#\") !== -1) {\n                    return s;\n                }\n                else {\n                    return s + shorterParams;\n                }\n            }\n            if (s.indexOf(\"?\") !== -1) {\n                s += \"&\";\n            }\n            else {\n                s += \"?\";\n            }\n            s += shorterParams;\n        }\n        return s;\n    }\n\n    protected processSchemaVersion(obj: any) {\n        let schema: string = this.findSchemaVersion(this.rawManifest);\n        if (schema == \"1.2\") {\n            this.schemaVersionMain = \"1.2\";\n        }\n        else if (schema === \"CAM 1.3\") {\n            this.schemaVersionMain = \"2004\";\n            this.schemaVersionSub = \"2\";\n        }\n        else if (schema === \"2004 3rd Edition\") {\n            this.schemaVersionMain = \"2004\";\n            this.schemaVersionSub = \"3\";\n        }\n        else if (schema === \"2004 4th Edition\") {\n            this.schemaVersionMain = \"2004\";\n            this.schemaVersionSub = \"4\";\n        }\n        else {\n            // If there's no metadata block for schemaversion, other fallbacks to detect type.\n            if (this.traverseForProperty(this.rawManifest, \"adlcp:scormtype\")) {\n                this.schemaVersionMain = \"1.2\";\n            }\n            else if (this.traverseForProperty(this.rawManifest, \"adlcp:scormType\")) {\n                this.schemaVersionMain = \"2004\";\n                this.schemaVersionSub = \"3\";\n            }\n        }\n    }\n\n    protected traverseForProperty(obj: any, propertyToFind: string): string {\n        var i: any, v: any;\n        for (var property in obj) {\n            if (obj.hasOwnProperty(property)) {\n                if (property === propertyToFind) {\n                    return obj[property][0];\n                }\n\n                if (Object.prototype.toString.call(obj[property]) === \"[object Array]\") {\n                    for (i = 0; i < obj[property].length; i++) {\n                        v = this.traverseForProperty(obj[property][i], propertyToFind);\n                        if (v) {\n                            return v;\n                        }\n                    }\n                }\n                else if (typeof obj[property] == \"object\") {\n                    v = this.traverseForProperty(obj[property], propertyToFind);\n                    if (v) {\n                        return v;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    // Given a manifest-like object, iterate looking for a schemaversion.\n    protected findSchemaVersion(obj: any): string {\n        var i: any, v: any;\n        for (var property in obj) {\n            if (obj.hasOwnProperty(property)) {\n                if (property.toLowerCase() === \"schemaversion\" &&\n                    Object.prototype.toString.call(obj[property]) === \"[object Array]\" &&\n                    obj[property].length > 0) {\n                    return obj[property][0];\n                }\n\n                if (Object.prototype.toString.call(obj[property]) === \"[object Array]\") {\n                    for (i = 0; i < obj[property].length; i++) {\n                        v = this.findSchemaVersion(obj[property][i]);\n                        if (v) {\n                            return v;\n                        }\n                    }\n                }\n                else if (typeof obj[property] == \"object\") {\n                    v = this.findSchemaVersion(obj[property]);\n                    if (v) {\n                        return v;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/manifest.ts","import {parse} from \"./aiccscript\";\nimport * as Sco from \"./sco\";\n\n\nexport class AiccScript {\n    protected tree:any = null;\n\n    parse(s:string):boolean {\n        try {\n            this.tree = parse(s);\n        } catch (e) {\n            console.log(\"exception\", e);\n            return false;\n        }\n        return true;\n    }\n\n    protected lookupContext(context:Sco.AllScosData, key:string):string {\n        if (context.scos[key]) {\n            return context.scos[key].getStatus();\n        }\n        alert(\"Context unavailable for SCO: \" + key);\n        return \"\";\n    }\n\n    evaluate(currentNode:any, context:Sco.AllScosData):boolean {\n        if (currentNode == null) {\n            currentNode = this.tree;\n        }\n        if (Object.prototype.toString.call(currentNode) == '[object String]') {\n            var status = this.lookupContext(context, currentNode);\n            if (status == \"passed\" || status == \"completed\") {\n                return true;\n            }\n            return false;\n        }\n        else if (currentNode.op == \"&\") {\n            return this.evaluate(currentNode.left, context) && this.evaluate(currentNode.right, context);\n        }\n        else if (currentNode.op == \"|\") {\n            return this.evaluate(currentNode.left, context) || this.evaluate(currentNode.right, context);\n        }\n        else if (currentNode.op == \"=\") {\n            return this.lookupContext(context, currentNode.left) == currentNode.right;\n        }\n        else if (currentNode.op == \"<>\") {\n            return this.lookupContext(context, currentNode.left) != currentNode.right;\n        }\n        else if (currentNode.op == \"~\") {\n            return !this.evaluate(currentNode.left, context);\n        }\n        else if (currentNode.op == \"set\") {\n            var counter = 0;\n            for (let i:number=0; i < currentNode.set.length; i++) {\n                if (this.evaluate(currentNode.set[i], context)) {\n                    counter += 1;\n                }\n            }\n            if (currentNode.times) {\n                return counter >= currentNode.times;\n            }\n            return counter == currentNode.set.length;\n        }\n        alert(\"Unrecognized operator: \" + currentNode.op);\n        return false;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/aiccscript_parser.ts","module.exports = (function() {\n  \"use strict\";\n\n  /*\n   * Generated by PEG.js 0.9.0.\n   *\n   * http://pegjs.org/\n   */\n\n  function peg$subclass(child, parent) {\n    function ctor() { this.constructor = child; }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n  }\n\n  function peg$SyntaxError(message, expected, found, location) {\n    this.message  = message;\n    this.expected = expected;\n    this.found    = found;\n    this.location = location;\n    this.name     = \"SyntaxError\";\n\n    if (typeof Error.captureStackTrace === \"function\") {\n      Error.captureStackTrace(this, peg$SyntaxError);\n    }\n  }\n\n  peg$subclass(peg$SyntaxError, Error);\n\n  function peg$parse(input) {\n    var options = arguments.length > 1 ? arguments[1] : {},\n\n        peg$FAILED = {},\n\n        peg$startRuleFunctions = { Program: peg$parseProgram },\n        peg$startRuleFunction  = peg$parseProgram,\n\n        peg$c0 = function(rest, v) {\n            return leftAssoc(rest, v);\n          },\n        peg$c1 = \"(\",\n        peg$c2 = { type: \"literal\", value: \"(\", description: \"\\\"(\\\"\" },\n        peg$c3 = \")\",\n        peg$c4 = { type: \"literal\", value: \")\", description: \"\\\")\\\"\" },\n        peg$c5 = function(expr) { return expr; },\n        peg$c6 = \"=\",\n        peg$c7 = { type: \"literal\", value: \"=\", description: \"\\\"=\\\"\" },\n        peg$c8 = function(el, status) { return {left: el, op: \"=\", right: status}; },\n        peg$c9 = \"<>\",\n        peg$c10 = { type: \"literal\", value: \"<>\", description: \"\\\"<>\\\"\" },\n        peg$c11 = function(el, status) { return {left: el, op: \"<>\", right: status}; },\n        peg$c12 = \"~\",\n        peg$c13 = { type: \"literal\", value: \"~\", description: \"\\\"~\\\"\" },\n        peg$c14 = function(neg) { return {op: \"~\", left: neg}; },\n        peg$c15 = function(times, set) { return {op: \"set\", times: times, set: set}; },\n        peg$c16 = \"*\",\n        peg$c17 = { type: \"literal\", value: \"*\", description: \"\\\"*\\\"\" },\n        peg$c18 = function(times) { return times; },\n        peg$c19 = \"{\",\n        peg$c20 = { type: \"literal\", value: \"{\", description: \"\\\"{\\\"\" },\n        peg$c21 = \",\",\n        peg$c22 = { type: \"literal\", value: \",\", description: \"\\\",\\\"\" },\n        peg$c23 = \"}\",\n        peg$c24 = { type: \"literal\", value: \"}\", description: \"\\\"}\\\"\" },\n        peg$c25 = function(head, tail) {\n            var i = 0, a = [head];\n            for (i=0; i < tail.length; i++) {\n              a.push(tail[i][2]);\n            }\n            return a;\n          },\n        peg$c26 = /^[0-9]/,\n        peg$c27 = { type: \"class\", value: \"[0-9]\", description: \"[0-9]\" },\n        peg$c28 = function() { return parseInt(text(), 10); },\n        peg$c29 = /^[a-zA-Z0-9]/,\n        peg$c30 = { type: \"class\", value: \"[a-zA-Z0-9]\", description: \"[a-zA-Z0-9]\" },\n        peg$c31 = \"&\",\n        peg$c32 = { type: \"literal\", value: \"&\", description: \"\\\"&\\\"\" },\n        peg$c33 = \"|\",\n        peg$c34 = { type: \"literal\", value: \"|\", description: \"\\\"|\\\"\" },\n        peg$c35 = function(operator) { return operator; },\n        peg$c36 = \"p\",\n        peg$c37 = { type: \"literal\", value: \"p\", description: \"\\\"p\\\"\" },\n        peg$c38 = \"assed\",\n        peg$c39 = { type: \"literal\", value: \"assed\", description: \"\\\"assed\\\"\" },\n        peg$c40 = function() { return \"passed\" },\n        peg$c41 = \"c\",\n        peg$c42 = { type: \"literal\", value: \"c\", description: \"\\\"c\\\"\" },\n        peg$c43 = \"ompleted\",\n        peg$c44 = { type: \"literal\", value: \"ompleted\", description: \"\\\"ompleted\\\"\" },\n        peg$c45 = function() { return \"completed\" },\n        peg$c46 = \"f\",\n        peg$c47 = { type: \"literal\", value: \"f\", description: \"\\\"f\\\"\" },\n        peg$c48 = \"ailed\",\n        peg$c49 = { type: \"literal\", value: \"ailed\", description: \"\\\"ailed\\\"\" },\n        peg$c50 = function() { return \"failed\" },\n        peg$c51 = \"i\",\n        peg$c52 = { type: \"literal\", value: \"i\", description: \"\\\"i\\\"\" },\n        peg$c53 = \"ncomplete\",\n        peg$c54 = { type: \"literal\", value: \"ncomplete\", description: \"\\\"ncomplete\\\"\" },\n        peg$c55 = function() { return \"incomplete\" },\n        peg$c56 = \"b\",\n        peg$c57 = { type: \"literal\", value: \"b\", description: \"\\\"b\\\"\" },\n        peg$c58 = \"rowsed\",\n        peg$c59 = { type: \"literal\", value: \"rowsed\", description: \"\\\"rowsed\\\"\" },\n        peg$c60 = function() { return \"browsed\" },\n        peg$c61 = \"n\",\n        peg$c62 = { type: \"literal\", value: \"n\", description: \"\\\"n\\\"\" },\n        peg$c63 = \"ot attempted\",\n        peg$c64 = { type: \"literal\", value: \"ot attempted\", description: \"\\\"ot attempted\\\"\" },\n        peg$c65 = function() { return \"not attempted\" },\n        peg$c66 = { type: \"other\", description: \"whitespace\" },\n        peg$c67 = /^[ \\t\\n\\r]/,\n        peg$c68 = { type: \"class\", value: \"[ \\\\t\\\\n\\\\r]\", description: \"[ \\\\t\\\\n\\\\r]\" },\n\n        peg$currPos          = 0,\n        peg$savedPos         = 0,\n        peg$posDetailsCache  = [{ line: 1, column: 1, seenCR: false }],\n        peg$maxFailPos       = 0,\n        peg$maxFailExpected  = [],\n        peg$silentFails      = 0,\n\n        peg$result;\n\n    if (\"startRule\" in options) {\n      if (!(options.startRule in peg$startRuleFunctions)) {\n        throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n      }\n\n      peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n    }\n\n    function text() {\n      return input.substring(peg$savedPos, peg$currPos);\n    }\n\n    function peg$computePosDetails(pos) {\n      var details = peg$posDetailsCache[pos],\n          p, ch;\n\n      if (details) {\n        return details;\n      } else {\n        p = pos - 1;\n        while (!peg$posDetailsCache[p]) {\n          p--;\n        }\n\n        details = peg$posDetailsCache[p];\n        details = {\n          line:   details.line,\n          column: details.column,\n          seenCR: details.seenCR\n        };\n\n        while (p < pos) {\n          ch = input.charAt(p);\n          if (ch === \"\\n\") {\n            if (!details.seenCR) { details.line++; }\n            details.column = 1;\n            details.seenCR = false;\n          } else if (ch === \"\\r\" || ch === \"\\u2028\" || ch === \"\\u2029\") {\n            details.line++;\n            details.column = 1;\n            details.seenCR = true;\n          } else {\n            details.column++;\n            details.seenCR = false;\n          }\n\n          p++;\n        }\n\n        peg$posDetailsCache[pos] = details;\n        return details;\n      }\n    }\n\n    function peg$computeLocation(startPos, endPos) {\n      var startPosDetails = peg$computePosDetails(startPos),\n          endPosDetails   = peg$computePosDetails(endPos);\n\n      return {\n        start: {\n          offset: startPos,\n          line:   startPosDetails.line,\n          column: startPosDetails.column\n        },\n        end: {\n          offset: endPos,\n          line:   endPosDetails.line,\n          column: endPosDetails.column\n        }\n      };\n    }\n\n    function peg$fail(expected) {\n      if (peg$currPos < peg$maxFailPos) { return; }\n\n      if (peg$currPos > peg$maxFailPos) {\n        peg$maxFailPos = peg$currPos;\n        peg$maxFailExpected = [];\n      }\n\n      peg$maxFailExpected.push(expected);\n    }\n\n    function peg$buildException(message, expected, found, location) {\n      function cleanupExpected(expected) {\n        var i = 1;\n\n        expected.sort(function(a, b) {\n          if (a.description < b.description) {\n            return -1;\n          } else if (a.description > b.description) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n\n        while (i < expected.length) {\n          if (expected[i - 1] === expected[i]) {\n            expected.splice(i, 1);\n          } else {\n            i++;\n          }\n        }\n      }\n\n      function buildMessage(expected, found) {\n        function stringEscape(s) {\n          function hex(ch) { return ch.charCodeAt(0).toString(16).toUpperCase(); }\n\n          return s\n            .replace(/\\\\/g,   '\\\\\\\\')\n            .replace(/\"/g,    '\\\\\"')\n            .replace(/\\x08/g, '\\\\b')\n            .replace(/\\t/g,   '\\\\t')\n            .replace(/\\n/g,   '\\\\n')\n            .replace(/\\f/g,   '\\\\f')\n            .replace(/\\r/g,   '\\\\r')\n            .replace(/[\\x00-\\x07\\x0B\\x0E\\x0F]/g, function(ch) { return '\\\\x0' + hex(ch); })\n            .replace(/[\\x10-\\x1F\\x80-\\xFF]/g,    function(ch) { return '\\\\x'  + hex(ch); })\n            .replace(/[\\u0100-\\u0FFF]/g,         function(ch) { return '\\\\u0' + hex(ch); })\n            .replace(/[\\u1000-\\uFFFF]/g,         function(ch) { return '\\\\u'  + hex(ch); });\n        }\n\n        var expectedDescs = new Array(expected.length),\n            expectedDesc, foundDesc, i;\n\n        for (i = 0; i < expected.length; i++) {\n          expectedDescs[i] = expected[i].description;\n        }\n\n        expectedDesc = expected.length > 1\n          ? expectedDescs.slice(0, -1).join(\", \")\n              + \" or \"\n              + expectedDescs[expected.length - 1]\n          : expectedDescs[0];\n\n        foundDesc = found ? \"\\\"\" + stringEscape(found) + \"\\\"\" : \"end of input\";\n\n        return \"Expected \" + expectedDesc + \" but \" + foundDesc + \" found.\";\n      }\n\n      if (expected !== null) {\n        cleanupExpected(expected);\n      }\n\n      return new peg$SyntaxError(\n        message !== null ? message : buildMessage(expected, found),\n        expected,\n        found,\n        location\n      );\n    }\n\n    function peg$parseProgram() {\n      var s0;\n\n      s0 = peg$parseE1();\n\n      return s0;\n    }\n\n    function peg$parseE1() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$currPos;\n      s3 = peg$parseE2();\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parseAndOrOperator();\n        if (s4 !== peg$FAILED) {\n          s3 = [s3, s4];\n          s2 = s3;\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$currPos;\n        s3 = peg$parseE2();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseAndOrOperator();\n          if (s4 !== peg$FAILED) {\n            s3 = [s3, s4];\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseE2();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c0(s1, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseE2() {\n      var s0;\n\n      s0 = peg$parseEquals();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseNotEquals();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseParens();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseOutOfSet();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseNeg();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parseCourseElement();\n              }\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseParens() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s1 = peg$c1;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c2); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseE1();\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 41) {\n                s5 = peg$c3;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n              }\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c5(s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseEquals() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      s1 = peg$parseCourseElement();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 61) {\n            s3 = peg$c6;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c7); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseStatus();\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c8(s1, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseNotEquals() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      s1 = peg$parseCourseElement();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          if (input.substr(peg$currPos, 2) === peg$c9) {\n            s3 = peg$c9;\n            peg$currPos += 2;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c10); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseStatus();\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c11(s1, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseNeg() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 126) {\n        s1 = peg$c12;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c13); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseE2();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c14(s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseOutOfSet() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parseOutOfSetTimes();\n      if (s1 === peg$FAILED) {\n        s1 = null;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseSet();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c15(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseOutOfSetTimes() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$parseInteger();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 42) {\n            s3 = peg$c16;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c17); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c18(s1);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseSet() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 123) {\n        s1 = peg$c19;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c20); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseEquals();\n          if (s3 === peg$FAILED) {\n            s3 = peg$parseNotEquals();\n            if (s3 === peg$FAILED) {\n              s3 = peg$parseCourseElement();\n            }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n              s5 = [];\n              s6 = peg$currPos;\n              if (input.charCodeAt(peg$currPos) === 44) {\n                s7 = peg$c21;\n                peg$currPos++;\n              } else {\n                s7 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c22); }\n              }\n              if (s7 !== peg$FAILED) {\n                s8 = peg$parse_();\n                if (s8 !== peg$FAILED) {\n                  s9 = peg$parseEquals();\n                  if (s9 === peg$FAILED) {\n                    s9 = peg$parseNotEquals();\n                    if (s9 === peg$FAILED) {\n                      s9 = peg$parseCourseElement();\n                    }\n                  }\n                  if (s9 !== peg$FAILED) {\n                    s7 = [s7, s8, s9];\n                    s6 = s7;\n                  } else {\n                    peg$currPos = s6;\n                    s6 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s6;\n                  s6 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s6;\n                s6 = peg$FAILED;\n              }\n              while (s6 !== peg$FAILED) {\n                s5.push(s6);\n                s6 = peg$currPos;\n                if (input.charCodeAt(peg$currPos) === 44) {\n                  s7 = peg$c21;\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c22); }\n                }\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parse_();\n                  if (s8 !== peg$FAILED) {\n                    s9 = peg$parseEquals();\n                    if (s9 === peg$FAILED) {\n                      s9 = peg$parseNotEquals();\n                      if (s9 === peg$FAILED) {\n                        s9 = peg$parseCourseElement();\n                      }\n                    }\n                    if (s9 !== peg$FAILED) {\n                      s7 = [s7, s8, s9];\n                      s6 = s7;\n                    } else {\n                      peg$currPos = s6;\n                      s6 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s6;\n                    s6 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s6;\n                  s6 = peg$FAILED;\n                }\n              }\n              if (s5 !== peg$FAILED) {\n                s6 = peg$parse_();\n                if (s6 !== peg$FAILED) {\n                  if (input.charCodeAt(peg$currPos) === 125) {\n                    s7 = peg$c23;\n                    peg$currPos++;\n                  } else {\n                    s7 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c24); }\n                  }\n                  if (s7 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c25(s3, s5);\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseInteger() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      if (peg$c26.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c27); }\n      }\n      if (s2 !== peg$FAILED) {\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          if (peg$c26.test(input.charAt(peg$currPos))) {\n            s2 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c27); }\n          }\n        }\n      } else {\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c28();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseCourseElement() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      if (peg$c29.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c30); }\n      }\n      if (s2 !== peg$FAILED) {\n        while (s2 !== peg$FAILED) {\n          s1.push(s2);\n          if (peg$c29.test(input.charAt(peg$currPos))) {\n            s2 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c30); }\n          }\n        }\n      } else {\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        s0 = input.substring(s0, peg$currPos);\n      } else {\n        s0 = s1;\n      }\n\n      return s0;\n    }\n\n    function peg$parseAndOrOperator() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 38) {\n          s2 = peg$c31;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c32); }\n        }\n        if (s2 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 124) {\n            s2 = peg$c33;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c34); }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parse_();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c35(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseStatus() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 1).toLowerCase() === peg$c36) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c37); }\n      }\n      if (s1 !== peg$FAILED) {\n        if (input.substr(peg$currPos, 5).toLowerCase() === peg$c38) {\n          s2 = input.substr(peg$currPos, 5);\n          peg$currPos += 5;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c39); }\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c40();\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 1).toLowerCase() === peg$c41) {\n          s1 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c42); }\n        }\n        if (s1 !== peg$FAILED) {\n          if (input.substr(peg$currPos, 8).toLowerCase() === peg$c43) {\n            s2 = input.substr(peg$currPos, 8);\n            peg$currPos += 8;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c44); }\n          }\n          if (s2 === peg$FAILED) {\n            s2 = null;\n          }\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c45();\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          if (input.substr(peg$currPos, 1).toLowerCase() === peg$c46) {\n            s1 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c47); }\n          }\n          if (s1 !== peg$FAILED) {\n            if (input.substr(peg$currPos, 5).toLowerCase() === peg$c48) {\n              s2 = input.substr(peg$currPos, 5);\n              peg$currPos += 5;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c49); }\n            }\n            if (s2 === peg$FAILED) {\n              s2 = null;\n            }\n            if (s2 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c50();\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n          if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            if (input.substr(peg$currPos, 1).toLowerCase() === peg$c51) {\n              s1 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s1 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c52); }\n            }\n            if (s1 !== peg$FAILED) {\n              if (input.substr(peg$currPos, 9).toLowerCase() === peg$c53) {\n                s2 = input.substr(peg$currPos, 9);\n                peg$currPos += 9;\n              } else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c54); }\n              }\n              if (s2 === peg$FAILED) {\n                s2 = null;\n              }\n              if (s2 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c55();\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n            if (s0 === peg$FAILED) {\n              s0 = peg$currPos;\n              if (input.substr(peg$currPos, 1).toLowerCase() === peg$c56) {\n                s1 = input.charAt(peg$currPos);\n                peg$currPos++;\n              } else {\n                s1 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c57); }\n              }\n              if (s1 !== peg$FAILED) {\n                if (input.substr(peg$currPos, 6).toLowerCase() === peg$c58) {\n                  s2 = input.substr(peg$currPos, 6);\n                  peg$currPos += 6;\n                } else {\n                  s2 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c59); }\n                }\n                if (s2 === peg$FAILED) {\n                  s2 = null;\n                }\n                if (s2 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c60();\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n              if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                if (input.substr(peg$currPos, 1).toLowerCase() === peg$c61) {\n                  s1 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s1 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c62); }\n                }\n                if (s1 !== peg$FAILED) {\n                  if (input.substr(peg$currPos, 12).toLowerCase() === peg$c63) {\n                    s2 = input.substr(peg$currPos, 12);\n                    peg$currPos += 12;\n                  } else {\n                    s2 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c64); }\n                  }\n                  if (s2 === peg$FAILED) {\n                    s2 = null;\n                  }\n                  if (s2 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c65();\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parse_() {\n      var s0, s1, s2;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      s1 = [];\n      if (peg$c67.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c68); }\n      }\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c67.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c68); }\n        }\n      }\n      if (s1 !== peg$FAILED) {\n        s0 = input.substring(s0, peg$currPos);\n      } else {\n        s0 = s1;\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c66); }\n      }\n\n      return s0;\n    }\n\n\n        function leftAssoc(rest, val) {\n            if (!rest.length) return val;\n            var last = rest.pop();\n            return {left:leftAssoc(rest, last[0]), op:last[1], right:val};\n        }\n\n\n    peg$result = peg$startRuleFunction();\n\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n      return peg$result;\n    } else {\n      if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n        peg$fail({ type: \"end\", description: \"end of input\" });\n      }\n\n      throw peg$buildException(\n        null,\n        peg$maxFailExpected,\n        peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n        peg$maxFailPos < input.length\n          ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n          : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n      );\n    }\n  }\n\n  return {\n    SyntaxError: peg$SyntaxError,\n    parse:       peg$parse\n  };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/aiccscript.js\n// module id = 14\n// module chunks = 0","export function join(parts:string[], sep:string=\"/\") {\n    let i:number = 0;\n    let j:string = \"\";\n    var separator = sep || '/';\n    var replace   = new RegExp(separator+'{1,}', 'g');\n    // Don't use .join because empty parts should be ignored.\n    for (i=0; i < parts.length; i++) {\n        if (parts[i] === \"\") {\n            continue;\n        }\n        if (j !== \"\") {\n            j += sep;\n        }\n        j += parts[i];\n    }\n    return j.replace(replace, separator);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/path.ts","import {SSLAConfiguration} from \"./config\";\nimport * as Sco from \"./sco\";\n\n\ndeclare let reqwest: any;\n\n\nexport interface StorageInterface {\n    load(options: any): void;\n    save(data: any, options: any): void;\n}\n\n\nexport class AllInOneStorage implements StorageInterface {\n    public config: SSLAConfiguration;\n    public cachedData: any = null;\n    public allScos: Sco.AllScosData;\n\n    constructor(config: SSLAConfiguration, allScos: Sco.AllScosData) {\n        this.config = config;\n        this.allScos = allScos;\n    }\n\n    load(options: any) {\n        let me = this;\n        if (!this.cachedData) {\n            reqwest({\n                url: this.config.getDataUrl(),\n                method: this.config.getDataAjaxMethod(),\n                headers: this.config.getDataHeaders(),\n                type: \"json\",\n                async: true,\n                crossOrigin: this.config.storageAllowCORS(),\n                withCredentials: this.config.storageUseWithCredentials(),\n                data: {\n                    // TODO: Stop using global functions here.\n                    \"activityId\": this.config.courseId(),\n                    \"studentId\": this.config.studentId(),\n                    \"timestamp\": new Date().getTime()\n                },\n                success: function(resp: any) {\n                    if (typeof (resp) == \"undefined\" || !resp ||\n                        \"responseText\" in resp ||\n                        \"responseXML\" in resp) {\n                        resp = {};\n                    }\n                    me.cachedData = resp;\n                    me.allScos.importData(me.cachedData);\n                    options.callback(true);\n                },\n                error: function(request: any, status: any, error: any) {\n                    console.log(\"error in get ajax\" + request + \",\" + status + \",\" + error);\n                    options.callback(false);\n                }\n            });\n        }\n        else {\n            // The data is already loaded, use the cache.\n            me.allScos.importData(me.cachedData);\n            options.callback(true);\n        }\n    }\n\n    save(data: any, options: any) {\n        let async: boolean = true;\n        if (!options) {\n            options = {};\n        }\n        // TODO: Restore this.config.forceSynchronousAjaxOnEnd\n        if (options.forceSync) {\n            async = false;\n        }\n        if (!options.eventType) {\n            options.eventType = \"save\";\n        }\n        if (!options.scoName) {\n            options.scoName = \"\";\n        }\n\n        reqwest({\n            url: this.config.setDataUrl(),\n            method: this.config.setDataAjaxMethod(),\n            headers: this.config.setDataHeaders(),\n            async: async,\n            crossOrigin: this.config.storageAllowCORS(),\n            withCredentials: this.config.storageUseWithCredentials(),\n            data: {\n                \"action\": options.eventType,\n                \"currentSco\": options.scoName,\n                \"data\": JSON.stringify(this.allScos.exportData(this.config)),\n                \"activityId\": this.config.courseId(),\n                \"studentId\": this.config.studentId(),\n                \"timestamp\": new Date().getTime()\n            },\n            success: function(msg: any) {\n            },\n            error: function(msg: any) {\n                console.log(\"There was an error saving your data: \" + msg);\n            }\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/storage.ts","import {SSLAConfiguration} from \"./config\";\nimport {Manifest} from \"./manifest\";\nimport {ScoNavItem} from \"./manifest\";\nimport {Resource} from \"./manifest\";\nimport {SSLAApiEvents} from \"./events\";\nimport {DomRender} from \"./render\";\n\n\nexport class TableOfContents {\n    protected config: SSLAConfiguration;\n    protected events: SSLAApiEvents;\n    public currentScoId: string;\n\n    constructor(config: SSLAConfiguration, events: SSLAApiEvents) {\n        this.config = config;\n        this.events = events;\n        this.events.statusChange.add(this.statusChanged, this);\n    }\n\n    render(resourcesByIref: { [ref: string]: Resource; }, itemTree: ScoNavItem) {\n        return this._render(resourcesByIref, itemTree);\n    }\n\n    updateCurrentActivity(id: string) {\n        var i: number;\n        var activityId: string = 'toc-' + id;\n        var curList: HTMLElement[] = Array.prototype.slice.call(document.getElementById(\"toc\").getElementsByClassName(\"current\"));\n\n        for (i = 0; i < curList.length; i++) {\n            DomRender.removeClass(curList[i], \"current\");\n        }\n\n        var el: HTMLElement = document.getElementById(activityId);\n        DomRender.addClass(el, \"current\");\n    }\n\n    updateActivityStatus(id: string, status: string) {\n        var activityId: string = 'toc-' + id,\n            newClass: string = \"\";\n\n        if (status === \"\") {\n            // An empty status string on statusChange occurs bcs. we're updating the navigation before the data is loaded\n            return;\n        }\n\n        switch (status) {\n            case \"completed\":\n            case \"browsed\":\n                newClass = \"completed\";\n                break;\n            case \"incomplete\":\n                newClass = \"incomplete\";\n                break;\n            case \"unknown\":\n                newClass = \"unknown\";\n                break;\n            case \"passed\":\n                newClass = \"passed\";\n                break;\n            case \"failed\":\n                newClass = \"failed\";\n                break;\n            case \"not attempted\":\n            case undefined:\n                newClass = \"not_attempted\";\n                break;\n        }\n        if (newClass && document.getElementById(activityId)) {\n            let el:Element = document.getElementById(activityId);\n            DomRender.removeClass(el, \"completed\");\n            DomRender.removeClass(el, \"browsed\");\n            DomRender.removeClass(el, \"incomplete\");\n            DomRender.removeClass(el, \"unknown\");\n            DomRender.removeClass(el, \"passed\");\n            DomRender.removeClass(el, \"failed\");\n            DomRender.removeClass(el, \"not_attempted\");\n            DomRender.addClass(el, newClass);\n        }\n    }\n\n    updateSelectability(item: ScoNavItem) {\n        let el: HTMLElement = document.getElementById(\"toc-\" + item.identifier);\n        if (item.isSelectable) {\n            DomRender.removeClass(el, \"disable\");\n        }\n        else {\n            DomRender.addClass(el, \"disable\");\n        }\n    }\n\n    protected statusChanged(newStatus: string) {\n        this.updateActivityStatus(this.currentScoId, newStatus);\n        this.updateCurrentActivity(this.currentScoId);\n    }\n\n    protected _render(resourcesByIref: { [ref: string]: Resource; }, item: ScoNavItem) {\n        var s: string = '<ul>', i: number, href: string = '', klass: string = '', doClick: string = \"\", canNavigate: boolean = false;\n        if (item.hasOwnProperty('identifierRef')) {\n            if (resourcesByIref.hasOwnProperty(item.identifierRef)) {\n                href = resourcesByIref[item.identifierRef].href;\n                canNavigate = true;\n            }\n        }\n        if (item.hasOwnProperty('identifier')) {\n            klass = item.identifier;\n        }\n        s += '<li id=\"toc-' + klass + '\">';\n        if (href && canNavigate) {\n            doClick = ' onclick=\"ssla.navigateByIdentifier(\\'' + item.identifier + '\\'); return false;\"';\n            s += '<a href=\"#\" ' + doClick + '>' + item.title + '</a>';\n        }\n        else {\n            s += '<div style=\"font-weight: bold\">' + item.title + '</div>';\n        }\n        for (i = 0; i < item.children.length; i++) {\n            s += this._render(resourcesByIref, item.children[i]);\n        }\n        s += '</li>';\n        s += '</ul>';\n        return s;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/toc.ts","export class DomRender {\n    static hasClass(ele: any, cls: any) {\n        return ele.className.match(new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)'));\n    }\n\n    static addClass(ele: any, cls: any) {\n        if (!this.hasClass(ele, cls)) ele.className += \" \" + cls;\n    }\n\n    static removeClass(ele: any, cls: any) {\n        if (this.hasClass(ele, cls)) {\n            var reg: any = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n            ele.className = ele.className.replace(reg, ' ');\n        }\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/render.ts","import {Signal} from \"signals\";\n\nexport class SSLAApiEvents {\n    public preInitialize:Signal = new Signal();\n    public postInitialize:Signal = new Signal();\n    public preFinish:Signal = new Signal();\n    public postFinish:Signal = new Signal();\n    public preCommit:Signal = new Signal();\n    public postCommit:Signal = new Signal();\n    public preGetValue:Signal = new Signal();\n    public postGetValue:Signal = new Signal();\n    public preSetValue:Signal = new Signal();\n    public postSetValue:Signal = new Signal();\n    public preGetLastError:Signal = new Signal();\n    public postGetLastError:Signal = new Signal();\n    public preGetErrorString:Signal = new Signal();\n    public postGetErrorString:Signal = new Signal();\n    public preGetDiagnostic:Signal = new Signal();\n    public postGetDiagnostic:Signal = new Signal();\n    public statusChange:Signal = new Signal();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/events.ts","module.exports = signals;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"signals\"\n// module id = 20\n// module chunks = 0","import {SSLAApiEvents} from \"./events\";\n\n\nclass Statement {\n    public sco: string;\n    public fn: string;\n    public args: string[];\n    public ret: string;\n    public error: string;\n    public startTime: number;\n    public endTime: number;\n\n    constructor(sco:string, fn:string, args?:string[], ret?:string, error?:string) {\n        this.sco = sco;\n        this.fn = fn;\n        this.args = args;\n        this.ret = ret;\n        this.error = error;\n        this.startTime = new Date().getTime();\n    }\n\n    end():void {\n        this.endTime = new Date().getTime();\n    }\n}\n\n\nexport class ScormLog {\n    protected currentStatement:Statement = null;\n    protected statements:Statement[];\n    protected currentSco:string;\n    protected events:SSLAApiEvents;\n\n    constructor(events:SSLAApiEvents) {\n        this.events = events;\n        this.statements = [];\n        this.registerEvents();\n    }\n\n    add(fn:string, args:string[], ret:string, error:string):void {\n        this.start(fn, args);\n        this.finish(ret, error)\n    }\n\n    protected pre(cmd:string, args:string[]):void {\n        this.start(cmd, args);\n    }\n\n    protected post(cmd:string, args:string[], ret:string, err:string):void {\n        this.finish(ret, err);\n    }\n\n    registerEvents():void {\n        this.events.preInitialize.add(this.pre, this);\n        this.events.postInitialize.add(this.post, this);\n        this.events.preFinish.add(this.pre, this);\n        this.events.postFinish.add(this.post, this);\n        this.events.preCommit.add(this.pre, this);\n        this.events.postCommit.add(this.post, this);\n        this.events.preGetValue.add(this.pre, this);\n        this.events.postGetValue.add(this.post, this);\n        this.events.preSetValue.add(this.pre, this);\n        this.events.postSetValue.add(this.post, this);\n        this.events.preGetLastError.add(this.pre, this);\n        this.events.postGetLastError.add(this.post, this);\n        this.events.preGetErrorString.add(this.pre, this);\n        this.events.postGetErrorString.add(this.post, this);\n        this.events.preGetDiagnostic.add(this.pre, this);\n        this.events.postGetDiagnostic.add(this.post, this);\n    }\n\n    setSco(sco:string) {\n        this.currentSco = sco;\n    }\n\n    start(fn:string, args:string[]) {\n        this.currentStatement = new Statement(this.currentSco, fn, args);\n        this.statements.push(this.currentStatement);\n    }\n\n    finish(ret:string, error:string) {\n        this.currentStatement.end();\n        this.currentStatement = null;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scormlog.ts","import {SSLAConfiguration} from \"./config\";\nimport {Manifest} from \"./manifest\";\nimport {SSLA} from \"./app\";\n\n// We do this to handle frame access across lots of browsers.  There's got to be a more standards-compliant way.\ndeclare var jca_course_player:any;\nlet openConfig:SSLAConfiguration;\nlet openManifest:Manifest;\nlet openUrl:string;\n\nfunction openPage(location:string, windowName:string, settings:string) {\n    var popUp:any;\n    popUp = window.open(location, windowName, settings);\n    if (popUp == null || typeof(popUp) == 'undefined') {\n        //alert('Please disable your pop-up blocker and click the link again.');\n    }\n    else {\n        popUp.focus();\n\n        // Watch for when the popup closes.\n        var pollTimer = window.setInterval(function() {\n            let behavior:string;\n            let behaviorCustomFn:any;\n            if (popUp.closed !== false) { // !== is required for compatibility with Opera\n                window.clearInterval(pollTimer);\n                //someFunctionToCallWhenPopUpCloses();\n\n                // Single SCO or multi SCO?\n                if (openManifest.navigableScoInOrderTraversal.length == 1) {\n                    // Single SCO\n                    behavior = openConfig.closePopupSingleScoBehavior();\n                    behaviorCustomFn = openConfig.closePopupSingleScoCustomFunction();\n                }\n                else {\n                    // Multi SCO\n                    behavior = openConfig.closePopupMultiScoBehavior();\n                    behaviorCustomFn = openConfig.closePopupMultiScoCustomFunction();\n                }\n\n                if (behavior == \"\") {\n                    // Do nothing.\n                }\n                else if (behavior == \"exit\") {\n                    // TODO Something less abusive of global variables.\n                    (<any>parent).ssla.ssla.exit();\n                }\n                else if (behavior == \"message\") {\n                    alert(\"TODO message();\");\n                }\n                else if (behavior == \"custom\") {\n                    if (!behaviorCustomFn) {\n                        console.log(\"No exit custom behavior function defined in config.\");\n                    }\n                    else {\n                        behaviorCustomFn();\n                    }\n                }\n                else {\n                    console.log(\"Unrecognized exit behavior:\", behavior);\n                }\n\n            }\n        }, 200);\n\n    }\n    return popUp;\n};\n\nfunction tryPopup(path:string, popupSettings:string) {\n    return openPage(path, \"sco_win\", popupSettings);\n}\n\nfunction makePopup() {\n    return tryPopup(openUrl, openConfig.popupWindowParams());\n}\n\nexport function popupManually() {\n    updateUserText();\n    return makePopup();\n}\n\nfunction updateCenterContent(s:string) {\n    var handle = setInterval(function() {\n        try {\n            // TODO: Improve the frame handling on a global element name.\n            jca_course_player.document.getElementById(\"content\").innerHTML = s;\n            clearInterval(handle);\n        }\n        catch(e) { }\n    }, 10);\n}\n\nfunction updateUserText() {\n    updateCenterContent(openConfig.popupMainContentMessageAfterOpen());\n}\n\nexport function openSco(url:string, config:SSLAConfiguration, manifest:Manifest) {\n    let win:any;\n    openConfig = config;\n    openManifest = manifest;\n    openUrl = url;\n    if (openConfig.openContentIn() == \"popup\") {\n        win = makePopup();\n        if (!win) {\n            updateCenterContent(openConfig.popupMainContentMessageFailed());\n        }\n        else {\n            updateUserText();\n        }\n    }\n    else {\n        // TODO: Improve the frame handling on a global element name.\n        jca_course_player.document.location.replace(openUrl);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/open.ts","import {SSLAConfiguration} from \"./config\";\nimport {CourseTypeDetector} from \"./detector\";\n\nexport abstract class SSLAPlugin {\n    public config: SSLAConfiguration = null;\n    public ctd: CourseTypeDetector = null;\n    abstract start(): void;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugin.ts","import {SSLAConfiguration} from \"./config\";\nexport {UrlVarService} from \"./url\";\nimport {CourseTypeDetector} from \"./detector\";\nexport {popupManually} from \"./open\";\nimport {SSLAPlugin} from \"./plugin\";\nimport {VERSION} from \"./version\";\nimport {popupManually} from \"./open\";\n\n\nexport class SSLA {\n    public config: SSLAConfiguration = null;\n    public ctd: CourseTypeDetector = null;\n    public plugins: { [id: string]: SSLAPlugin } = {};\n    // Calling the plugins out by name that we \"know\" so we have an easy way to hook things onto them.\n    public scorm: SSLAPlugin;\n    public version: string = VERSION;\n\n    // This makes the popupManually function available publicly to simplify access to popup blockers.\n    public popupManually: any = popupManually;\n\n    constructor() {\n        this.config = new SSLAConfiguration();\n        this.ctd = new CourseTypeDetector();\n    }\n\n    public exit(): void {\n        switch (this.config.exitAction()) {\n            case \"none\":\n                // Intentionally do nothing.\n                break;\n            case \"close\":\n                try {\n                    window.close();\n                }\n                catch (e) {\n                }\n                ;\n                try {\n                    top.window.close();\n                } catch (e) {\n                }\n                ;\n                break;\n            case \"referrer\":\n                window.location.href = document.referrer;\n                break;\n            case \"url\":\n                window.location.href = this.config.exitUrl();\n                break;\n            case \"custom\":\n                if (this.config.exitFn()) {\n                    this.config.exitFn()();\n                }\n                else {\n                    console.log(\"No function specified for exit type custom for exitFn.\");\n                }\n                break;\n            default:\n                console.log(\"Exit behavior configuration option invalid:\", this.config.exitAction());\n        }\n    }\n\n    protected initCourseType(courseType: string): void {\n        if (courseType === \"scorm\") {\n            if (!this.plugins[\"scorm\"]) {\n                alert(\"No SCORM plugin installed.  Please contact administrative support.\");\n            }\n            else {\n                this.plugins[\"scorm\"].start();\n            }\n        }\n        else if (courseType === \"xapi\") {\n            if (!this.plugins[\"xapi\"]) {\n                alert(\"No XAPI plugin installed.  Please contact administrative support.\");\n            }\n            else {\n                this.plugins[\"xapi\"].start();\n            }\n        }\n        else if (courseType === \"aicc\") {\n            if (!this.plugins[\"aicc\"]) {\n                alert(\"No AICC plugin installed.  Please contact administrative support.\");\n            }\n            else {\n                this.plugins[\"aicc\"].start();\n            }\n        }\n        else {\n            // TODO Make this more inline?\n            // TODO Have a configuration option to play courses we don't know the type of?\n            // TODO Can we print the missing manifest filename if we only have one plugin type?\n            alert(\"Could not find any manifest file for supported course types in the specified folder.  Please check the directory containing your course and try again.\\n\" +\n                \"Course types supported by this build: \" + Object.keys(this.plugins).join(\",\") + \"\\n\")\n        }\n    }\n\n    registerPlugin(name: string, plugin: SSLAPlugin): void {\n        this.plugins[name] = plugin\n        plugin.config = this.config;\n        plugin.ctd = this.ctd;\n        if (name == \"scorm\") {\n            this.scorm = plugin;\n        }\n    }\n\n    start(): void {\n        if (this.config.pluginLoadDetection() && this.config.pluginMode() != \"\") {\n            alert(\"Configuration issue: pluginLoadDetection = true cannot be used with pluginMode.  System will now exit.\");\n            return;\n        }\n        else if (!this.config.pluginLoadDetection() && this.config.pluginMode() == \"\") {\n            alert(\"Configuration issue: pluginLoadDetection = false must have a specified pluginMode.  System will now exit.\");\n            return;\n        }\n\n        if (this.config.pluginLoadDetection()) {\n            // TODO We should probably polyfill bind in.  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\n            this.ctd.identify(this.config, this.plugins, this.initCourseType.bind(this));\n        }\n        else {\n            let plugin = this.plugins[this.config.pluginMode()];\n            if (!plugin) {\n                alert(\"Plugin mode could not be found: \" + this.config.pluginMode());\n                return;\n            }\n            plugin.start();\n        }\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.ts","import * as Path from \"./path\";\nimport {UrlVarService} from \"./url\";\n\n\ninterface IConfigurationIndex {\n    [key: string]: any\n}\n\ninterface IConfiguration {\n    autoLaunchFirstSco(): boolean;\n    courseBaseHtmlPath(): string;\n    closePopupSingleScoBehavior(): string;\n    closePopupMultiScoBehavior(): string;\n    closePopupSingleScoCustomFunction(): any;\n    closePopupMultiScoCustomFunction(): any;\n    courseId(): string;\n    courseDirectory(): string;\n    exitAction(): string;\n    exitFn(): Function;\n    exitUrl(): string;\n    getCredit(): string;\n    getDataAjaxMethod(): string;\n    getDataHeaders(): any;\n    getDataUrl(): string;\n    getMode(): string;\n    layoutUpdater(): Function;\n    navigationType(): string;\n    openContentIn(): string;\n    pluginLoadDetection(): boolean;\n    pluginMode(): string;\n    popupMainContentMessageAfterOpen(): string;\n    popupMainContentMessageFailed(): string;\n    popupWindowParams(): string;\n    returnToLastScoOnLaunch(): boolean;\n    saveDataOnCommit(): boolean;\n    saveDataOnSetValue(): boolean;\n    scormManifestFilename(): string;\n    scormManifestRawXml(): string;\n    scormManifestUseRawXml(): boolean;\n    scoreAllowChangeAfterCompleted(): boolean;\n    scoreAllowChangeAfterFailed(): boolean;\n    scoreAllowChangeAfterPassed(): boolean;\n    scoreAllowReduce(): boolean;\n    scoreRollupCustomFunction(): any;\n    scoreRollupIncludeScosWithNoScore(): boolean;\n    setDataAjaxMethod(): string;\n    setDataHeaders(): any;\n    setDataUrl(): string;\n    singleScoView(): string;\n    statusAllowChangeAfterCompleted(): boolean;\n    statusAllowChangeAfterFailed(): boolean;\n    statusAllowChangeAfterPassed(): boolean;\n    statusRollupCustomFunction(): any;\n    storageAdapter(): any;\n    storageAllowCORS(): boolean;\n    storageUseWithCredentials(): boolean;\n    studentId(): string;\n    studentName(): string;\n    xapiEndpoint(): string;\n    xapiManifestFilename(): string;\n    xapiRegistration(): string;\n}\n\n\nclass BasicConfiguration implements IConfiguration, IConfigurationIndex {\n    autoLaunchFirstSco(): boolean {\n        return true;\n    }\n\n    courseBaseHtmlPath(): string {\n        return \"\";\n    }\n\n    courseId(): string {\n        return UrlVarService.get(\"courseId\");\n    }\n\n    courseDirectory(): string {\n        if (UrlVarService.get(\"courseDirectory\").charAt(0) === \"/\") {\n            return UrlVarService.get(\"courseDirectory\");\n        }\n        return Path.join([this.courseBaseHtmlPath(), UrlVarService.get(\"courseDirectory\")]);\n    }\n\n    closePopupSingleScoBehavior(): string {\n        return \"exit\";\n    }\n\n    closePopupMultiScoBehavior(): string {\n        return \"\";\n    }\n\n    closePopupSingleScoCustomFunction(): any {\n        return null;\n    }\n\n    closePopupMultiScoCustomFunction(): any {\n        return null;\n    }\n\n    /**\n     * Valid options:\n     * \"none\": Do nothing.  Useful for external management of unload behavior.\n     * \"close\": Attempt to close the current window.\n     * \"referrer\": Redirect to the referrer URL.\n     * \"url\": Redirect to a URL.\n     * \"custom\": Call a custom exit function, defined by exitFn().\n     * @returns {string}\n     */\n    exitAction(): string {\n        return \"referrer\";\n    }\n\n    exitFn(): Function {\n        return null;\n    }\n\n    exitUrl(): string {\n        return \"blank_unloading.htm\";\n    }\n\n    getCredit(): string {\n        return UrlVarService.get(\"credit\");\n    }\n\n    getDataAjaxMethod(): string {\n        return \"POST\";\n    }\n\n    getDataHeaders(): any {\n        return {};\n    }\n\n    getDataUrl(): string {\n        return \"/trackAllInOne/get\";\n    }\n\n    getMode(): string {\n        return UrlVarService.get(\"mode\");\n    }\n\n    /**\n     * Provide a custom function to perform layout updates based on the system state, including information about the\n     * course itself (single SCO vs. multi SCO, for example).\n     * Expected function signature is single argument that can take an SSLA object.\n     * @returns {null}\n     */\n    layoutUpdater(): Function {\n        return null;\n    }\n\n    navigationType(): string {\n        return \"\";\n    }\n\n    openContentIn(): string {\n        return \"inline\";\n    }\n\n    pluginLoadDetection(): boolean {\n        return true;\n    }\n\n    pluginMode(): string {\n        return \"\";\n    }\n\n    popupMainContentMessageAfterOpen(): string {\n        return 'Your course has been opened in a popup.  When you have completed your course, please make another selection from the tree, press exit or close this window.';\n    }\n\n    popupMainContentMessageFailed(): string {\n        return 'Your course window did not pop open correctly.<br>  <a onclick=\"parent.ssla.ssla.popupManually()\" href=\"#\">Click here to open the course.</a>';\n    }\n\n    popupWindowParams(): string {\n        return \"status=1,toolbar=1,scrollbars=1,resizable=1,alwaysRaised=1\";\n    }\n\n    returnToLastScoOnLaunch(): boolean {\n        return false;\n    }\n\n    saveDataOnCommit(): boolean {\n        return true;\n    }\n\n    saveDataOnSetValue(): boolean {\n        return false;\n    }\n\n    scoreAllowChangeAfterCompleted(): boolean {\n        return true;\n    }\n\n    scoreAllowChangeAfterFailed(): boolean {\n        return true;\n    }\n\n    scoreAllowChangeAfterPassed(): boolean {\n        return true;\n    }\n\n    scoreAllowReduce(): boolean {\n        return true;\n    }\n\n    scoreRollupCustomFunction(): any {\n        return null;\n    }\n\n    scoreRollupIncludeScosWithNoScore(): boolean {\n        return false;\n    }\n\n    scormManifestFilename(): string {\n        return \"imsmanifest.xml\";\n    }\n\n    scormManifestRawXml(): string {\n        return \"\";\n    }\n\n    /**\n     * If true, use scormManifestRawXml for the manifest XML body.\n     * If false, load the XML from the file referenced by scormManifestFilename.\n     * @returns {boolean}\n     */\n    scormManifestUseRawXml(): boolean {\n        return false;\n    }\n\n    setDataAjaxMethod(): string {\n        return \"POST\";\n    }\n\n    setDataHeaders(): any {\n        return {};\n    }\n\n    setDataUrl(): string {\n        return \"/trackAllInOne/set\";\n    }\n\n    /**\n     * Valid options:\n     *   \"\": Leave it however it's currently displaying.\n     *   \"HIDE_ALL\": Hide all non-course view components.\n     *   \"HIDE_NAV_BUTTONS\": Hide the navigation menu.\n     *   \"HIDE_TREE\": Hide the navigation tree.\n     * @returns {string}\n     */\n    singleScoView(): string {\n        return \"\";\n    }\n\n    statusAllowChangeAfterCompleted(): boolean {\n        return true;\n    }\n\n    statusAllowChangeAfterFailed(): boolean {\n        return true;\n    }\n\n    statusAllowChangeAfterPassed(): boolean {\n        return true;\n    }\n\n    statusRollupCustomFunction(): any {\n        return null;\n    }\n\n    storageAdapter(): any {\n        return null;\n    }\n\n    storageAllowCORS(): boolean {\n        return true;\n    }\n\n    storageUseWithCredentials(): boolean {\n        return true;\n    }\n\n    studentId(): string {\n        return UrlVarService.get(\"studentId\");\n    }\n\n    studentName(): string {\n        return UrlVarService.get(\"studentName\");\n    }\n\n    xapiEndpoint(): string {\n        return \"\";\n    }\n\n    xapiManifestFilename(): string {\n        return \"tincan.xml\";\n    }\n\n    /**\n     * If set, adds a registration parameter to the XAPI launch URL with whatever value is provided in the config.\n     * @returns {string}\n     */\n    xapiRegistration(): string {\n        return \"\";\n    }\n}\n\n\ntype ConfigCallable = (() => boolean) | (() => string);\ninterface SSLAWindow extends Window {\n    sslaConfig: { [key: string]: ConfigCallable | string | boolean };\n}\ndeclare var window: SSLAWindow;\n\n\nexport class SSLAConfiguration implements IConfiguration {\n    protected internalConfig: IConfigurationIndex;\n\n    constructor() {\n        this.internalConfig = new BasicConfiguration();\n    }\n\n    protected isFunction(obj: any): obj is ConfigCallable {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n\n    protected fromExt(fn: string): any {\n        if (typeof window.sslaConfig !== \"undefined\" && typeof window.sslaConfig[fn] !== \"undefined\") {\n            // Is it a function or a value?\n            if (this.isFunction(window.sslaConfig[fn])) {\n                return (<any>window.sslaConfig)[fn]();\n            }\n            return window.sslaConfig[fn];\n        }\n        return this.internalConfig[fn]();\n    }\n\n    autoLaunchFirstSco(): boolean {\n        return this.fromExt(\"autoLaunchFirstSco\");\n    }\n\n    closePopupSingleScoBehavior(): string {\n        return this.fromExt(\"closePopupSingleScoBehavior\");\n    }\n\n    closePopupMultiScoBehavior(): string {\n        return this.fromExt(\"closePopupMultiScoBehavior\");\n    }\n\n    closePopupSingleScoCustomFunction(): any {\n        return this.fromExt(\"closePopupSingleScoCustomFunction\");\n    }\n\n    closePopupMultiScoCustomFunction(): any {\n        return this.fromExt(\"closePopupMultiScoCustomFunction\");\n    }\n\n    courseBaseHtmlPath(): string {\n        return this.fromExt(\"courseBaseHtmlPath\");\n    }\n\n    courseId(): string {\n        return this.fromExt(\"courseId\");\n    }\n\n    courseDirectory(): string {\n        return this.fromExt(\"courseDirectory\");\n    }\n\n    exitAction(): string {\n        return this.fromExt(\"exitAction\");\n    }\n\n    exitFn(): Function {\n        return this.fromExt(\"exitFn\");\n    }\n\n    exitUrl(): string {\n        return this.fromExt(\"exitUrl\");\n    }\n\n    getCredit(): string {\n        return this.fromExt(\"getCredit\");\n    }\n\n    getDataAjaxMethod(): string {\n        return this.fromExt(\"getDataAjaxMethod\");\n    }\n\n    getDataHeaders(): any {\n        return this.fromExt(\"getDataHeaders\");\n    }\n\n    getDataUrl(): string {\n        return this.fromExt(\"getDataUrl\");\n    }\n\n    getMode(): string {\n        return this.fromExt(\"getMode\");\n    }\n\n    layoutUpdater(): Function {\n        return this.fromExt(\"layoutUpdater\");\n    }\n\n    navigationType(): string {\n        return this.fromExt(\"navigationType\");\n    }\n\n    openContentIn(): string {\n        return this.fromExt(\"openContentIn\");\n    }\n\n    pluginLoadDetection(): boolean {\n        return this.fromExt(\"pluginLoadDetection\");\n    }\n\n    pluginMode(): string {\n        return this.fromExt(\"pluginMode\");\n    }\n\n    popupMainContentMessageAfterOpen(): string {\n        return this.fromExt(\"popupMainContentMessageAfterOpen\");\n    }\n\n    popupMainContentMessageFailed(): string {\n        return this.fromExt(\"popupMainContentMessageFailed\");\n    }\n\n    popupWindowParams(): string {\n        return this.fromExt(\"popupWindowParams\");\n    }\n\n    returnToLastScoOnLaunch(): boolean {\n        return this.fromExt(\"returnToLastScoOnLaunch\");\n    }\n\n    saveDataOnCommit(): boolean {\n        return this.fromExt(\"saveDataOnCommit\");\n    }\n\n    saveDataOnSetValue(): boolean {\n        return this.fromExt(\"saveDataOnSetValue\");\n    }\n\n    scoreAllowChangeAfterCompleted(): boolean {\n        return this.fromExt(\"scoreAllowChangeAfterCompleted\");\n    }\n\n    scoreAllowChangeAfterFailed(): boolean {\n        return this.fromExt(\"scoreAllowChangeAfterFailed\");\n    }\n\n    scoreAllowChangeAfterPassed(): boolean {\n        return this.fromExt(\"scoreAllowChangeAfterPassed\");\n    }\n\n    scoreAllowReduce(): boolean {\n        return this.fromExt(\"scoreAllowReduce\");\n    }\n\n    scoreRollupCustomFunction(): any {\n        return this.fromExt(\"scoreRollupCustomFunction\");\n    }\n\n    scoreRollupIncludeScosWithNoScore(): boolean {\n        return this.fromExt(\"scoreRollupIncludeScosWithNoScore\");\n    }\n\n    scormManifestFilename(): string {\n        return this.fromExt(\"scormManifestFilename\");\n    }\n\n    scormManifestRawXml(): string {\n        return this.fromExt(\"scormManifestRawXml\");\n    }\n\n    scormManifestUseRawXml(): boolean {\n        return this.fromExt(\"scormManifestUseRawXml\");\n    }\n\n    setDataAjaxMethod(): string {\n        return this.fromExt(\"setDataAjaxMethod\");\n    }\n\n    setDataHeaders(): any {\n        return this.fromExt(\"setDataHeaders\");\n    }\n\n    setDataUrl(): string {\n        return this.fromExt(\"setDataUrl\");\n    }\n\n    singleScoView(): string {\n        return this.fromExt(\"singleScoView\");\n    }\n\n    statusAllowChangeAfterCompleted(): boolean {\n        return this.fromExt(\"statusAllowChangeAfterCompleted\");\n    }\n\n    statusAllowChangeAfterFailed(): boolean {\n        return this.fromExt(\"statusAllowChangeAfterFailed\");\n    }\n\n    statusAllowChangeAfterPassed(): boolean {\n        return this.fromExt(\"statusAllowChangeAfterPassed\");\n    }\n\n    statusRollupCustomFunction(): any {\n        return this.fromExt(\"statusRollupCustomFunction\");\n    }\n\n    storageAdapter(): any {\n        return this.fromExt(\"storageAdapter\");\n    }\n\n    storageAllowCORS(): boolean {\n        return this.fromExt(\"storageAllowCORS\");\n    }\n\n    storageUseWithCredentials(): boolean {\n        return this.fromExt(\"storageUseWithCredentials\");\n    }\n\n    studentId(): string {\n        return this.fromExt(\"studentId\");\n    }\n\n    studentName(): string {\n        return this.fromExt(\"studentName\");\n    }\n\n    xapiEndpoint(): string {\n        return this.fromExt(\"xapiEndpoint\");\n    }\n\n    xapiManifestFilename(): string {\n        return this.fromExt(\"xapiManifestFilename\");\n    }\n\n    xapiRegistration(): string {\n        return this.fromExt(\"xapiRegistration\");\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.ts","import {SSLAConfiguration} from \"./config\";\nimport * as Path from \"./path\";\nimport {SSLAPlugin} from \"./plugin\";\n\ndeclare var reqwest: any;\n\n\n/**\n * Determine what type of course this is based on what files are available.\n */\nexport class CourseTypeDetector {\n    callbackOnDecision: Function;\n    callbackAttempted: boolean = false;\n    checkedAICC: boolean = false;\n    checkedSCORM: boolean = false;\n    checkedXAPI: boolean = false;\n    isAICC: boolean = false;\n    isSCORM: boolean = false;\n    isXAPI: boolean = false;\n    aiccContents: any;\n    scormContents: any;\n    xapiContents: any;\n\n    protected attemptAICC(courseDirectory: string, manifestFilename: string) {\n        // TODO\n        this.checkedAICC = true;\n        this.finishIfAllChecked();\n    }\n\n    protected attemptXAPI(courseDirectory: string, manifestFilename: string) {\n        let me: CourseTypeDetector = this;\n        reqwest({\n            url: Path.join([courseDirectory, manifestFilename])\n            , type: 'xml'\n        })\n            .then(function (resp: any) {\n                me.isXAPI = true;\n                me.xapiContents = resp;\n            })\n            .always(function (resp: any) {\n                me.checkedXAPI = true;\n                me.finishIfAllChecked();\n            });\n    }\n\n    protected attemptSCORM(courseDirectory: string, manifestFilename: string) {\n        let me: CourseTypeDetector = this;\n        reqwest({\n            url: Path.join([courseDirectory, manifestFilename])\n            , type: 'xml'\n        })\n            .then(function (resp: any) {\n                me.isSCORM = true;\n                me.scormContents = resp;\n            })\n            .always(function (resp: any) {\n                me.checkedSCORM = true;\n                me.finishIfAllChecked();\n            });\n    }\n\n    protected finishIfAllChecked(): void {\n        if (this.callbackAttempted) {\n            return;\n        }\n\n        // TODO Can we make this priority chain controllable by config?\n        if (this.isSCORM) {\n            this.callbackAttempted = true;\n            this.callbackOnDecision(\"scorm\");\n        }\n        else if (this.isXAPI) {\n            this.callbackAttempted = true;\n            this.callbackOnDecision(\"xapi\");\n        }\n        else if (this.isAICC) {\n            this.callbackAttempted = true;\n            this.callbackOnDecision(\"aicc\");\n        }\n        else if (this.checkedSCORM && this.checkedXAPI && this.checkedAICC) {\n            this.callbackOnDecision(\"\");\n        }\n    }\n\n    identify(config: SSLAConfiguration, availablePlugins:{[id: string]: SSLAPlugin}, callbackOnDecision: Function): void {\n        this.callbackOnDecision = callbackOnDecision;\n\n        if (availablePlugins[\"aicc\"]) {\n            this.attemptAICC(config.courseDirectory(), \"\");\n        }\n        else {\n            this.checkedAICC = true;\n        }\n\n        if (availablePlugins[\"scorm\"]) {\n            this.attemptSCORM(config.courseDirectory(), config.scormManifestFilename());\n        }\n        else {\n            this.checkedSCORM = true;\n        }\n\n        if (availablePlugins[\"xapi\"]) {\n            this.attemptXAPI(config.courseDirectory(), config.xapiManifestFilename());\n        }\n        else {\n            this.checkedXAPI = true;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/detector.ts","export let VERSION:string = \"3.4.0+\";\n\n\n// WEBPACK FOOTER //\n// ./src/version.ts"],"sourceRoot":""}